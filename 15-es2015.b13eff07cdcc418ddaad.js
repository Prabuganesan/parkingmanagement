(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{koon:function(e,t,n){"use strict";n.r(t),n.d(t,"startupModule",function(){return v});var s=n("ofXK"),r=n("TEn/"),i=n("3Pt+"),o=n("fXoL"),c=n("tyNb"),a=n("fU03"),d=n("7zfz"),l=n("tp0D"),u=n("/RsI"),p=n("7kUa"),b=n("Gxio"),h=n("jIHw");function g(e,t){if(1&e){const e=o.Sb();o.Rb(0,"ion-col"),o.Rb(1,"div",7),o.Zb("click",function(){o.uc(e);const n=t.$implicit;return o.bc().openMenu(n)}),o.Mb(2,"ion-icon",8),o.Rb(3,"h3",9),o.Cc(4),o.Qb(),o.Qb(),o.Qb()}if(2&e){const e=t.$implicit;o.Ab(4),o.Dc(e.userName)}}function f(e,t){if(1&e){const e=o.Sb();o.Rb(0,"p-button",10),o.Zb("click",function(){return o.uc(e),o.bc().login()}),o.Qb()}}const m=function(){return{width:"300px"}},y=[{path:"",component:(()=>{class e{constructor(e,t,n,s){this.router=e,this.util=t,this.messageService=n,this.dbprovider=s,this.display=!1,this.password="",this.tableName="applicationUser",this.users=[],this.createFirstAdmin()}openMenu(e){console.log(e),this.display=!0,this.selectedUser=e}login(){this.display=!1,this.util.userId=this.selectedUser.code,this.selectedUser.password==this.password?setTimeout(()=>this.router.navigate(["/menu"]),300):this.messageService.add({key:"startup",severity:"error",summary:"Invalid password",detail:"",closable:!0})}createFirstAdmin(){this.fetchUserData().then(e=>{var t=!1;e.records&&e.records.length>0&&e.records.forEach(e=>{"Admin"==e.userType&&(t=!0)}),console.log(t),0==t?(this.util.userId=1,this.dbprovider.save(this.tableName,{userName:"Shunmu",mobile:9841163959,code:1,userType:"Admin",password:"shunmu"}).then(e=>{console.log("result",e),"SUCCESS"==e.status?this.fetchUserData().then(e=>{e.records&&e.records.length>0&&(this.users=e.records,console.log("user list",this.users))}):this.messageService.add({key:"startup",severity:"error",summary:"First time user creation failed",detail:"",closable:!0})}).catch(e=>{console.log(e),this.messageService.add({key:"startup",severity:"error",summary:"First time user creation failed",detail:""})})):this.fetchUserData().then(e=>{e.records&&e.records.length>0&&(this.users=e.records,console.log("user list else",this.users))})})}fetchUserData(){return this.dbprovider.fetchDocsWithoutRelationshipByType(this.tableName).then(e=>e&&"SUCCESS"==e.status?e:[]).catch(e=>(this.messageService.add({key:"startup",severity:"error",summary:"User fetching failed",detail:""}),[]))}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(c.g),o.Lb(a.a),o.Lb(d.f),o.Lb(l.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["startup"]],decls:12,vars:10,consts:[[1,"auth-form","background",3,"fullscreen"],["size","large",1,"ion-text-center",2,"height","50px"],[4,"ngFor","ngForOf"],["header","Enter password",3,"visible","modal","responsive","appendTo","visibleChange"],["pInputText","","type","text","placeholder"," Password",3,"ngModel","ngModelChange"],["pTemplate","footer"],["key","startup","position","bottom-center"],[2,"background","#fdfdfd","width","60%","text-align","center","padding","5px","margin","0 auto","border-radius","10px",3,"click"],["name","person",2,"font-size","70px","padding","10px"],[2,"font-size","3vw"],["icon","pi pi-check","label","Login",1,"p-button-text",3,"click"]],template:function(e,t){1&e&&(o.Rb(0,"ion-content",0),o.Rb(1,"div"),o.Rb(2,"ion-title",1),o.Cc(3," Parking management "),o.Qb(),o.Qb(),o.Rb(4,"ion-grid"),o.Mb(5,"ion-row"),o.Rb(6,"ion-row"),o.Ac(7,g,5,1,"ion-col",2),o.Qb(),o.Qb(),o.Rb(8,"p-dialog",3),o.Zb("visibleChange",function(e){return t.display=e}),o.Rb(9,"ion-input",4),o.Zb("ngModelChange",function(e){return t.password=e}),o.Qb(),o.Ac(10,f,1,0,"ng-template",5),o.Qb(),o.Mb(11,"p-toast",6),o.Qb()),2&e&&(o.hc("fullscreen",!0),o.Ab(7),o.hc("ngForOf",t.users),o.Ab(1),o.yc(o.jc(9,m)),o.hc("visible",t.display)("modal",!0)("responsive",!0)("appendTo","body"),o.Ab(1),o.hc("ngModel",t.password))},directives:[r.l,r.A,r.m,r.x,s.j,u.a,r.p,r.K,p.a,i.i,i.l,d.h,b.a,r.k,r.o,h.a],styles:['.divider[_ngcontent-%COMP%]{display:flex}.divider[_ngcontent-%COMP%]:after, .divider[_ngcontent-%COMP%]:before{content:"";flex:1}.line[_ngcontent-%COMP%]{align-items:center;margin:1em -1em;color:#ccc}.line[_ngcontent-%COMP%]:after, .line[_ngcontent-%COMP%]:before{height:1px;margin:0 1em}.one-line[_ngcontent-%COMP%]:after, .one-line[_ngcontent-%COMP%]:before{background:#ccc}.auth-form[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], .auth-form[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:50%;justify-content:center}.already[_ngcontent-%COMP%]{display:block;text-align:center;padding-bottom:10px}.circle[_ngcontent-%COMP%]{width:50%;height:50%;background:#0ff;border:5px solid #00f}.circleBase[_ngcontent-%COMP%]{border-radius:50%}.background[_ngcontent-%COMP%]{--background:url(/assets/bg2.jpeg) 0 0/100% 100% no-repeat}']}),e})()}];let v=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},imports:[[c.k.forChild(y),s.b,i.f,r.C,u.b,h.c,p.b,b.b],c.k]}),e})()}}]);