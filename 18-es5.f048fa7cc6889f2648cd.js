!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"/Gcl":function(t,i,c){"use strict";c.r(i),c.d(i,"vehicleSearchModule",function(){return q});var a=c("ofXK"),r=c("TEn/"),l=c("3Pt+"),s=c("mrSG"),u=c("fXoL"),b=c("27b0"),d=c("tp0D"),h=c("7zfz"),p=c("sYmb"),g=c("jIHw"),m=c("Q4Mo"),f=c("LuMj");function v(e,t){if(1&e){var n=u.Tb();u.Sb(0,"form"),u.Sb(1,"ion-item",8),u.Sb(2,"h5"),u.Ec(3),u.dc(4,"translate"),u.dc(5,"translate"),u.Rb(),u.Rb(),u.Sb(6,"ion-item",8),u.Sb(7,"ion-label",9),u.Ec(8),u.dc(9,"translate"),u.Rb(),u.Sb(10,"ion-input",10),u.ac("input",function(e){return u.wc(n),u.cc().onInputAmount(e)}),u.Rb(),u.Rb(),u.Sb(11,"ion-item",8),u.Sb(12,"ion-label",9),u.Ec(13),u.dc(14,"translate"),u.Rb(),u.Sb(15,"ion-input",11),u.ac("input",function(e){return u.wc(n),u.cc().onInputDiscount(e)}),u.Rb(),u.Rb(),u.Sb(16,"ion-item",8),u.Sb(17,"ion-label",9),u.Ec(18),u.dc(19,"translate"),u.Rb(),u.Nb(20,"ion-input",12),u.Rb(),u.Sb(21,"ion-item",8),u.Sb(22,"ion-label",9),u.Ec(23),u.dc(24,"translate"),u.Rb(),u.Sb(25,"ion-input",13),u.ac("input",function(e){return u.wc(n),u.cc().onInputReceivedFrom(e)}),u.Rb(),u.Rb(),u.Sb(26,"ion-item",8),u.Sb(27,"ion-label"),u.Ec(28),u.dc(29,"translate"),u.Rb(),u.Sb(30,"p-radioButton",14),u.ac("ngModelChange",function(e){return u.wc(n),u.cc().paymentMode=e}),u.Rb(),u.Sb(31,"label",15),u.Ec(32,"Cash "),u.Rb(),u.Sb(33,"p-radioButton",16),u.ac("ngModelChange",function(e){return u.wc(n),u.cc().paymentMode=e}),u.Rb(),u.Sb(34,"label",15),u.Ec(35,"UPI "),u.Rb(),u.Sb(36,"p-radioButton",17),u.ac("ngModelChange",function(e){return u.wc(n),u.cc().paymentMode=e}),u.Rb(),u.Sb(37,"label",15),u.Ec(38,"Card "),u.Rb(),u.Rb(),u.Sb(39,"ion-row"),u.Sb(40,"ion-col"),u.Sb(41,"ion-button",18),u.ac("click",function(){return u.wc(n),u.cc().save()}),u.Ec(42),u.dc(43,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Rb()}if(2&e){var i=u.cc();u.Ab(3),u.Ic(" ",u.ec(4,16,"transactionEntry.totalPendingAmount")," : ",i.totalPendingAmount," ",u.ec(5,18,"rs"),""),u.Ab(5),u.Gc(" ",u.ec(9,20,"transactionEntry.amount"),""),u.Ab(2),u.jc("value",i.amount),u.Ab(3),u.Fc(u.ec(14,22,"transactionEntry.discount")),u.Ab(2),u.jc("value",i.discount),u.Ab(3),u.Fc(u.ec(19,24,"transactionEntry.totalPayable")),u.Ab(2),u.jc("value",i.totalPayable),u.Ab(3),u.Gc(" ",u.ec(24,26,"transactionHistory.receivedFrom"),""),u.Ab(2),u.jc("value",i.receivedFrom),u.Ab(3),u.Fc(u.ec(29,28,"transactionEntry.amountMode")),u.Ab(2),u.jc("ngModel",i.paymentMode),u.Ab(3),u.jc("ngModel",i.paymentMode),u.Ab(3),u.jc("ngModel",i.paymentMode),u.Ab(6),u.Fc(u.ec(43,30,"save"))}}var y,C=((y=function(){function e(t,i,o,c,a,r){n(this,e),this.dbconfig=t,this.dbprovider=i,this.alertController=o,this.popoverController=c,this.messageService=a,this.translate=r,this.totalPendingAmount=0,this.discount=0,this.paymentMode="cash",this.tableName="transaction",this.billTableName="billDetail",this.accountTableName="account",this.receivedFrom="",this.savedSuccessMessage="Data saved successfully",this.month_mapping={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},this.cspfmEditorType=""}return o(e,[{key:"ngOnInit",value:function(){console.log(this.billdetail);var e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e).toISOString().slice(0,-5);this.billdate=t,this.amount=this.billdetail.pendingAmount,this.totalPayable=this.amount-this.discount,this.monthName=this.month_mapping[this.billdetail.billMonth]+" "+this.billdetail.billYear,this.totalPendingAmount=this.billdetail.totalAmount,this.fetchAccount(this.billdetail.account)}},{key:"fetchAccount",value:function(e){var t=this;this.dbprovider.fetchDocWithoutRelationshipByTypeAndId(this.accountTableName,e).then(function(e){console.log(e),e&&"SUCCESS"==e.status&&e.records.length>0&&(t.account=e.records[0])})}},{key:"ngAfterViewInit",value:function(){}},{key:"closePopover",value:function(){this.popoverController.dismiss()}},{key:"onInputAmount",value:function(e){this.totalPayable=e.target.value-this.discount,this.amount=e.target.value}},{key:"onInputDiscount",value:function(e){this.totalPayable=this.amount-e.target.value,this.discount=e.target.value}},{key:"onInputReceivedFrom",value:function(e){this.receivedFrom=e.target.value}},{key:"save",value:function(){var e=this;console.log(this.transactionObj),this.billdetail.pendingAmount<this.amount?this.presentAlert():(this.transactionObj=JSON.parse(JSON.stringify(this.dbconfig.configuration.tableStructure[this.tableName])),this.transactionObj.transactionAmount=Number(this.amount),this.transactionObj.transactionMode=this.paymentMode,this.transactionObj.discountAmount=Number(this.discount),this.transactionObj.transactionDate=new Date(this.billdate).getTime(),this.transactionObj.paidAmount=Number(this.totalPayable),this.transactionObj.billDetail=this.billdetail.id,this.transactionObj.receivedFrom=this.receivedFrom,this.dbprovider.save(this.tableName,this.transactionObj).then(function(t){"SUCCESS"==t.status?(e.messageService.add({key:"transactionEntry",severity:"success",summary:e.savedSuccessMessage,detail:""}),e.saveBill()):e.messageService.add({key:"transactionEntry",severity:"error",summary:t.message,detail:"",closable:!0})}).catch(function(t){console.log(t),e.messageService.add({key:"transactionEntry",severity:"error",summary:t,detail:""})}))}},{key:"saveBill",value:function(){var e=this;this.billdetail.receivedAmount=this.billdetail.receivedAmount+Number(this.amount),this.billdetail.pendingAmount=this.billdetail.pendingAmount-Number(this.amount),this.dbprovider.save(this.billTableName,this.billdetail).then(function(t){console.log(t),"SUCCESS"==t.status&&(e.billdetail.rev=t.rev),e.saveAccount()}).catch(function(t){e.popoverController.dismiss(),console.log(t)})}},{key:"saveAccount",value:function(){var e=this;this.account.receivedAmount=this.account.receivedAmount+Number(this.amount),this.dbprovider.save(this.accountTableName,this.account).then(function(t){console.log(t),e.popoverController.dismiss()}).catch(function(t){e.popoverController.dismiss(),console.log(t)})}},{key:"presentAlert",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"",subHeader:"",message:"Entered amount is greater than pending amount",buttons:["OK"]});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.next=7,t.onDidDismiss();case 7:n=e.sent,i=n.role,console.log("onDidDismiss resolved with role",i);case 10:case"end":return e.stop()}},e,this)}))}}]),e}()).\u0275fac=function(e){return new(e||y)(u.Mb(b.a),u.Mb(d.a),u.Mb(r.a),u.Mb(r.H),u.Mb(h.h),u.Mb(p.d))},y.\u0275cmp=u.Gb({type:y,selectors:[["transactionEntry"]],inputs:{billdetail:"billdetail"},decls:9,vars:3,consts:[[1,"pm-te"],[1,"pm-close-action"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-danger",3,"click"],[1,"pm-monthName",2,"text-align","center"],[1,"pm-dateselect",2,"text-align","center"],["type","datetime-local","id","myLocalDate",2,"background-color","lightgray","align-self","center","width","60%",3,"ngModel","ngModelChange"],[4,"ngIf"],["key","transactionEntry","position","center"],["lines","none"],["position","floating"],["type","number","required","",3,"value","input"],["type","number",3,"value","input"],["type","number","readonly","",3,"value"],["type","text",3,"value","input"],["name","cash","value","cash","inputId","cash",3,"ngModel","ngModelChange"],[2,"padding-left","5px","padding-right","10px"],["name","upi","value","upi","inputId","upi",3,"ngModel","ngModelChange"],["name","card","value","card","inputId","card",3,"ngModel","ngModelChange"],["type","submit","color","danger","expand","block",3,"click"]],template:function(e,t){1&e&&(u.Sb(0,"div",0),u.Sb(1,"span",1),u.Sb(2,"button",2),u.ac("click",function(){return t.closePopover()}),u.Rb(),u.Rb(),u.Sb(3,"h1",3),u.Ec(4),u.Rb(),u.Sb(5,"div",4),u.Sb(6,"input",5),u.ac("ngModelChange",function(e){return t.billdate=e}),u.Rb(),u.Rb(),u.Cc(7,v,44,32,"form",6),u.Rb(),u.Nb(8,"p-toast",7)),2&e&&(u.Ab(4),u.Fc(t.monthName),u.Ab(2),u.jc("ngModel",t.billdate),u.Ab(1),u.jc("ngIf",t.billdetail))},directives:[g.b,m.a,l.a,l.i,l.l,a.l,l.p,l.j,l.k,f.a],pipes:[p.c],styles:[".my-button[_ngcontent-%COMP%]{--background:#white;--background-activated:#white}.pm-te[_ngcontent-%COMP%]{height:100%;position:absolute}.pm-te[_ngcontent-%COMP%], .pm-te[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{background:#fff;width:100%}.pm-te[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background:#fff;color:#212e3f;border-bottom:1px solid #d3d3d3;padding:0 10px}.pm-te[_ngcontent-%COMP%]   .pm-close-action[_ngcontent-%COMP%]{float:right;margin:15px 15px 0 0}.pm-te[_ngcontent-%COMP%]   .pm-monthName[_ngcontent-%COMP%]{text-align:center;color:#212e3f;height:30px;font-size:22px}.pm-te[_ngcontent-%COMP%]   .pm-dateselect[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;width:100%;align-items:center;background:#fff;--background:#fff}.pm-te[_ngcontent-%COMP%]   .pm-dateselect[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #bfbfbf;padding:2px 5px;background:#fff;color:#212e3f;outline:none;border-radius:4px;margin-left:5px}"]}),y),S=c("tyNb"),M=c("fU03"),P=c("7kUa"),k=c("Gxio"),A=c("rEr+");function x(e,t){1&e&&(u.Sb(0,"colgroup"),u.Nb(1,"col",22),u.Nb(2,"col",23),u.Nb(3,"col",23),u.Nb(4,"col",23),u.Nb(5,"col",23),u.Nb(6,"col",23),u.Nb(7,"col",23),u.Nb(8,"col",23),u.Nb(9,"col",23),u.Nb(10,"col",23),u.Nb(11,"col",23),u.Rb())}function w(e,t){1&e&&u.Nb(0,"p-columnFilter",27)}function O(e,t){if(1&e&&(u.Sb(0,"th"),u.Sb(1,"div",25),u.Ec(2),u.dc(3,"translate"),u.Cc(4,w,1,0,"p-columnFilter",26),u.Rb(),u.Rb()),2&e){var n=t.$implicit;u.Ab(2),u.Gc(" ",u.ec(3,2,n.header)," "),u.Ab(2),u.jc("ngIf","Vehicle Info"==n.header)}}function R(e,t){if(1&e&&(u.Sb(0,"tr"),u.Cc(1,O,5,4,"th",24),u.Rb()),2&e){var n=t.$implicit;u.Ab(1),u.jc("ngForOf",n)}}function N(e,t){if(1&e&&(u.Sb(0,"label"),u.Sb(1,"b"),u.Ec(2),u.Rb(),u.Rb()),2&e){var n=u.cc(3).$implicit;u.Ab(2),u.Fc(n.primaryContact.contactName)}}function I(e,t){if(1&e&&(u.Sb(0,"label"),u.Sb(1,"b"),u.Ec(2),u.Rb(),u.Rb()),2&e){var n=u.cc(3).$implicit;u.Ab(2),u.Fc(n.primaryContact.contactNameInTamil)}}function _(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",3),u.ac("click",function(){u.wc(n);var e=u.cc(2).$implicit;return u.cc(2).vehicleCellClick(e)}),u.Sb(1,"label"),u.Ec(2),u.Rb(),u.Nb(3,"br"),u.Sb(4,"label"),u.Ec(5),u.Rb(),u.Nb(6,"br"),u.Cc(7,N,3,1,"label",16),u.Cc(8,I,3,1,"label",16),u.Rb()}if(2&e){var i=u.cc(2).$implicit,o=u.cc(2);u.Ab(2),u.Hc("",i.vehicleInfo.vehicleBrand," ",i.vehicleInfo.vehicleModel," "),u.Ab(3),u.Fc(i.vehicleInfo.vehicleNumber),u.Ab(2),u.jc("ngIf",o.appLanguage&&"en"==o.appLanguage&&i.primaryContact),u.Ab(1),u.jc("ngIf",o.appLanguage&&"ta"==o.appLanguage&&i.primaryContact)}}function E(e,t){1&e&&u.Nb(0,"p",33)}function j(e,t){1&e&&u.Nb(0,"p",34)}function T(e,t){1&e&&u.Nb(0,"p",35)}function D(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",3),u.ac("click",function(e){u.wc(n);var t=u.cc().$implicit,i=u.cc().$implicit;return u.cc(2).amountCellClick(e,i[t.field])}),u.Sb(1,"label"),u.Ec(2),u.dc(3,"translate"),u.Rb(),u.Nb(4,"br"),u.Sb(5,"label"),u.Ec(6),u.dc(7,"translate"),u.Rb(),u.Nb(8,"br"),u.Sb(9,"label"),u.Ec(10),u.dc(11,"translate"),u.Rb(),u.Nb(12,"br"),u.Cc(13,E,1,0,"p",30),u.Cc(14,j,1,0,"p",31),u.Cc(15,T,1,0,"p",32),u.Rb()}if(2&e){var i=u.cc().$implicit,o=u.cc().$implicit;u.Ab(2),u.Hc("T - ",o[i.field].totalAmount," ",u.ec(3,9,"rs"),""),u.Ab(4),u.Hc("R - ",o[i.field].receivedAmount," ",u.ec(7,11,"rs"),""),u.Ab(4),u.Hc("P - ",o[i.field].pendingAmount," ",u.ec(11,13,"rs"),""),u.Ab(3),u.jc("ngIf",0==o[i.field].pendingAmount),u.Ab(1),u.jc("ngIf",o[i.field].receivedAmount>0&&o[i.field].pendingAmount>0),u.Ab(1),u.jc("ngIf",0==o[i.field].receivedAmount)}}function L(e,t){1&e&&(u.Sb(0,"div",36),u.Sb(1,"label"),u.Ec(2,"----"),u.Rb(),u.Rb())}function F(e,t){if(1&e&&(u.Sb(0,"td"),u.Cc(1,_,9,5,"div",28),u.Cc(2,D,16,15,"div",28),u.Cc(3,L,3,0,"div",29),u.Rb()),2&e){var n=t.$implicit,i=u.cc().$implicit;u.Ab(1),u.jc("ngIf","vehicleInfo"==n.field&&i.vehicleInfo),u.Ab(1),u.jc("ngIf","vehicleInfo"!=n.field&&i[n.field]),u.Ab(1),u.jc("ngIf",!i[n.field])}}function B(e,t){if(1&e&&(u.Sb(0,"tr"),u.Cc(1,F,4,3,"td",24),u.Rb()),2&e){var n=t.columns;u.Ab(1),u.jc("ngForOf",n)}}var G=function(){return[5,10,15]};function U(e,t){if(1&e&&(u.Sb(0,"div"),u.Sb(1,"p-table",18),u.Cc(2,x,12,0,"ng-template",19),u.Cc(3,R,2,1,"ng-template",20),u.Cc(4,B,2,1,"ng-template",21),u.Rb(),u.Rb()),2&e){var n=u.cc();u.Ab(1),u.jc("columns",n.cols)("value",n.vehicleList)("alwaysShowPaginator",!0)("scrollable",!0)("paginator",!0)("rows",5)("showCurrentPageReport",!0)("rowsPerPageOptions",u.lc(8,G))}}var $,J,H=[{path:"",component:($=function(){function t(e,i,o,c,a,r,l,s){var u=this;n(this,t),this.router=e,this.util=i,this.loadingController=o,this.popoverController=c,this.messageService=a,this.location=r,this.translate=l,this.dbprovider=s,this.vehicleList=[],this.allvehicleList=[],this.cols=[],this.frozenCols=[],this.queryText="",this.appLanguage="ta",this.vehicleTableName="vehicle",this.accountTableName="account",this.vehicleContactAssignmentTablename="vehicleContactAssignment",this.billTable="billDetail",this.presentLoading(),this.appLanguage=this.translate.getDefaultLang();for(var b={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},d=new Date,h=d.getMonth()+1,p=Number(d.getFullYear().toString().substr(-2)),g=d.getFullYear(),m=0;m<=10;m++)if(10==m)this.cols.splice(0,0,{field:"vehicleInfo",header:"vehicleSearch.vehicleInfo"});else{0==h&&(h=12,p-=1,g-=1);var f={};f.month=h;var v=h--;f.field=b[v]+p,f.header=b[v]+" "+p,f.year=g,this.cols.push(f)}console.log(this.translate.getDefaultLang()),setTimeout(function(){u.fetchVehicle()},500)}return o(t,[{key:"ionViewDidEnter",value:function(){var e=this;console.log("ionViewDidEnter"),this.util.billGenerate&&(this.util.billGenerate=!1,setTimeout(function(){e.fetchVehicle()},500))}},{key:"backButtonOnclick",value:function(){this.location.back()}},{key:"billGeneration",value:function(){console.log("Generate bill"),this.router.navigate(["billGenerate"])}},{key:"search",value:function(e){console.log(e)}},{key:"searchByKeyword",value:function(){var t=this;console.log("search",this.queryText),this.vehicleList=[],this.queryText.length>0?this.allvehicleList.forEach(function(e){e.vehicleInfo.vehicleNumber.toLowerCase().includes(t.queryText.toLowerCase())&&t.vehicleList.push(e)}):this.vehicleList=e(this.allvehicleList)}},{key:"vehicleCellClick",value:function(e){console.log("vehicle",e),0==e.billAvailable?this.messageService.add({severity:"info",summary:"Account not available",detail:"Active account not available for this vehicle"}):this.router.navigate(["transactionHistory"],{queryParams:{vehicle:JSON.stringify(e),appLanguage:this.appLanguage}})}},{key:"amountCellClick",value:function(e,t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("amount",t),!(t.pendingAmount>0)){e.next=13;break}return e.next=3,this.popoverController.create({component:C,componentProps:{billdetail:t},translucent:!1,showBackdrop:!0,backdropDismiss:!1});case 3:return n=e.sent,e.next=6,n.present();case 6:return e.next=8,n.onDidDismiss();case 8:i=e.sent,o=i.role,console.log("onDidDismiss resolved with role",o),e.next=14;break;case 13:this.messageService.add({severity:"success",summary:this.translate.instant("vehicleSearch.alreadyPaid")+t.Month,detail:""});case 14:case"end":return e.stop()}},e,this)}))}},{key:"presentLoading",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"Please wait..."});case 2:this.loading=e.sent;case 3:case"end":return e.stop()}},e,this)}))}},{key:"fetchVehicle",value:function(){var t=this;this.loading.present(),this.vehicleList=[],this.allvehicleList=[],this.dbprovider.fetchDocsWithRelationshipUsingFindOption({selector:{"data.type":this.vehicleTableName}},!0,{childreference:["account"]}).then(function(n){"SUCCESS"==n.status&&n.records.length>0?n.records.forEach(function(n){var i={},o={};o.vehicleType=n.vehicleType,o.vehicleBrand=n.vehicleBrand,o.vehicleModel=n.vehicleModel,o.vehicleNumber=n.vehicleNumber,o.vehicleId=n.id,i.vehicleInfo=o,i.accounts=n.accounts;var c=[];c.push(t.fetchContact(i)),c.push(t.fetchBillDetail(i)),Promise.all(c).then(function(n){t.vehicleList.push(i),t.allvehicleList=e(t.vehicleList),t.loading.dismiss()})}):t.loading.dismiss()})}},{key:"fetchContact",value:function(e){this.dbprovider.fetchDocsWithRelationshipUsingFindOption({selector:{"data.type":this.vehicleContactAssignmentTablename,"data.vehicle_lookup":e.vehicleInfo.vehicleId}},!0,{masterandlookupreference:["contact"]}).then(function(t){var n={};"SUCCESS"==t.status&&t.records.length>0?(t.records.forEach(function(e){"owner"==e.contact_lookup.contactType&&(n.contactName=e.contact_lookup.contactName,n.contactNameInTamil=e.contact_lookup.contactNameInTamil)}),e.primaryContact=n):e.primaryContact={}}).catch(function(t){e.primaryContact={}})}},{key:"fetchBillDetail",value:function(e){var t,n=this,i=e.accounts;i.length>0?(i.forEach(function(e){null==e.closeDate&&(t=e)}),t?(e.activeAccountId=t.id,this.dbprovider.fetchDocsWithoutRelationshipByParentTypeAndId(this.billTable,this.accountTableName,t.id).then(function(t){console.log("bill",t),"SUCCESS"==t.status&&t.records.length>0&&n.cols.forEach(function(n){n.month&&t.records.forEach(function(t){t.billMonth==n.month&&t.billYear==n.year&&(e[n.field]=t)})}),console.log("fullVehicleInfo",e)}).catch(function(e){console.log(e)})):e.billAvailable=!1):(console.log("account length 0"),e.billAvailable=!1)}}]),t}(),$.\u0275fac=function(e){return new(e||$)(u.Mb(S.g),u.Mb(M.a),u.Mb(r.D),u.Mb(r.H),u.Mb(h.h),u.Mb(a.h),u.Mb(p.d),u.Mb(d.a))},$.\u0275cmp=u.Gb({type:$,selectors:[["vehicleSearch"]],decls:25,vars:8,consts:[["no-border","",1,"pm-header"],[1,"pm-toolbar"],["slot","start",1,"pm-clickaction"],[3,"click"],["name","arrow-back"],["size","large",1,"ion-text-center","pm-header-title"],[1,"pm-content"],[1,"pm-vn-header-search"],["lines","none","ion-fixed","",1,"pm-vn-h-ion-item"],["pInputText","","type","text",3,"ngModel","placeholder","ngModelChange","keyup.enter"],["pButton","","pRipple","","type","button","icon","pi pi-search",1,"p-button-rounded","p-button-success",3,"click"],[1,"pm-paidindicater"],[1,"pm-unPaid"],[1,"pm-Partial"],[1,"pm-Paid"],["slot","end",3,"click"],[4,"ngIf"],["position","center"],["paginatorPosition","top","sortMode","multiple","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-lg",3,"columns","value","alwaysShowPaginator","scrollable","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],[2,"width","200px"],[2,"width","150px"],[4,"ngFor","ngForOf"],[1,"p-d-flex","p-jc-between","p-ai-center"],["type","text","field","vehicleInfo.vehicleNumber","display","menu",4,"ngIf"],["type","text","field","vehicleInfo.vehicleNumber","display","menu"],[3,"click",4,"ngIf"],["style","text-align: left;",4,"ngIf"],["style","width: 100%; height: 10px; background-color: green; border-radius: 15px;",4,"ngIf"],["style","width: 100%; height: 10px; background-color: yellow; border-radius: 15px;",4,"ngIf"],["style","width: 100%; height: 10px; background-color: red; border-radius: 15px;",4,"ngIf"],[2,"width","100%","height","10px","background-color","green","border-radius","15px"],[2,"width","100%","height","10px","background-color","yellow","border-radius","15px"],[2,"width","100%","height","10px","background-color","red","border-radius","15px"],[2,"text-align","left"]],template:function(e,t){1&e&&(u.Sb(0,"ion-header",0),u.Sb(1,"ion-toolbar",1),u.Sb(2,"ion-buttons",2),u.Sb(3,"ion-button",3),u.ac("click",function(){return t.backButtonOnclick()}),u.Nb(4,"ion-icon",4),u.Rb(),u.Rb(),u.Sb(5,"ion-title",5),u.Ec(6),u.dc(7,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Sb(8,"ion-content",6),u.Sb(9,"div",7),u.Sb(10,"ion-item",8),u.Sb(11,"input",9),u.ac("ngModelChange",function(e){return t.queryText=e})("keyup.enter",function(){return t.searchByKeyword()}),u.dc(12,"translate"),u.Rb(),u.Sb(13,"button",10),u.ac("click",function(){return t.searchByKeyword()}),u.Rb(),u.Sb(14,"div",11),u.Sb(15,"span",12),u.Ec(16,"UnPaid"),u.Rb(),u.Sb(17,"span",13),u.Ec(18,"Partial"),u.Rb(),u.Sb(19,"span",14),u.Ec(20,"Paid"),u.Rb(),u.Rb(),u.Rb(),u.Sb(21,"ion-button",15),u.ac("click",function(){return t.billGeneration()}),u.Ec(22,"Bill Generate"),u.Rb(),u.Rb(),u.Cc(23,U,5,9,"div",16),u.Nb(24,"p-toast",17),u.Rb()),2&e&&(u.Ab(6),u.Gc(" ",u.ec(7,4,"vehicleSearch.title")," "),u.Ab(5),u.kc("placeholder",u.ec(12,6,"vehicleSearch.searchPlaceholder")),u.jc("ngModel",t.queryText),u.Ab(12),u.jc("ngIf",t.vehicleList.length>0))},directives:[r.n,r.A,r.e,r.d,r.o,r.z,r.k,r.q,l.a,P.a,l.i,l.l,g.b,m.a,a.l,k.a,A.c,h.j,a.k,A.a],pipes:[p.c],styles:['.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;align-items:center;width:50%;margin:auto;min-width:300px}.popover-content[_ngcontent-%COMP%]{opacity:inherit}.my-button[_ngcontent-%COMP%]{--background:#white;--background-activated:#white}.pm-vn-h-ion-item[_ngcontent-%COMP%]   .pm-paidindicater[_ngcontent-%COMP%]{color:#5d646d}.pm-vn-h-ion-item[_ngcontent-%COMP%]   .pm-paidindicater[_ngcontent-%COMP%]   .pm-unPaid[_ngcontent-%COMP%]{margin-left:10px;padding-left:10px;padding-right:20px;position:relative}.pm-vn-h-ion-item[_ngcontent-%COMP%]   .pm-paidindicater[_ngcontent-%COMP%]   .pm-unPaid[_ngcontent-%COMP%]:before{content:"";height:10px;width:10px;background-color:red;border-radius:50px;position:absolute;left:-4px;top:3px}.pm-vn-h-ion-item[_ngcontent-%COMP%]   .pm-paidindicater[_ngcontent-%COMP%]   .pm-Partial[_ngcontent-%COMP%]{padding-left:10px;padding-right:20px;position:relative}.pm-vn-h-ion-item[_ngcontent-%COMP%]   .pm-paidindicater[_ngcontent-%COMP%]   .pm-Partial[_ngcontent-%COMP%]:before{content:"";height:10px;width:10px;background-color:#ff0;border-radius:50px;position:absolute;left:-4px;top:3px}.pm-vn-h-ion-item[_ngcontent-%COMP%]   .pm-paidindicater[_ngcontent-%COMP%]   .pm-Paid[_ngcontent-%COMP%]{padding-left:10px;padding-right:20px;position:relative}.pm-vn-h-ion-item[_ngcontent-%COMP%]   .pm-paidindicater[_ngcontent-%COMP%]   .pm-Paid[_ngcontent-%COMP%]:before{content:"";height:10px;width:10px;background-color:green;border-radius:50px;position:absolute;left:-4px;top:3px}.pm-content[_ngcontent-%COMP%]   .pm-vn-header-search[_ngcontent-%COMP%]{display:inline-flex;justify-content:space-between;width:100%;padding:0 20px 0 0;align-items:center;background:#fff;height:60px;--background:#fff;border-bottom:2px solid #ececec}.pm-content[_ngcontent-%COMP%]   .pm-vn-header-search[_ngcontent-%COMP%]   .pm-vn-h-ion-item[_ngcontent-%COMP%]{width:unset;min-width:unset;--background:#fff}.pm-content[_ngcontent-%COMP%]   .pm-vn-header-search[_ngcontent-%COMP%]   .pm-vn-h-ion-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:200px;margin-left:3px}.pm-content[_ngcontent-%COMP%]   .pm-vn-header-search[_ngcontent-%COMP%]   .pm-vn-h-ion-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.pm-content[_ngcontent-%COMP%]   .p-datatable-scrollable-body[_ngcontent-%COMP%]{height:calc(100vh - 240px);background:#fff}']}),$)}],q=((J=function e(){n(this,e)}).\u0275mod=u.Kb({type:J}),J.\u0275inj=u.Jb({factory:function(e){return new(e||J)},imports:[[A.d,S.k.forChild(H),a.c,l.f,r.B,k.b,P.b,g.c,m.b,p.b],S.k]}),J)}}])}();