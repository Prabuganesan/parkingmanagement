(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"9u13":function(e,t,n){"use strict";n.r(t),n.d(t,"rentPlanListModule",function(){return E});var a=n("ofXK"),i=n("TEn/"),r=n("3Pt+"),o=n("fXoL"),s=n("tyNb"),l=n("27b0"),c=n("tp0D"),b=n("7zfz"),d=n("J7/z"),h=n("Gxio"),u=n("sYmb");let p=(()=>{class e{constructor(e,t,n,a,i,r,o){this.router=e,this.dbconfig=t,this.formBuilder=n,this.dbprovider=a,this.messageService=i,this.ref=r,this.config=o,this.rentPlanObj={},this.tableName="rentPlan",this.savedSuccessMessage="Data saved successfully","edit"==o.data.mode?this.rentPlanObj=JSON.parse(JSON.stringify(o.data.object)):this.initializeObjects(this.dbconfig.configuration.tableStructure),this.createFormGroup()}initializeObjects(e){this.rentPlanObj=JSON.parse(JSON.stringify(e[this.tableName])),this.rentPlanObj.vehicleType="car"}createFormGroup(){this.formGroup=this.formBuilder.group({rentplan:this.formBuilder.group({rentPlan:["",r.o.compose([r.o.maxLength(80),r.o.required])],rentAmount:["",r.o.compose([r.o.required])],vehicleType:["",r.o.compose([r.o.required])]})})}saveAction(){console.log(this.rentPlanObj),this.formGroup.patchValue({rentplan:{rentPlan:this.rentPlanObj.rentPlan,rentAmount:this.rentPlanObj.rentAmount,vehicleType:this.rentPlanObj.vehicleType}}),this.formGroup.valid?this.alreadyExistValidation().then(e=>{e?this.messageService.add({key:"rentplanEntry",severity:"error",summary:"Plan already exist",detail:"",closable:!0}):this.dbprovider.save(this.tableName,this.rentPlanObj).then(e=>{"SUCCESS"==e.status?(this.messageService.add({key:"rentplanEntry",severity:"success",summary:this.savedSuccessMessage,detail:""}),setTimeout(()=>this.ref.close("SUCCESS"),1e3)):this.messageService.add({key:"rentplanEntry",severity:"error",summary:e.message,detail:"",closable:!0})}).catch(e=>{console.log(e),this.messageService.add({key:"rentplanEntry",severity:"error",summary:e,detail:""})})}):this.messageService.add({key:"rentplanEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}alreadyExistValidation(){var e=!1;return"edit"==this.config.data.mode&&this.rentPlanObj.rentPlan==this.config.data.object.rentPlan?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.rentPlan":this.rentPlanObj.rentPlan,"data.type":this.tableName},sort:["data.rentPlan"]}).then(t=>("SUCCESS"==t.status&&t.records.length>0&&(e=!0),e))}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(s.g),o.Mb(l.a),o.Mb(r.b),o.Mb(c.a),o.Mb(b.h),o.Mb(d.d),o.Mb(d.b))},e.\u0275cmp=o.Gb({type:e,selectors:[["rentPlanEntry"]],decls:37,vars:25,consts:[[2,"height","300px"],[2,"height","100%",3,"formGroup"],["lines","full","formGroupName","rentplan"],["position","floating"],["type","text","formControlName","rentPlan","required","",3,"ngModel","ngModelChange"],["type","number","formControlName","rentAmount",3,"ngModel","ngModelChange"],["value","car","mode","md","formControlName","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["value","car"],["value","auto"],["value","others"],["type","submit","color","danger","expand","block",3,"click"],["key","rentplanEntry","position","center"]],template:function(e,t){1&e&&(o.Sb(0,"ion-content",0),o.Sb(1,"form",1),o.Sb(2,"ion-item",2),o.Sb(3,"ion-label",3),o.Ec(4),o.dc(5,"translate"),o.Rb(),o.Sb(6,"ion-input",4),o.ac("ngModelChange",function(e){return t.rentPlanObj.rentPlan=e}),o.Rb(),o.Rb(),o.Sb(7,"ion-item",2),o.Sb(8,"ion-label",3),o.Ec(9),o.dc(10,"translate"),o.Rb(),o.Sb(11,"ion-input",5),o.ac("ngModelChange",function(e){return t.rentPlanObj.rentAmount=e}),o.Rb(),o.Rb(),o.Sb(12,"ion-item",2),o.Sb(13,"ion-radio-group",6),o.ac("ngModelChange",function(e){return t.rentPlanObj.vehicleType=e}),o.Sb(14,"ion-label"),o.Ec(15),o.dc(16,"translate"),o.Rb(),o.Sb(17,"ion-item"),o.Nb(18,"ion-radio",7),o.Sb(19,"ion-label"),o.Ec(20),o.dc(21,"translate"),o.Rb(),o.Sb(22,"ion-radio",8),o.Ec(23,"Test"),o.Rb(),o.Sb(24,"ion-label"),o.Ec(25),o.dc(26,"translate"),o.Rb(),o.Nb(27,"ion-radio",9),o.Sb(28,"ion-label"),o.Ec(29),o.dc(30,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(31,"ion-row"),o.Sb(32,"ion-col"),o.Sb(33,"ion-button",10),o.ac("click",function(){return t.saveAction()}),o.Ec(34),o.dc(35,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Nb(36,"p-toast",11),o.Rb()),2&e&&(o.Ab(1),o.jc("formGroup",t.formGroup),o.Ab(3),o.Gc("",o.ec(5,11,"rentPlanEntry.rentPlanName")," "),o.Ab(2),o.jc("ngModel",t.rentPlanObj.rentPlan),o.Ab(3),o.Fc(o.ec(10,13,"rentPlanEntry.rentAmount")),o.Ab(2),o.jc("ngModel",t.rentPlanObj.rentAmount),o.Ab(2),o.jc("ngModel",t.rentPlanObj.vehicleType),o.Ab(2),o.Fc(o.ec(16,15,"rentPlanEntry.rentplanType")),o.Ab(5),o.Fc(o.ec(21,17,"rentPlanEntry.car")),o.Ab(5),o.Fc(o.ec(26,19,"rentPlanEntry.auto")),o.Ab(4),o.Fc(o.ec(30,21,"rentPlanEntry.others")),o.Ab(5),o.Fc(o.ec(35,23,"save")))},directives:[i.k,r.p,r.j,r.d,i.q,r.e,i.r,i.p,i.J,r.i,r.c,r.n,i.E,i.u,i.I,i.t,i.H,i.w,i.j,i.d,h.a],pipes:[u.c],styles:[""]}),e})();var m=n("8CEF");function S(e,t){if(1&e){const e=o.Tb();o.Sb(0,"div",13),o.ac("click",function(){o.wc(e);const n=t.$implicit;return o.cc().editaction(n)}),o.Sb(1,"div",14),o.Sb(2,"div",15),o.Nb(3,"i",16),o.Rb(),o.Sb(4,"div",15),o.Sb(5,"h2"),o.Ec(6),o.Rb(),o.Sb(7,"h3"),o.Ec(8),o.dc(9,"translate"),o.Rb(),o.Sb(10,"ion-label"),o.Ec(11),o.Rb(),o.Rb(),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit;o.Ab(6),o.Gc(" ",e.rentPlan," "),o.Ab(2),o.Hc(" ",e.rentAmount," ",o.ec(9,4,"rs")," "),o.Ab(3),o.Gc(" ",e.vehicleType," ")}}let g=(()=>{class e{constructor(e,t,n,a,i,r){this.router=e,this.dialogService=t,this.messageService=n,this.location=a,this.translate=i,this.dbprovider=r,this.rentplans=[],this.tableName="rentPlan",this.fetchData()}fetchData(){this.dbprovider.fetchDocsWithoutRelationshipByType(this.tableName).then(e=>{e&&"SUCCESS"==e.status?(console.log(e),this.rentplans=e.records):this.messageService.add({key:"rentPlanList",severity:"error",summary:e.message,detail:""})})}backButtonOnclick(){this.location.back()}planAddClick(){console.log("user add"),this.dialogService.open(p,{header:this.translate.instant("rentPlanEntry.title"),width:"40%",data:{object:"",mode:"new"}}).onClose.subscribe(e=>{e&&"SUCCESS"==e&&this.fetchData()})}editaction(e){console.log("edit",e),this.dialogService.open(p,{header:this.translate.instant("rentPlanEntry.title"),width:"40%",data:{object:e,mode:"edit"}}).onClose.subscribe(e=>{e&&"SUCCESS"==e&&this.fetchData()})}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(s.g),o.Mb(d.a),o.Mb(b.h),o.Mb(a.h),o.Mb(u.d),o.Mb(c.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["rentPlanList"]],decls:19,vars:4,consts:[["no-border",""],["slot","start"],["slot","start",3,"click"],["name","arrow-back",2,"font-size","30px","color","black"],["slot","end"],["slot","end",3,"click"],["name","add",2,"font-size","30px","color","black"],["size","large",1,"ion-text-center"],[2,"padding","20px"],["layout","grid",3,"value"],["dv",""],["pTemplate","gridItem"],["key","rentPlanList","position","center"],[1,"p-col-12","p-md-4",2,"padding","5px",3,"click"],[1,"p-shadow-5"],[2,"padding","13px"],[1,"pi","pi-money-bill",2,"font-size","4rem"]],template:function(e,t){1&e&&(o.Sb(0,"ion-header",0),o.Sb(1,"ion-toolbar"),o.Sb(2,"ion-buttons",1),o.Sb(3,"ion-button",2),o.ac("click",function(){return t.backButtonOnclick()}),o.Sb(4,"h2"),o.Nb(5,"ion-icon",3),o.Rb(),o.Rb(),o.Rb(),o.Sb(6,"ion-buttons",4),o.Sb(7,"ion-button",5),o.ac("click",function(){return t.planAddClick()}),o.Sb(8,"h2"),o.Nb(9,"ion-icon",6),o.Rb(),o.Rb(),o.Rb(),o.Sb(10,"ion-title",7),o.Ec(11),o.dc(12,"translate"),o.Rb(),o.Rb(),o.Rb(),o.Sb(13,"ion-content"),o.Sb(14,"div",8),o.Sb(15,"p-dataView",9,10),o.Cc(17,S,12,6,"ng-template",11),o.Rb(),o.Rb(),o.Nb(18,"p-toast",12),o.Rb()),2&e&&(o.Ab(11),o.Gc(" ",o.ec(12,2,"rentPlanList.title")," "),o.Ab(4),o.jc("value",t.rentplans))},directives:[i.n,i.A,i.e,i.d,i.o,i.z,i.k,m.a,b.j,h.a,i.r],pipes:[u.c],styles:[""]}),e})();var y=n("7kUa"),f=n("jIHw"),v=n("Q4Mo"),P=n("1SLH");const R=[{path:"",component:g}];let E=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[s.k.forChild(R),a.c,r.f,i.B,y.b,f.c,v.b,P.b,m.b,d.c,u.b,h.b],s.k]}),e})()}}]);