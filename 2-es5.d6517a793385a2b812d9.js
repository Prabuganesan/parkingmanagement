!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var c=0;c<t.length;c++){var i=t[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,c,i){return c&&t(e.prototype,c),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0Eai":function(t,i,n){"use strict";n.d(i,"a",function(){return O});var a=n("mrSG"),o=n("fXoL"),l=n("J7/z"),r=n("TEn/"),s=n("7zfz"),b=n("tp0D"),u=n("ofXK"),h=n("Gxio"),d=n("sYmb");function m(e,t){if(1&e&&(o.Rb(0,"ion-item",5),o.Rb(1,"ion-label"),o.Rb(2,"h2"),o.Dc(3),o.cc(4,"translate"),o.Rb(5,"b"),o.Dc(6),o.cc(7,"date"),o.Qb(),o.Qb(),o.Rb(8,"h2"),o.Dc(9),o.cc(10,"translate"),o.Rb(11,"b"),o.Dc(12),o.cc(13,"date"),o.Qb(),o.Qb(),o.Rb(14,"h2"),o.Dc(15),o.cc(16,"translate"),o.Rb(17,"b"),o.Dc(18),o.cc(19,"translate"),o.Qb(),o.Qb(),o.Rb(20,"h2"),o.Dc(21),o.cc(22,"translate"),o.Rb(23,"b"),o.Dc(24),o.cc(25,"translate"),o.Qb(),o.Qb(),o.Rb(26,"h2"),o.Dc(27),o.cc(28,"translate"),o.Rb(29,"b"),o.Dc(30),o.cc(31,"translate"),o.Qb(),o.Qb(),o.Rb(32,"h2"),o.Dc(33),o.cc(34,"translate"),o.Rb(35,"b"),o.Dc(36),o.Qb(),o.Qb(),o.Rb(37,"p"),o.Dc(38),o.cc(39,"translate"),o.Qb(),o.Qb(),o.Qb()),2&e){var c=t.$implicit;o.Ab(3),o.Fc("",o.dc(4,17,"accountDetail.accOpenDate")," :"),o.Ab(3),o.Fc(" ",o.ec(7,19,c.openDate,"dd/MM/yyyy hh:mm a"),""),o.Ab(3),o.Fc("",o.dc(10,22,"accountDetail.accCloseDate")," :"),o.Ab(3),o.Fc(" ",o.ec(13,24,c.closeDate,"dd/MM/yyyy hh:mm a"),""),o.Ab(3),o.Fc("",o.dc(16,27,"accountDetail.totalAmount")," :"),o.Ab(3),o.Gc(" ",c.totalBillAmount," ",o.dc(19,29,"rs"),""),o.Ab(3),o.Fc("",o.dc(22,31,"accountDetail.amountReceived")," :"),o.Ab(3),o.Gc(" ",c.receivedAmount," ",o.dc(25,33,"rs"),""),o.Ab(3),o.Fc("",o.dc(28,35,"accountDetail.pendingAmount")," :"),o.Ab(3),o.Gc(" ",c.pendingAmount," ",o.dc(31,37,"rs"),""),o.Ab(3),o.Fc("",o.dc(34,39,"accountDetail.rentPlan")," :"),o.Ab(3),o.Fc(" ",c.rentPlan_lookup.rentPlan,""),o.Ab(2),o.Gc("",o.dc(39,41,"accountDetail.accAddBy")," : ",c.accountAddedBy,"")}}var v,f=((v=function(){function t(c,i,n,a,o){e(this,t),this.dialogService=c,this.config=i,this.popoverController=n,this.messageService=a,this.dbprovider=o,this.tableName="account",this.vehicleTableName="vehicle",this.accountList=[],this.selectedVehicle=JSON.parse(JSON.stringify(i.data.vehicle)),this.fetchAccounts()}return c(t,[{key:"fetchAccounts",value:function(){var e=this;this.dbprovider.fetchChildDocsWithRelationshipByParentTypeAndId(this.tableName,this.vehicleTableName,this.selectedVehicle.id,!0,{masterandlookupreference:["rentPlan"]}).then(function(t){console.log(t),t&&"SUCCESS"==t.status?e.accountList=t.records:e.messageService.add({key:"accountHistory",severity:"error",summary:t.message,detail:""})})}}]),t}()).\u0275fac=function(e){return new(e||v)(o.Lb(l.a),o.Lb(l.b),o.Lb(r.H),o.Lb(s.h),o.Lb(b.a))},v.\u0275cmp=o.Fb({type:v,selectors:[["accountHistory"]],decls:6,vars:2,consts:[[2,"height","400px"],["size","large",1,"ion-text-center"],[2,"width","100%"],["lines","full",4,"ngFor","ngForOf"],["key","accountHistory","position","center"],["lines","full"]],template:function(e,t){1&e&&(o.Rb(0,"ion-content",0),o.Rb(1,"ion-title",1),o.Dc(2),o.Qb(),o.Rb(3,"ion-list",2),o.Bc(4,m,40,43,"ion-item",3),o.Qb(),o.Mb(5,"p-toast",4),o.Qb()),2&e&&(o.Ab(2),o.Fc(" ",t.selectedVehicle.vehicleBrand+" "+t.selectedVehicle.vehicleModel+" "+t.selectedVehicle.vehicleNumber," "),o.Ab(2),o.ic("ngForOf",t.accountList))},directives:[r.l,r.A,r.t,u.j,h.a,r.r,r.s],pipes:[d.c,u.d],styles:[""]}),v),g=n("mouh"),p=n("tyNb"),y=n("Nf9I"),R=n("jIHw");function A(e,t){if(1&e&&(o.Rb(0,"ion-title",8),o.Dc(1),o.Qb()),2&e){var c=o.bc();o.Ab(1),o.Fc(" ",c.selectedVehicle.vehicleBrand+" "+c.selectedVehicle.vehicleModel+" "+c.selectedVehicle.vehicleNumber," ")}}function N(e,t){if(1&e&&(o.Rb(0,"div"),o.Rb(1,"ion-item",9),o.Rb(2,"ion-label"),o.Dc(3),o.cc(4,"translate"),o.Qb(),o.Rb(5,"h5"),o.Dc(6),o.Qb(),o.Qb(),o.Rb(7,"ion-item",9),o.Rb(8,"ion-label"),o.Dc(9),o.cc(10,"translate"),o.Qb(),o.Rb(11,"h5"),o.Dc(12),o.cc(13,"translate"),o.Qb(),o.Qb(),o.Rb(14,"ion-item",9),o.Rb(15,"ion-label"),o.Dc(16),o.cc(17,"translate"),o.Qb(),o.Rb(18,"h5"),o.Dc(19),o.cc(20,"translate"),o.Qb(),o.Qb(),o.Rb(21,"ion-item",9),o.Rb(22,"ion-label"),o.Dc(23),o.cc(24,"translate"),o.Qb(),o.Rb(25,"h5"),o.Dc(26),o.cc(27,"translate"),o.Qb(),o.Qb(),o.Rb(28,"ion-item",9),o.Rb(29,"ion-label"),o.Dc(30),o.cc(31,"translate"),o.Qb(),o.Rb(32,"h5"),o.Dc(33),o.cc(34,"date"),o.Qb(),o.Qb(),o.Rb(35,"ion-item",9),o.Rb(36,"ion-label"),o.Dc(37),o.cc(38,"translate"),o.Qb(),o.Rb(39,"h5"),o.Dc(40),o.cc(41,"date"),o.Qb(),o.Qb(),o.Rb(42,"ion-item",9),o.Rb(43,"ion-label"),o.Dc(44),o.cc(45,"translate"),o.Qb(),o.Rb(46,"h5"),o.Dc(47,"Security 1"),o.Qb(),o.Qb(),o.Qb()),2&e){var c=o.bc();o.Ab(3),o.Ec(o.dc(4,16,"accountDetail.rentPlan")),o.Ab(3),o.Ec(c.selectedAccount.rentPlan_lookup.rentPlan),o.Ab(3),o.Ec(o.dc(10,18,"accountDetail.totalAmount")),o.Ab(3),o.Gc("",c.selectedAccount.totalBillAmount," ",o.dc(13,20,"rs"),""),o.Ab(4),o.Ec(o.dc(17,22,"accountDetail.amountReceived")),o.Ab(3),o.Gc("",c.selectedAccount.receivedAmount," ",o.dc(20,24,"rs"),""),o.Ab(4),o.Ec(o.dc(24,26,"accountDetail.pendingAmount")),o.Ab(3),o.Gc("",c.selectedAccount.totalBillAmount-c.selectedAccount.receivedAmount," ",o.dc(27,28,"rs"),""),o.Ab(4),o.Ec(o.dc(31,30,"accountDetail.accOpenDate")),o.Ab(3),o.Ec(o.ec(34,32,c.selectedAccount.openDate,"dd/MM/yyyy hh:mm a")),o.Ab(4),o.Ec(o.dc(38,35,"accountDetail.accCloseDate")),o.Ab(3),o.Ec(o.ec(41,37,c.selectedAccount.closeDate,"dd/MM/yyyy hh:mm a")),o.Ab(4),o.Ec(o.dc(45,40,"accountDetail.accAddBy"))}}function Q(e,t){1&e&&(o.Rb(0,"div"),o.Mb(1,"br"),o.Mb(2,"div"),o.Rb(3,"div",5),o.Rb(4,"ion-label"),o.Dc(5,"Active account not available. Create new account."),o.Qb(),o.Qb(),o.Qb())}function S(e,t){if(1&e){var c=o.Sb();o.Rb(0,"span",10),o.Rb(1,"button",11),o.Zb("click",function(){return o.vc(c),o.bc().createAccount()}),o.Qb(),o.Qb()}}function M(e,t){if(1&e){var c=o.Sb();o.Rb(0,"span",12),o.Rb(1,"button",13),o.Zb("click",function(){return o.vc(c),o.bc().closeAccount()}),o.Qb(),o.Rb(2,"button",14),o.Zb("click",function(){return o.vc(c),o.bc().accountHistory()}),o.cc(3,"translate"),o.Qb(),o.Qb()}2&e&&(o.Ab(2),o.jc("label",o.dc(3,1,"history")))}function C(e,t){if(1&e){var c=o.Sb();o.Rb(0,"span",12),o.Rb(1,"button",15),o.Zb("click",function(){return o.vc(c),o.bc().createAccount()}),o.Qb(),o.Rb(2,"button",14),o.Zb("click",function(){return o.vc(c),o.bc().accountHistory()}),o.cc(3,"translate"),o.Qb(),o.Qb()}2&e&&(o.Ab(2),o.jc("label",o.dc(3,1,"history")))}var D,O=((D=function(){function t(c,i,n,a,o,l,r,s){e(this,t),this.confirmationService=c,this.router=i,this.popoverController=n,this.translate=a,this.dialogService=o,this.messageService=l,this.dbprovider=r,this.config=s,this.tableName="account",this.vehicleTableName="vehicle",this.savedSuccessMessage="Account closed sucessfully",this.accountList=[],this.selectedVehicle=JSON.parse(JSON.stringify(s.data.vehicle)),this.fetchAccounts()}return c(t,[{key:"accountHistory",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("history"),this.dialogService.open(f,{header:this.translate.instant("accountHistory.title"),width:"50%",data:{vehicle:this.selectedVehicle}});case 1:case"end":return e.stop()}},e,this)}))}},{key:"createAccount",value:function(){var e=this;console.log("account creation"),this.dialogService.open(g.a,{header:this.translate.instant("accountCreation.title"),width:"50%",data:{vehicle:this.selectedVehicle}}).onClose.subscribe(function(t){t&&"SUCCESS"==t&&e.fetchAccounts()})}},{key:"closeAccount",value:function(){var e=this;console.log("close call"),this.confirmationService.confirm({message:"Are you sure that you want to close this account?",accept:function(){e.selectedAccount.closeDate=(new Date).getTime(),e.dbprovider.save(e.tableName,e.selectedAccount).then(function(t){"SUCCESS"==t.status?(e.messageService.add({key:"accountDetail",severity:"success",summary:e.savedSuccessMessage,detail:""}),e.fetchAccounts()):e.messageService.add({key:"accountDetail",severity:"error",summary:t.message,detail:"",closable:!0})}).catch(function(e){console.log(e)})}})}},{key:"fetchAccounts",value:function(){var e=this;this.selectedAccount=null,this.dbprovider.fetchChildDocsWithRelationshipByParentTypeAndId(this.tableName,this.vehicleTableName,this.selectedVehicle.id,!0,{masterandlookupreference:["rentPlan"]}).then(function(t){console.log(t),t&&"SUCCESS"==t.status?(t.records.length>0&&t.records.forEach(function(t){t.closeDate||(e.selectedAccount=t)}),e.accountList=t.records):e.messageService.add({key:"accountDetail",severity:"error",summary:t.message,detail:""})})}}]),t}()).\u0275fac=function(e){return new(e||D)(o.Lb(s.b),o.Lb(p.g),o.Lb(r.H),o.Lb(d.d),o.Lb(l.a),o.Lb(s.h),o.Lb(b.a),o.Lb(l.b))},D.\u0275cmp=o.Fb({type:D,selectors:[["accountDetail"]],decls:10,vars:6,consts:[[2,"height","400px"],["size","large","class","ion-text-center",4,"ngIf"],[4,"ngIf"],["key","accountDetail","position","center"],["header","Confirmation","icon","pi pi-exclamation-triangle"],[2,"text-align","center"],["class","p-buttonset","style","text-align: center;",4,"ngIf"],["class","p-buttonset",4,"ngIf"],["size","large",1,"ion-text-center"],["lines","full"],[1,"p-buttonset",2,"text-align","center"],["pButton","","type","button","label","Create New account","icon","pi pi-plus",3,"click"],[1,"p-buttonset"],["pButton","","type","button","label","Close account","icon","pi pi-times-circle",2,"float","left",3,"click"],["pButton","","type","button","icon","pi pi-clock",2,"float","right",3,"label","click"],["pButton","","type","button","label","Create New account","icon","pi pi-plus",2,"float","left",3,"click"]],template:function(e,t){1&e&&(o.Rb(0,"ion-content",0),o.Bc(1,A,2,1,"ion-title",1),o.Bc(2,N,48,42,"div",2),o.Bc(3,Q,6,0,"div",2),o.Mb(4,"p-toast",3),o.Mb(5,"p-confirmDialog",4),o.Qb(),o.Rb(6,"ion-footer",5),o.Bc(7,S,2,0,"span",6),o.Bc(8,M,4,3,"span",7),o.Bc(9,C,4,3,"span",7),o.Qb()),2&e&&(o.Ab(1),o.ic("ngIf",t.selectedVehicle),o.Ab(1),o.ic("ngIf",t.selectedAccount),o.Ab(1),o.ic("ngIf",!t.selectedAccount),o.Ab(4),o.ic("ngIf",!t.selectedAccount&&0==t.accountList.length),o.Ab(1),o.ic("ngIf",t.selectedAccount&&t.accountList.length>0),o.Ab(1),o.ic("ngIf",!t.selectedAccount&&t.accountList.length>0))},directives:[r.l,u.k,h.a,y.a,r.m,r.A,r.r,r.s,R.b],pipes:[d.c,u.d],styles:["ion-footer.footer-md[_ngcontent-%COMP%]:before{background-image:none}"]}),D)},VqLa:function(t,i,n){"use strict";n.d(i,"a",function(){return d});var a=n("fXoL"),o=n("tyNb"),l=n("sYmb"),r=n("TEn/"),s=n("ofXK");function b(e,t){if(1&e&&(a.Rb(0,"h2"),a.Dc(1),a.Qb()),2&e){var c=a.bc().$implicit;a.Ab(1),a.Ec(c.contactName)}}function u(e,t){if(1&e&&(a.Rb(0,"h2"),a.Dc(1),a.Qb()),2&e){var c=a.bc().$implicit;a.Ab(1),a.Ec(c.contactNameInTamil)}}function h(e,t){if(1&e){var c=a.Sb();a.Rb(0,"ion-item",3),a.Zb("click",function(e){a.vc(c);var i=t.$implicit;return a.bc().itemSelect(i),e.stopPropagation()}),a.Rb(1,"ion-avatar",4),a.Mb(2,"ion-icon",5),a.Qb(),a.Rb(3,"ion-label"),a.Bc(4,b,2,1,"h2",6),a.Bc(5,u,2,1,"h2",6),a.Rb(6,"h3"),a.Dc(7),a.Qb(),a.Rb(8,"p"),a.Dc(9),a.Qb(),a.Rb(10,"p"),a.Dc(11),a.Qb(),a.Qb(),a.Qb()}if(2&e){var i=t.$implicit,n=a.bc();a.Ab(4),a.ic("ngIf",n.appLanguage&&"en"==n.appLanguage),a.Ab(1),a.ic("ngIf",n.appLanguage&&"ta"==n.appLanguage),a.Ab(2),a.Ec(i.contactMobile),a.Ab(2),a.Fc("DL : ",i.licenseNumber,""),a.Ab(2),a.Fc("Added By : ",i.securityName,"")}}var d=function(){var t=function(){function t(c,i){e(this,t),this.router=c,this.translate=i,this.contactList=[],this.appLanguage="ta",this.appLanguage=this.translate.getDefaultLang(),this.contactList=[{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",licenseNumber:"TN6958484848574",securityName:"Security1",selected:1},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",licenseNumber:"TN6958484848574",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",licenseNumber:"TN6958484848574",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",licenseNumber:"TN6958484848574",securityName:"Security1",selected:0},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",licenseNumber:"TN6958484848574",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",licenseNumber:"TN6958484848574",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",licenseNumber:"TN6958484848574",securityName:"Security1",selected:0}]}return c(t,[{key:"itemSelect",value:function(e){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Lb(o.g),a.Lb(l.d))},t.\u0275cmp=a.Fb({type:t,selectors:[["contactListAgainstCar"]],decls:11,vars:4,consts:[["size","large",1,"ion-text-center"],[2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],["name","person-circle-outline",2,"font-size","50px"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Rb(0,"ion-header"),a.Rb(1,"ion-toolbar"),a.Rb(2,"ion-title",0),a.Dc(3),a.cc(4,"translate"),a.Qb(),a.Qb(),a.Qb(),a.Rb(5,"ion-content"),a.Rb(6,"ion-title",0),a.Dc(7," Tata Tiago - TN 69 AB1234 "),a.Qb(),a.Rb(8,"ion-row"),a.Rb(9,"ion-list",1),a.Bc(10,h,12,5,"ion-item",2),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.Ab(3),a.Fc(" ",a.dc(4,2,"contactList.title")," "),a.Ab(7),a.ic("ngForOf",t.contactList))},directives:[r.o,r.B,r.A,r.l,r.x,r.t,s.j,r.r,r.c,r.p,r.s,s.k],pipes:[l.c],styles:[""]}),t}()},XqSU:function(t,i,n){"use strict";n.d(i,"a",function(){return S});var a,o=n("mrSG"),l=n("3Pt+"),r=n("fXoL"),s=n("tyNb"),b=n("27b0"),u=n("tp0D"),h=n("7zfz"),d=n("J7/z"),m=n("TEn/"),v=n("Gxio"),f=n("sYmb"),g=((a=function(){function t(c,i,n,a,o,l,r){e(this,t),this.router=c,this.dbconfig=i,this.formBuilder=n,this.dbprovider=a,this.messageService=o,this.ref=l,this.config=r,this.alternateVehicleObj={},this.vehicleObj={},this.contactId="",this.vehicleId="",this.tableName="alternateVehicle",this.savedSuccessMessage="Data saved sucessfully",this.vehicleObj=JSON.parse(JSON.stringify(r.data.vehicle)),"edit"==r.data.mode?this.alternateVehicleObj=JSON.parse(JSON.stringify(r.data.object)):this.initializeObjects(this.dbconfig.configuration.tableStructure),this.createFormGroup(),this.contactId=this.config.data.contactId}return c(t,[{key:"initializeObjects",value:function(e){this.alternateVehicleObj=JSON.parse(JSON.stringify(e[this.tableName])),this.alternateVehicleObj.vehicleType="bike"}},{key:"createFormGroup",value:function(){this.formGroup=this.formBuilder.group({vehicle:this.formBuilder.group({vehicleType:["",l.o.compose([l.o.required])],vehicleBrand:[""],vehicleModel:[""],vehicleColor:[""],vehicleNumber:["",l.o.compose([l.o.required])]})})}},{key:"saveAction",value:function(){var e=this;console.log(this.alternateVehicleObj),this.formGroup.patchValue({vehicle:{vehicleType:this.alternateVehicleObj.vehicleType,vehicleBrand:this.alternateVehicleObj.vehicleBrand,vehicleModel:this.alternateVehicleObj.vehicleModel,vehicleColor:this.alternateVehicleObj.vehicleColor,vehicleNumber:this.alternateVehicleObj.vehicleNumber.toUpperCase()}}),this.alternateVehicleObj.vehicle=this.vehicleObj.id,this.formGroup.valid?this.alreadyExistValidation().then(function(t){t?e.messageService.add({key:"alternateVehicleEntry",severity:"error",summary:"Vehicle number already exist",detail:"",closable:!0}):e.dbprovider.save(e.tableName,e.alternateVehicleObj).then(function(t){"SUCCESS"==t.status?(e.messageService.add({key:"alternateVehicleEntry",severity:"success",summary:e.savedSuccessMessage,detail:""}),e.vehicleId=t.id,setTimeout(function(){return e.ref.close("SUCCESS")},1e3)):e.messageService.add({key:"alternateVehicleEntry",severity:"error",summary:t.message,detail:"",closable:!0})}).catch(function(t){console.log(t),e.messageService.add({key:"alternateVehicleEntry",severity:"error",summary:t,detail:""})})}):this.messageService.add({key:"alternateVehicleEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}},{key:"alreadyExistValidation",value:function(){var e=!1;return"edit"==this.config.data.mode&&this.alternateVehicleObj.vehicleNumber.toUpperCase()==this.config.data.object.vehicleNumber.toUpperCase()?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.vehicleNumber":this.alternateVehicleObj.vehicleNumber.toUpperCase(),"data.type":this.tableName},sort:["data.vehicleNumber"]}).then(function(t){return"SUCCESS"==t.status&&t.records.length>0&&(e=!0),e})}}]),t}()).\u0275fac=function(e){return new(e||a)(r.Lb(s.g),r.Lb(b.a),r.Lb(l.b),r.Lb(u.a),r.Lb(h.h),r.Lb(d.d),r.Lb(d.b))},a.\u0275cmp=r.Fb({type:a,selectors:[["alternateVehicleEntry"]],decls:50,vars:36,consts:[[2,"height","400px"],[2,"height","100%",3,"formGroup"],["lines","full","formGroupName","vehicle"],["value","bike","mode","md","formControlName","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["value","bike"],["value","car"],["value","auto"],["value","others"],["position","floating"],["type","text","formControlName","vehicleBrand",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleModel",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleColor",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleNumber","required","",3,"ngModel","ngModelChange"],["type","submit","color","danger","expand","block",3,"click"],["key","alternateVehicleEntry","position","center"]],template:function(e,t){1&e&&(r.Rb(0,"ion-content",0),r.Rb(1,"form",1),r.Rb(2,"ion-item",2),r.Rb(3,"ion-radio-group",3),r.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleType=e}),r.Rb(4,"ion-label"),r.Dc(5),r.cc(6,"translate"),r.Qb(),r.Rb(7,"ion-item"),r.Mb(8,"ion-radio",4),r.Rb(9,"ion-label"),r.Dc(10),r.cc(11,"translate"),r.Qb(),r.Mb(12,"ion-radio",5),r.Rb(13,"ion-label"),r.Dc(14),r.cc(15,"translate"),r.Qb(),r.Mb(16,"ion-radio",6),r.Rb(17,"ion-label"),r.Dc(18),r.cc(19,"translate"),r.Qb(),r.Mb(20,"ion-radio",7),r.Rb(21,"ion-label"),r.Dc(22),r.cc(23,"translate"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(24,"ion-item",2),r.Rb(25,"ion-label",8),r.Dc(26),r.cc(27,"translate"),r.Qb(),r.Rb(28,"ion-input",9),r.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleBrand=e}),r.Qb(),r.Qb(),r.Rb(29,"ion-item",2),r.Rb(30,"ion-label",8),r.Dc(31),r.cc(32,"translate"),r.Qb(),r.Rb(33,"ion-input",10),r.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleModel=e}),r.Qb(),r.Qb(),r.Rb(34,"ion-item",2),r.Rb(35,"ion-label",8),r.Dc(36),r.cc(37,"translate"),r.Qb(),r.Rb(38,"ion-input",11),r.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleColor=e}),r.Qb(),r.Qb(),r.Rb(39,"ion-item",2),r.Rb(40,"ion-label",8),r.Dc(41),r.cc(42,"translate"),r.Qb(),r.Rb(43,"ion-input",12),r.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleNumber=e}),r.Qb(),r.Qb(),r.Rb(44,"ion-row"),r.Rb(45,"ion-col"),r.Rb(46,"ion-button",13),r.Zb("click",function(){return t.saveAction()}),r.Dc(47),r.cc(48,"translate"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Mb(49,"p-toast",14),r.Qb()),2&e&&(r.Ab(1),r.ic("formGroup",t.formGroup),r.Ab(2),r.ic("ngModel",t.alternateVehicleObj.vehicleType),r.Ab(2),r.Ec(r.dc(6,16,"vehicleEntry.vehicleType")),r.Ab(5),r.Ec(r.dc(11,18,"vehicleEntry.bike")),r.Ab(4),r.Ec(r.dc(15,20,"vehicleEntry.car")),r.Ab(4),r.Ec(r.dc(19,22,"vehicleEntry.auto")),r.Ab(4),r.Ec(r.dc(23,24,"vehicleEntry.others")),r.Ab(4),r.Fc("",r.dc(27,26,"vehicleEntry.vehicleBrand")," "),r.Ab(2),r.ic("ngModel",t.alternateVehicleObj.vehicleBrand),r.Ab(3),r.Ec(r.dc(32,28,"vehicleEntry.vehicleModel")),r.Ab(2),r.ic("ngModel",t.alternateVehicleObj.vehicleModel),r.Ab(3),r.Ec(r.dc(37,30,"vehicleEntry.vehicleColor")),r.Ab(2),r.ic("ngModel",t.alternateVehicleObj.vehicleColor),r.Ab(3),r.Ec(r.dc(42,32,"vehicleEntry.vehicleNumber")),r.Ab(2),r.ic("ngModel",t.alternateVehicleObj.vehicleNumber),r.Ab(4),r.Ec(r.dc(48,34,"save")))},directives:[m.l,l.p,l.j,l.d,m.r,l.e,m.v,m.J,l.i,l.c,m.s,m.u,m.I,m.q,m.K,l.n,m.x,m.k,m.d,v.a],pipes:[f.c],styles:[""]}),a),p=n("ofXK"),y=n("jIHw");function R(e,t){if(1&e){var c=r.Sb();r.Rb(0,"ion-item",7),r.Zb("click",function(e){r.vc(c);var i=t.$implicit;return r.bc().itemSelect(i),e.stopPropagation()}),r.Rb(1,"ion-avatar",8),r.Mb(2,"ion-icon",9),r.Qb(),r.Rb(3,"ion-label"),r.Rb(4,"h3"),r.Dc(5),r.Qb(),r.Rb(6,"h2"),r.Dc(7),r.Qb(),r.Rb(8,"h2"),r.Rb(9,"b"),r.Dc(10),r.Qb(),r.Qb(),r.Rb(11,"h2"),r.Dc(12),r.Qb(),r.Rb(13,"p"),r.Dc(14),r.Qb(),r.Qb(),r.Qb()}if(2&e){var i=t.$implicit;r.Ab(5),r.Ec(i.vehicleType),r.Ab(2),r.Gc("",i.vehicleBrand," ",i.vehicleModel," "),r.Ab(3),r.Ec(i.vehicleNumber),r.Ab(2),r.Ec(i.vehicleColor),r.Ab(2),r.Fc("Added By : ",i.addedBy,"")}}function A(e,t){if(1&e){var c=r.Sb();r.Rb(0,"div"),r.Mb(1,"br"),r.Mb(2,"div"),r.Rb(3,"div",10),r.Rb(4,"ion-label"),r.Dc(5,"Alternate vehicle not available."),r.Qb(),r.Mb(6,"br"),r.Mb(7,"br"),r.Rb(8,"button",11),r.Zb("click",function(){return r.vc(c),r.bc().createAlternateVehicle()}),r.Qb(),r.Qb(),r.Qb()}}function N(e,t){if(1&e){var c=r.Sb();r.Rb(0,"ion-footer",10),r.Rb(1,"span",12),r.Rb(2,"button",11),r.Zb("click",function(){return r.vc(c),r.bc().createAlternateVehicle()}),r.Qb(),r.Qb(),r.Qb()}}var Q,S=((Q=function(){function t(c,i,n,a,o,l,r){e(this,t),this.router=c,this.popoverController=i,this.translate=n,this.messageService=a,this.dbprovider=o,this.config=l,this.dialogService=r,this.vehicleList=[],this.tableName="alternateVehicle",this.vehicleTableName="vehicle",this.selectedVehicle=JSON.parse(JSON.stringify(l.data.vehicle)),this.fetchAlternateVehicles()}return c(t,[{key:"createAlternateVehicle",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("alternate vehicle detail"),this.dialogService.open(g,{header:this.translate.instant("alternateVehicle.title"),width:"50%",data:{vehicle:this.selectedVehicle,object:"",mode:"new"}}).onClose.subscribe(function(e){t.fetchAlternateVehicles()});case 1:case"end":return e.stop()}},e,this)}))}},{key:"fetchAlternateVehicles",value:function(){var e=this;this.dbprovider.fetchDocsWithoutRelationshipByParentTypeAndId(this.tableName,this.vehicleTableName,this.selectedVehicle.id).then(function(t){console.log(t),t&&"SUCCESS"==t.status?e.vehicleList=t.records:e.messageService.add({key:"alternateVehicleList",severity:"error",summary:t.message,detail:""})})}},{key:"itemSelect",value:function(e){var t=this;this.dialogService.open(g,{header:this.translate.instant("alternateVehicle.title"),width:"50%",data:{vehicle:this.selectedVehicle,object:e,mode:"edit"}}).onClose.subscribe(function(e){t.fetchAlternateVehicles()})}}]),t}()).\u0275fac=function(e){return new(e||Q)(r.Lb(s.g),r.Lb(m.H),r.Lb(f.d),r.Lb(h.h),r.Lb(u.a),r.Lb(d.b),r.Lb(d.a))},Q.\u0275cmp=r.Fb({type:Q,selectors:[["alternateVehicleList"]],decls:9,vars:4,consts:[[2,"height","400px"],["size","large",1,"ion-text-center"],[2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["key","alternateVehicleList","position","center"],["style","text-align: center;",4,"ngIf"],[3,"click"],["slot","start"],["name","car-sport-outline",2,"font-size","50px"],[2,"text-align","center"],["pButton","","type","button","label","Create alternate vehicle","icon","pi pi-plus",3,"click"],[1,"p-buttonset",2,"text-align","center"]],template:function(e,t){1&e&&(r.Rb(0,"ion-content",0),r.Rb(1,"ion-title",1),r.Dc(2),r.Qb(),r.Rb(3,"ion-row"),r.Rb(4,"ion-list",2),r.Bc(5,R,15,6,"ion-item",3),r.Qb(),r.Qb(),r.Bc(6,A,9,0,"div",4),r.Mb(7,"p-toast",5),r.Qb(),r.Bc(8,N,3,0,"ion-footer",6)),2&e&&(r.Ab(2),r.Fc(" ",t.selectedVehicle.vehicleBrand+" "+t.selectedVehicle.vehicleModel+" "+t.selectedVehicle.vehicleNumber," "),r.Ab(3),r.ic("ngForOf",t.vehicleList),r.Ab(1),r.ic("ngIf",0==t.vehicleList.length),r.Ab(2),r.ic("ngIf",t.vehicleList.length>0))},directives:[m.l,m.A,m.x,m.t,p.j,p.k,v.a,m.r,m.c,m.p,m.s,y.b,m.m],styles:["ion-footer.footer-md[_ngcontent-%COMP%]:before{background-image:none}"]}),Q)},eKwt:function(t,i,n){"use strict";n.d(i,"a",function(){return v});var a=n("3Pt+"),o=n("fXoL"),l=n("tyNb"),r=n("27b0"),s=n("tp0D"),b=n("7zfz"),u=n("J7/z"),h=n("TEn/"),d=n("Gxio"),m=n("sYmb"),v=function(){var t=function(){function t(c,i,n,a,o,l,r){e(this,t),this.router=c,this.dbconfig=i,this.formBuilder=n,this.dbprovider=a,this.messageService=o,this.ref=l,this.config=r,this.vehicleObj={},this.vehicleandContactAssgObj={},this.contactId="",this.vehicleId="",this.tableName="vehicle",this.assignmenttableName="vehicleContactAssignment",this.savedSuccessMessage="Data saved sucessfully","edit"==r.data.mode?this.vehicleObj=JSON.parse(JSON.stringify(r.data.object)):(this.initializeObjects(this.dbconfig.configuration.tableStructure),this.initializeAssignmentObjects(this.dbconfig.configuration.tableStructure)),this.createFormGroup(),this.contactId=this.config.data.contactId}return c(t,[{key:"initializeObjects",value:function(e){this.vehicleObj=JSON.parse(JSON.stringify(e[this.tableName])),this.vehicleObj.vehicleType="car"}},{key:"initializeAssignmentObjects",value:function(e){this.vehicleandContactAssgObj=JSON.parse(JSON.stringify(e[this.assignmenttableName]))}},{key:"createFormGroup",value:function(){this.formGroup=this.formBuilder.group({vehicle:this.formBuilder.group({vehicleType:["",a.o.compose([a.o.required])],vehicleBrand:[""],vehicleModel:[""],vehicleColor:[""],vehicleNumber:["",a.o.compose([a.o.required])]})})}},{key:"saveAction",value:function(){var e=this;console.log(this.vehicleObj),this.formGroup.patchValue({vehicle:{vehicleType:this.vehicleObj.vehicleType,vehicleBrand:this.vehicleObj.vehicleBrand,vehicleModel:this.vehicleObj.vehicleModel,vehicleColor:this.vehicleObj.vehicleColor,vehicleNumber:this.vehicleObj.vehicleNumber.toUpperCase()}}),this.formGroup.valid?this.alreadyExistValidation().then(function(t){t?e.messageService.add({key:"vehicleEntry",severity:"error",summary:"Vehicle number already exist",detail:"",closable:!0}):e.dbprovider.save(e.tableName,e.vehicleObj).then(function(t){"SUCCESS"==t.status?(e.messageService.add({key:"vehicleEntry",severity:"success",summary:e.savedSuccessMessage,detail:""}),e.vehicleId=t.id,"edit"!=e.config.data.mode?e.saveContactAndVehicleAssignment():setTimeout(function(){return e.ref.close("SUCCESS")},1e3)):e.messageService.add({key:"vehicleEntry",severity:"error",summary:t.message,detail:"",closable:!0})}).catch(function(t){console.log(t),e.messageService.add({key:"vehicleEntry",severity:"error",summary:t,detail:""})})}):this.messageService.add({key:"vehicleEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}},{key:"alreadyExistValidation",value:function(){var e=!1;return"edit"==this.config.data.mode&&this.vehicleObj.vehicleNumber.toUpperCase()==this.config.data.object.vehicleNumber.toUpperCase()?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.vehicleNumber":this.vehicleObj.vehicleNumber.toUpperCase(),"data.type":this.tableName},sort:["data.vehicleNumber"]}).then(function(t){return"SUCCESS"==t.status&&t.records.length>0&&(e=!0),e})}},{key:"saveContactAndVehicleAssignment",value:function(){var e=this;this.vehicleandContactAssgObj.contact_lookup=this.contactId,this.vehicleandContactAssgObj.vehicle_lookup=this.vehicleId,console.log(this.vehicleandContactAssgObj),this.dbprovider.save(this.assignmenttableName,this.vehicleandContactAssgObj).then(function(t){console.log(t),"SUCCESS"!=t.status?console.log("Vehicle assignment save failed",t):console.log("Vehicle assignment save Success"),setTimeout(function(){return e.ref.close("SUCCESS")},1e3)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Lb(l.g),o.Lb(r.a),o.Lb(a.b),o.Lb(s.a),o.Lb(b.h),o.Lb(u.d),o.Lb(u.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["vehicleEntry"]],decls:46,vars:33,consts:[[2,"height","450px"],[2,"height","100%",3,"formGroup"],["lines","full","formGroupName","vehicle"],["value","car","mode","md","formControlName","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["value","car"],["value","auto"],["value","others"],["position","floating"],["type","text","formControlName","vehicleBrand",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleModel",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleColor",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleNumber","required","",3,"ngModel","ngModelChange"],["type","submit","color","danger","expand","block",3,"click"],["key","vehicleEntry","position","center"]],template:function(e,t){1&e&&(o.Rb(0,"ion-content",0),o.Rb(1,"form",1),o.Rb(2,"ion-item",2),o.Rb(3,"ion-radio-group",3),o.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleType=e}),o.Rb(4,"ion-label"),o.Dc(5),o.cc(6,"translate"),o.Qb(),o.Rb(7,"ion-item"),o.Mb(8,"ion-radio",4),o.Rb(9,"ion-label"),o.Dc(10),o.cc(11,"translate"),o.Qb(),o.Mb(12,"ion-radio",5),o.Rb(13,"ion-label"),o.Dc(14),o.cc(15,"translate"),o.Qb(),o.Mb(16,"ion-radio",6),o.Rb(17,"ion-label"),o.Dc(18),o.cc(19,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(20,"ion-item",2),o.Rb(21,"ion-label",7),o.Dc(22),o.cc(23,"translate"),o.Qb(),o.Rb(24,"ion-input",8),o.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleBrand=e}),o.Qb(),o.Qb(),o.Rb(25,"ion-item",2),o.Rb(26,"ion-label",7),o.Dc(27),o.cc(28,"translate"),o.Qb(),o.Rb(29,"ion-input",9),o.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleModel=e}),o.Qb(),o.Qb(),o.Rb(30,"ion-item",2),o.Rb(31,"ion-label",7),o.Dc(32),o.cc(33,"translate"),o.Qb(),o.Rb(34,"ion-input",10),o.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleColor=e}),o.Qb(),o.Qb(),o.Rb(35,"ion-item",2),o.Rb(36,"ion-label",7),o.Dc(37),o.cc(38,"translate"),o.Qb(),o.Rb(39,"ion-input",11),o.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleNumber=e}),o.Qb(),o.Qb(),o.Rb(40,"ion-row"),o.Rb(41,"ion-col"),o.Rb(42,"ion-button",12),o.Zb("click",function(){return t.saveAction()}),o.Dc(43),o.cc(44,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(45,"p-toast",13),o.Qb()),2&e&&(o.Ab(1),o.ic("formGroup",t.formGroup),o.Ab(2),o.ic("ngModel",t.vehicleObj.vehicleType),o.Ab(2),o.Ec(o.dc(6,15,"vehicleEntry.vehicleType")),o.Ab(5),o.Ec(o.dc(11,17,"vehicleEntry.car")),o.Ab(4),o.Ec(o.dc(15,19,"vehicleEntry.auto")),o.Ab(4),o.Ec(o.dc(19,21,"vehicleEntry.others")),o.Ab(4),o.Fc("",o.dc(23,23,"vehicleEntry.vehicleBrand")," "),o.Ab(2),o.ic("ngModel",t.vehicleObj.vehicleBrand),o.Ab(3),o.Ec(o.dc(28,25,"vehicleEntry.vehicleModel")),o.Ab(2),o.ic("ngModel",t.vehicleObj.vehicleModel),o.Ab(3),o.Ec(o.dc(33,27,"vehicleEntry.vehicleColor")),o.Ab(2),o.ic("ngModel",t.vehicleObj.vehicleColor),o.Ab(3),o.Ec(o.dc(38,29,"vehicleEntry.vehicleNumber")),o.Ab(2),o.ic("ngModel",t.vehicleObj.vehicleNumber),o.Ab(4),o.Ec(o.dc(44,31,"save")))},directives:[h.l,a.p,a.j,a.d,h.r,a.e,h.v,h.J,a.i,a.c,h.s,h.u,h.I,h.q,h.K,a.n,h.x,h.k,h.d,d.a],pipes:[m.c],styles:[""]}),t}()},mouh:function(t,i,n){"use strict";n.d(i,"a",function(){return Q});var a=n("mrSG"),o=n("fXoL"),l=n("tyNb"),r=n("J7/z"),s=n("TEn/"),b=n("sYmb"),u=n("tp0D"),h=n("7zfz"),d=n("ofXK"),m=n("Gxio");function v(e,t){if(1&e){var c=o.Sb();o.Rb(0,"ion-item",4),o.Zb("click",function(e){o.vc(c);var i=t.$implicit;return o.bc().itemSelect(i),e.stopPropagation()}),o.Rb(1,"ion-label"),o.Rb(2,"h2"),o.Dc(3,"Account open date :"),o.Rb(4,"b"),o.Dc(5),o.Qb(),o.Qb(),o.Rb(6,"h2"),o.Dc(7,"Account close date :"),o.Rb(8,"b"),o.Dc(9),o.Qb(),o.Qb(),o.Rb(10,"h2"),o.Dc(11,"Total amount :"),o.Rb(12,"b"),o.Dc(13),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&e){var i=t.$implicit;o.Ab(5),o.Fc(" ",i.rentPlan,""),o.Ab(4),o.Fc(" ",i.rentAmount,""),o.Ab(4),o.Fc(" ",i.vehicleType,"")}}var f,g=((f=function(){function t(c,i,n,a,o,l){e(this,t),this.router=c,this.ref=i,this.popoverController=n,this.translate=a,this.dbprovider=o,this.messageService=l,this.rentplans=[],this.tableName="rentPlan",this.fetchData()}return c(t,[{key:"backButtonOnclick",value:function(){this.popoverController.dismiss()}},{key:"itemSelect",value:function(e){this.ref.close(e)}},{key:"fetchData",value:function(){var e=this;this.dbprovider.fetchDocsWithoutRelationshipByType(this.tableName).then(function(t){t&&"SUCCESS"==t.status?(console.log(t),e.rentplans=t.records):e.messageService.add({key:"rentPlanPopupList",severity:"error",summary:t.message,detail:""})})}}]),t}()).\u0275fac=function(e){return new(e||f)(o.Lb(l.g),o.Lb(r.d),o.Lb(s.H),o.Lb(b.d),o.Lb(u.a),o.Lb(h.h))},f.\u0275cmp=o.Fb({type:f,selectors:[["rentPlanPopupList"]],decls:5,vars:1,consts:[[2,"height","400px"],[2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],["key","rentPlanPopupList","position","center"],[3,"click"]],template:function(e,t){1&e&&(o.Rb(0,"ion-content",0),o.Rb(1,"ion-row"),o.Rb(2,"ion-list",1),o.Bc(3,v,14,3,"ion-item",2),o.Qb(),o.Qb(),o.Mb(4,"p-toast",3),o.Qb()),2&e&&(o.Ab(3),o.ic("ngForOf",t.rentplans))},directives:[s.l,s.x,s.t,d.j,m.a,s.r,s.s],styles:[""]}),f),p=n("27b0"),y=n("3Pt+");function R(e,t){if(1&e&&(o.Rb(0,"ion-label",9),o.Dc(1),o.Qb()),2&e){var c=o.bc();o.Ab(1),o.Ec(c.selectedRentPlan.rentPlan)}}function A(e,t){if(1&e&&(o.Rb(0,"ion-label",9),o.Dc(1),o.Qb()),2&e){var c=o.bc();o.Ab(1),o.Ec(c.selectedRentPlan.rentAmount)}}var N,Q=((N=function(){function t(c,i,n,a,o,l,r,s,b){e(this,t),this.router=c,this.dbconfig=i,this.messageService=n,this.dbprovider=a,this.popoverController=o,this.dialogService=l,this.translate=r,this.config=s,this.ref=b,this.tableName="account",this.savedSuccessMessage="Data saved sucessfully",this.selectedVehicle=JSON.parse(JSON.stringify(s.data.vehicle));var u=6e4*(new Date).getTimezoneOffset(),h=new Date(Date.now()-u).toISOString().slice(0,-5);this.openDate=h,this.initializeObjects(this.dbconfig.configuration.tableStructure)}return c(t,[{key:"initializeObjects",value:function(e){this.accountObj=JSON.parse(JSON.stringify(e[this.tableName]))}},{key:"openRentPlanList",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.dialogService.open(g,{header:this.translate.instant("rentPlanList.title"),width:"50%"}).onClose.subscribe(function(e){e&&(t.selectedRentPlan=e)});case 1:case"end":return e.stop()}},e,this)}))}},{key:"saveAction",value:function(){var e=this;this.selectedRentPlan?(this.accountObj.openDate=new Date(this.openDate).getTime(),this.accountObj.rentPlan_lookup=this.selectedRentPlan.id,this.accountObj.vehicle=this.selectedVehicle.id,console.log(this.accountObj),this.dbprovider.save(this.tableName,this.accountObj).then(function(t){"SUCCESS"==t.status?(e.messageService.add({key:"accCreation",severity:"success",summary:e.savedSuccessMessage,detail:""}),setTimeout(function(){return e.ref.close("SUCCESS")},1e3)):e.messageService.add({key:"accCreation",severity:"error",summary:t.message,detail:"",closable:!0})}).catch(function(t){console.log(t),e.messageService.add({key:"accCreation",severity:"error",summary:t,detail:""})})):this.messageService.add({key:"accCreation",severity:"error",summary:"Choose rent plan",detail:"",closable:!0})}}]),t}()).\u0275fac=function(e){return new(e||N)(o.Lb(l.g),o.Lb(p.a),o.Lb(h.h),o.Lb(u.a),o.Lb(s.H),o.Lb(r.a),o.Lb(b.d),o.Lb(r.b),o.Lb(r.d))},N.\u0275cmp=o.Fb({type:N,selectors:[["accountCreation"]],decls:26,vars:16,consts:[[2,"height","400px"],["size","large",1,"ion-text-center"],["lines","full"],["type","datetime-local",2,"background-color","lightgray",3,"ngModel","ngModelChange"],["style","float: right;text-align: right;",4,"ngIf"],[3,"click"],["slot","icon-only","name","search"],["type","submit","color","danger","expand","block",3,"click"],["key","accCreation","position","center"],[2,"float","right","text-align","right"]],template:function(e,t){1&e&&(o.Rb(0,"ion-content",0),o.Rb(1,"ion-title",1),o.Dc(2),o.Qb(),o.Rb(3,"ion-item",2),o.Rb(4,"ion-label"),o.Dc(5),o.cc(6,"translate"),o.Qb(),o.Rb(7,"input",3),o.Zb("ngModelChange",function(e){return t.openDate=e}),o.Qb(),o.Qb(),o.Rb(8,"ion-item",2),o.Rb(9,"ion-label"),o.Dc(10),o.cc(11,"translate"),o.Qb(),o.Bc(12,R,2,1,"ion-label",4),o.Rb(13,"ion-button",5),o.Zb("click",function(){return t.openRentPlanList()}),o.Mb(14,"ion-icon",6),o.Qb(),o.Qb(),o.Rb(15,"ion-item",2),o.Rb(16,"ion-label"),o.Dc(17),o.cc(18,"translate"),o.Qb(),o.Bc(19,A,2,1,"ion-label",4),o.Qb(),o.Rb(20,"ion-row"),o.Rb(21,"ion-col"),o.Rb(22,"ion-button",7),o.Zb("click",function(){return t.saveAction()}),o.Dc(23),o.cc(24,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Mb(25,"p-toast",8),o.Qb()),2&e&&(o.Ab(2),o.Fc(" ",t.selectedVehicle.vehicleBrand+" "+t.selectedVehicle.vehicleModel+" "+t.selectedVehicle.vehicleNumber," "),o.Ab(3),o.Ec(o.dc(6,8,"accountCreation.openDate")),o.Ab(2),o.ic("ngModel",t.openDate),o.Ab(3),o.Ec(o.dc(11,10,"accountCreation.selectRentPlan")),o.Ab(2),o.ic("ngIf",t.selectedRentPlan),o.Ab(5),o.Ec(o.dc(18,12,"rentPlanEntry.rentAmount")),o.Ab(2),o.ic("ngIf",t.selectedRentPlan),o.Ab(4),o.Ec(o.dc(24,14,"save")))},directives:[s.l,s.A,s.r,s.s,y.a,y.i,y.l,d.k,s.d,s.p,s.x,s.k,m.a],pipes:[b.c],styles:[""]}),N)},nNGn:function(t,i,n){"use strict";n.d(i,"a",function(){return m});var a=n("fXoL"),o=n("tyNb"),l=n("sYmb"),r=n("TEn/"),s=n("ofXK"),b=n("3Pt+");function u(e,t){if(1&e&&(a.Rb(0,"h2"),a.Dc(1),a.Qb()),2&e){var c=a.bc().$implicit;a.Ab(1),a.Ec(c.contactName)}}function h(e,t){if(1&e&&(a.Rb(0,"h2"),a.Dc(1),a.Qb()),2&e){var c=a.bc().$implicit;a.Ab(1),a.Ec(c.contactNameInTamil)}}function d(e,t){if(1&e){var c=a.Sb();a.Rb(0,"ion-item",6),a.Zb("click",function(e){a.vc(c);var i=t.$implicit;return a.bc().itemSelect(i),e.stopPropagation()}),a.Rb(1,"ion-avatar",7),a.Mb(2,"ion-icon",8),a.Qb(),a.Rb(3,"ion-label"),a.Bc(4,u,2,1,"h2",9),a.Bc(5,h,2,1,"h2",9),a.Rb(6,"h3"),a.Dc(7),a.Qb(),a.Rb(8,"p"),a.Dc(9),a.Qb(),a.Qb(),a.Rb(10,"ion-checkbox",10),a.Zb("ngModelChange",function(e){return t.$implicit.isChecked=e}),a.Qb(),a.Qb()}if(2&e){var i=t.$implicit,n=a.bc();a.Ab(4),a.ic("ngIf",n.appLanguage&&"en"==n.appLanguage),a.Ab(1),a.ic("ngIf",n.appLanguage&&"ta"==n.appLanguage),a.Ab(2),a.Ec(i.contactMobile),a.Ab(2),a.Fc("Added By : ",i.securityName,""),a.Ab(1),a.ic("ngModel",i.isChecked)}}var m=function(){var t=function(){function t(c,i){e(this,t),this.router=c,this.translate=i,this.contactList=[],this.appLanguage="ta",this.appLanguage=this.translate.getDefaultLang(),this.contactList=[{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",securityName:"Security1",selected:1},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",securityName:"Security1",selected:0},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",securityName:"Security1",selected:0},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",securityName:"Security1",selected:0},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",securityName:"Security2",selected:0}]}return c(t,[{key:"itemSelect",value:function(e){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Lb(o.g),a.Lb(l.d))},t.\u0275cmp=a.Fb({type:t,selectors:[["contactAssignment"]],decls:16,vars:7,consts:[["size","large",1,"ion-text-center"],["slot","end"],["ion-button","","slot","end"],[2,"height","50%"],[2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],["name","person-circle-outline",2,"font-size","50px"],[4,"ngIf"],["slot","end",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(a.Rb(0,"ion-header"),a.Rb(1,"ion-toolbar"),a.Rb(2,"ion-title",0),a.Dc(3),a.cc(4,"translate"),a.Qb(),a.Rb(5,"ion-buttons",1),a.Rb(6,"button",2),a.Rb(7,"h4"),a.Dc(8),a.cc(9,"translate"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(10,"ion-content",3),a.Rb(11,"ion-title",0),a.Dc(12," Tata Tiago - TN 69 AB1234 "),a.Qb(),a.Rb(13,"ion-row"),a.Rb(14,"ion-list",4),a.Bc(15,d,11,5,"ion-item",5),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.Ab(3),a.Fc(" ",a.dc(4,3,"contactAssignment.title")," "),a.Ab(5),a.Ec(a.dc(9,5,"save")),a.Ab(7),a.ic("ngForOf",t.contactList))},directives:[r.o,r.B,r.A,r.e,r.l,r.x,r.t,s.j,r.r,r.c,r.p,r.s,s.k,r.j,r.a,b.i,b.l],pipes:[l.c],styles:[""]}),t}()},xHpX:function(t,i,n){"use strict";n.d(i,"a",function(){return v});var a=n("3Pt+"),o=n("fXoL"),l=n("tyNb"),r=n("27b0"),s=n("tp0D"),b=n("7zfz"),u=n("J7/z"),h=n("TEn/"),d=n("Gxio"),m=n("sYmb"),v=function(){var t=function(){function t(c,i,n,a,o,l,r){e(this,t),this.router=c,this.dbconfig=i,this.formBuilder=n,this.dbprovider=a,this.messageService=o,this.ref=l,this.config=r,this.contactObj={},this.tableName="contact",this.savedSuccessMessage="Data saved sucessfully","edit"==r.data.mode?this.contactObj=JSON.parse(JSON.stringify(r.data.object)):this.initializeObjects(this.dbconfig.configuration.tableStructure),this.createFormGroup()}return c(t,[{key:"initializeObjects",value:function(e){this.contactObj=JSON.parse(JSON.stringify(e[this.tableName])),this.contactObj.contactType="owner"}},{key:"createFormGroup",value:function(){this.formGroup=this.formBuilder.group({contact:this.formBuilder.group({contactName:["",a.o.compose([a.o.maxLength(80),a.o.required])],contactNameInTamil:[""],contactType:["",a.o.compose([a.o.required])],contactMobile:["",[a.o.required,a.o.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],licenseNumber:[""]})})}},{key:"saveAction",value:function(){var e=this;console.log(this.contactObj),this.formGroup.patchValue({contact:{contactName:this.contactObj.contactName,contactNameInTamil:this.contactObj.contactNameInTamil,contactType:this.contactObj.contactType,contactMobile:this.contactObj.contactMobile,licenseNumber:this.contactObj.licenseNumber}}),this.formGroup.valid?this.alreadyExistValidation().then(function(t){t?e.messageService.add({key:"contactEntry",severity:"error",summary:"Mobile number already exist",detail:"",closable:!0}):e.dbprovider.save(e.tableName,e.contactObj).then(function(t){"SUCCESS"==t.status?(e.messageService.add({key:"contactEntry",severity:"success",summary:e.savedSuccessMessage,detail:""}),setTimeout(function(){return e.ref.close("SUCCESS")},1e3)):e.messageService.add({key:"contactEntry",severity:"error",summary:t.message,detail:"",closable:!0})}).catch(function(t){console.log(t),e.messageService.add({key:"contactEntry",severity:"error",summary:t,detail:""})})}):this.messageService.add({key:"contactEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}},{key:"alreadyExistValidation",value:function(){var e=!1;return"edit"==this.config.data.mode&&this.contactObj.contactMobile==this.config.data.object.contactMobile?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.contactMobile":this.contactObj.contactMobile,"data.type":this.tableName},sort:["data.contactMobile"]}).then(function(t){return"SUCCESS"==t.status&&t.records.length>0&&(e=!0),e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Lb(l.g),o.Lb(r.a),o.Lb(a.b),o.Lb(s.a),o.Lb(b.h),o.Lb(u.d),o.Lb(u.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["contactEntry"]],decls:43,vars:30,consts:[[2,"height","400px"],[2,"height","100%",3,"formGroup"],["lines","full","formGroupName","contact"],["position","floating"],["type","text","formControlName","contactName","required","",3,"ngModel","ngModelChange"],["type","text","formControlName","contactNameInTamil",3,"ngModel","ngModelChange"],["value","owner","mode","md","formControlName","contactType",2,"width","100%",3,"ngModel","ngModelChange"],["value","owner"],["value","others"],["type","number","formControlName","contactMobile","required","",3,"ngModel","ngModelChange"],["type","text","formControlName","licenseNumber",3,"ngModel","ngModelChange"],["type","submit","color","danger","expand","block",3,"click"],["key","contactEntry","position","center"]],template:function(e,t){1&e&&(o.Rb(0,"ion-content",0),o.Rb(1,"form",1),o.Rb(2,"ion-item",2),o.Rb(3,"ion-label",3),o.Dc(4),o.cc(5,"translate"),o.Qb(),o.Rb(6,"ion-input",4),o.Zb("ngModelChange",function(e){return t.contactObj.contactName=e}),o.Qb(),o.Qb(),o.Rb(7,"ion-item",2),o.Rb(8,"ion-label",3),o.Dc(9),o.cc(10,"translate"),o.Qb(),o.Rb(11,"ion-input",5),o.Zb("ngModelChange",function(e){return t.contactObj.contactNameInTamil=e}),o.Qb(),o.Qb(),o.Rb(12,"ion-item",2),o.Rb(13,"ion-radio-group",6),o.Zb("ngModelChange",function(e){return t.contactObj.contactType=e}),o.Rb(14,"ion-label"),o.Dc(15),o.cc(16,"translate"),o.Qb(),o.Rb(17,"ion-item"),o.Mb(18,"ion-radio",7),o.Rb(19,"ion-label"),o.Dc(20),o.cc(21,"translate"),o.Qb(),o.Rb(22,"ion-radio",8),o.Dc(23,"Test"),o.Qb(),o.Rb(24,"ion-label"),o.Dc(25),o.cc(26,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(27,"ion-item",2),o.Rb(28,"ion-label",3),o.Dc(29),o.cc(30,"translate"),o.Qb(),o.Rb(31,"ion-input",9),o.Zb("ngModelChange",function(e){return t.contactObj.contactMobile=e}),o.Qb(),o.Qb(),o.Rb(32,"ion-item",2),o.Rb(33,"ion-label",3),o.Dc(34),o.cc(35,"translate"),o.Qb(),o.Rb(36,"ion-input",10),o.Zb("ngModelChange",function(e){return t.contactObj.licenseNumber=e}),o.Qb(),o.Qb(),o.Rb(37,"ion-row"),o.Rb(38,"ion-col"),o.Rb(39,"ion-button",11),o.Zb("click",function(){return t.saveAction()}),o.Dc(40),o.cc(41,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(42,"p-toast",12),o.Qb()),2&e&&(o.Ab(1),o.ic("formGroup",t.formGroup),o.Ab(3),o.Fc("",o.dc(5,14,"contactEntry.contactName")," "),o.Ab(2),o.ic("ngModel",t.contactObj.contactName),o.Ab(3),o.Ec(o.dc(10,16,"contactEntry.contactNameInTamil")),o.Ab(2),o.ic("ngModel",t.contactObj.contactNameInTamil),o.Ab(2),o.ic("ngModel",t.contactObj.contactType),o.Ab(2),o.Ec(o.dc(16,18,"contactEntry.contactType")),o.Ab(5),o.Fc(" ",o.dc(21,20,"contactEntry.ownerType"),""),o.Ab(5),o.Fc(" ",o.dc(26,22,"contactEntry.otherType"),""),o.Ab(4),o.Ec(o.dc(30,24,"contactEntry.contactMobile")),o.Ab(2),o.ic("ngModel",t.contactObj.contactMobile),o.Ab(3),o.Ec(o.dc(35,26,"contactEntry.licenseNumber")),o.Ab(2),o.ic("ngModel",t.contactObj.licenseNumber),o.Ab(4),o.Fc("",o.dc(41,28,"save")," "))},directives:[h.l,a.p,a.j,a.d,h.r,a.e,h.s,h.q,h.K,a.i,a.c,a.n,h.v,h.J,h.u,h.I,h.F,h.x,h.k,h.d,d.a],pipes:[m.c],styles:[""]}),t}()}}])}();