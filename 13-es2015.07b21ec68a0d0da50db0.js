(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{JPuJ:function(t,e,c){"use strict";c.r(e),c.d(e,"contactListWithVehicleInfoModule",function(){return W});var i=c("ofXK"),n=c("TEn/"),o=c("3Pt+"),a=c("mrSG"),l=c("VqLa"),s=c("XqSU"),h=c("0Eai"),b=c("eKwt"),r=c("xHpX"),d=c("fXoL"),p=c("tyNb"),g=c("J7/z"),u=c("sYmb"),f=c("tp0D"),S=c("7zfz"),v=c("7kUa"),m=c("jIHw"),R=c("Q4Mo"),A=c("Gxio"),C=c("1SLH");function y(t,e){if(1&t&&(d.Sb(0,"h2"),d.Ec(1),d.Rb()),2&t){const t=d.cc().$implicit;d.Ab(1),d.Fc(t.contactName)}}function I(t,e){if(1&t&&(d.Sb(0,"h2"),d.Ec(1),d.Rb()),2&t){const t=d.cc().$implicit;d.Ab(1),d.Fc(t.contactNameInTamil)}}function L(t,e){if(1&t){const t=d.Tb();d.Sb(0,"ion-item",19),d.ac("click",function(c){d.wc(t);const i=e.$implicit;return d.cc().itemSelect(i),c.stopPropagation()}),d.Sb(1,"ion-avatar",1),d.Nb(2,"ion-icon",20),d.Rb(),d.Sb(3,"ion-label"),d.Cc(4,y,2,1,"h2",21),d.Cc(5,I,2,1,"h2",21),d.Sb(6,"h3"),d.Ec(7),d.Rb(),d.Sb(8,"p"),d.Ec(9),d.Rb(),d.Rb(),d.Sb(10,"button",22),d.ac("click",function(c){d.wc(t);const i=e.$implicit;return d.cc().editContact(i),c.stopPropagation()}),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit,c=d.cc();d.Ab(4),d.jc("ngIf",c.appLanguage&&"en"==c.appLanguage),d.Ab(1),d.jc("ngIf",c.appLanguage&&"ta"==c.appLanguage),d.Ab(2),d.Fc(t.contactMobile),d.Ab(2),d.Gc("Added By : ",t.securityName,"")}}function w(t,e){if(1&t&&(d.Sb(0,"ion-label"),d.Sb(1,"b"),d.Ec(2),d.Rb(),d.Rb()),2&t){const t=d.cc(2).$implicit;d.Ab(2),d.Fc(t.contactName)}}function E(t,e){if(1&t&&(d.Sb(0,"ion-label"),d.Sb(1,"b"),d.Ec(2),d.Rb(),d.Rb()),2&t){const t=d.cc(2).$implicit;d.Ab(2),d.Fc(t.contactNameInTamil)}}function k(t,e){if(1&t&&(d.Sb(0,"div"),d.Cc(1,w,3,1,"ion-label",21),d.Cc(2,E,3,1,"ion-label",21),d.Sb(3,"ion-label"),d.Ec(4),d.Rb(),d.Nb(5,"div",44),d.Rb()),2&t){const t=d.cc().$implicit,e=d.cc(3);d.Ab(1),d.jc("ngIf",e.appLanguage&&"en"==e.appLanguage),d.Ab(1),d.jc("ngIf",e.appLanguage&&"ta"==e.appLanguage),d.Ab(2),d.Fc(t.contactMobile)}}function V(t,e){if(1&t&&(d.Sb(0,"ion-row",43),d.Cc(1,k,6,3,"div",21),d.Rb()),2&t){const t=e.index;d.Ab(1),d.jc("ngIf",t<2)}}function x(t,e){if(1&t){const t=d.Tb();d.Sb(0,"ion-item",19),d.ac("click",function(){d.wc(t);const c=e.$implicit;return d.cc(2).vehicleDetail(c)}),d.Sb(1,"ion-col",28),d.Sb(2,"div"),d.Sb(3,"div",29),d.Sb(4,"ion-avatar",30),d.Nb(5,"ion-icon",31),d.Rb(),d.Sb(6,"ion-label",32),d.Sb(7,"h3"),d.Ec(8),d.Rb(),d.Rb(),d.Rb(),d.Sb(9,"div",33),d.Sb(10,"ion-label"),d.Sb(11,"h3"),d.Ec(12),d.Rb(),d.Sb(13,"h2"),d.Ec(14),d.Rb(),d.Sb(15,"h2"),d.Sb(16,"b"),d.Ec(17),d.Rb(),d.Rb(),d.Sb(18,"p"),d.Ec(19),d.Rb(),d.Rb(),d.Rb(),d.Nb(20,"div",34),d.Rb(),d.Rb(),d.Sb(21,"ion-col",35),d.Sb(22,"div",36),d.Sb(23,"ion-label"),d.Sb(24,"h3"),d.Ec(25),d.dc(26,"translate"),d.Rb(),d.Sb(27,"h2"),d.Ec(28),d.dc(29,"translate"),d.Rb(),d.Sb(30,"p"),d.Ec(31),d.dc(32,"translate"),d.Rb(),d.Sb(33,"p"),d.Ec(34),d.dc(35,"date"),d.Rb(),d.Rb(),d.Rb(),d.Nb(36,"div",34),d.Rb(),d.Sb(37,"ion-col",37),d.Cc(38,V,2,1,"ion-row",38),d.Rb(),d.Sb(39,"ion-col",39),d.Sb(40,"button",40),d.ac("click",function(c){d.wc(t);const i=e.$implicit,n=d.vc(42),o=d.cc(2);return n.toggle(c),o.menuClick(i),c.stopPropagation()}),d.Rb(),d.Nb(41,"p-menu",41,42),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit,c=d.cc(2);d.Ab(8),d.Fc(t.vehicleInfo.vehicleColor),d.Ab(4),d.Fc(t.vehicleInfo.vehicleType),d.Ab(2),d.Hc("",t.vehicleInfo.vehicleBrand," ",t.vehicleInfo.vehicleModel," "),d.Ab(3),d.Fc(t.vehicleInfo.vehicleNumber),d.Ab(2),d.Gc("Added By : ",t.vehicleInfo.addedBy,""),d.Ab(6),d.Hc("",d.ec(26,15,"rentPlanEntry.rentPlanName")," : ",t.rentPlanInfo.rentPlan,""),d.Ab(3),d.Hc("",t.rentPlanInfo.rentAmount," ",d.ec(29,17,"rs"),""),d.Ab(3),d.Gc("",d.ec(32,19,"contactListWithVehicle.accountOpenDate")," :"),d.Ab(3),d.Fc(d.fc(35,21,t.accountInfo.openDate,"dd/MM/yyyy hh:mm a")),d.Ab(4),d.jc("ngForOf",t.additionalContacts),d.Ab(3),d.jc("popup",!0)("model",c.items)}}function N(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",23),d.Sb(1,"ion-toolbar",24),d.Sb(2,"ion-button",25),d.ac("click",function(){return d.wc(t),d.cc().vehicleAddButtonclick()}),d.Nb(3,"img",26),d.Rb(),d.Rb(),d.Sb(4,"ion-list",27),d.Cc(5,x,43,24,"ion-item",14),d.Rb(),d.Rb()}if(2&t){const t=d.cc();d.Ab(5),d.jc("ngForOf",t.vehicleList)}}function T(t,e){if(1&t&&(d.Sb(0,"div"),d.Sb(1,"div",29),d.Sb(2,"ion-avatar",30),d.Nb(3,"ion-icon",31),d.Rb(),d.Sb(4,"ion-label",32),d.Sb(5,"h3"),d.Ec(6),d.Rb(),d.Rb(),d.Rb(),d.Sb(7,"div",33),d.Sb(8,"ion-label"),d.Sb(9,"h2"),d.Ec(10),d.Rb(),d.Sb(11,"h2"),d.Ec(12),d.Rb(),d.Sb(13,"h2"),d.Sb(14,"b"),d.Ec(15),d.Rb(),d.Rb(),d.Sb(16,"p"),d.Ec(17),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t){const t=d.cc().$implicit;d.Ab(6),d.Fc(t.alternateVehicleInfo.vehicleColor),d.Ab(4),d.Fc(t.alternateVehicleInfo.vehicleType),d.Ab(2),d.Hc("",t.alternateVehicleInfo.vehicleBrand," ",t.alternateVehicleInfo.vehicleModel," "),d.Ab(3),d.Fc(t.alternateVehicleInfo.vehicleNumber),d.Ab(2),d.Gc("Added By : ",t.alternateVehicleInfo.addedBy,"")}}function F(t,e){1&t&&(d.Sb(0,"div"),d.Sb(1,"ion-label",32),d.Nb(2,"br"),d.Sb(3,"h3"),d.Ec(4,"Alternate vehicle not available"),d.Rb(),d.Rb(),d.Rb())}function P(t,e){if(1&t&&(d.Sb(0,"h2"),d.Ec(1),d.Rb()),2&t){const t=d.cc().$implicit;d.Ab(1),d.Fc(t.contactName)}}function O(t,e){if(1&t&&(d.Sb(0,"h2"),d.Ec(1),d.Rb()),2&t){const t=d.cc().$implicit;d.Ab(1),d.Fc(t.contactNameInTamil)}}function M(t,e){if(1&t&&(d.Sb(0,"ion-col",59),d.Sb(1,"div"),d.Sb(2,"ion-label",54),d.Cc(3,P,2,1,"h2",21),d.Cc(4,O,2,1,"h2",21),d.Sb(5,"h2"),d.Ec(6),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t){const t=e.$implicit,c=d.cc(3);d.Ab(3),d.jc("ngIf",c.appLanguage&&"en"==c.appLanguage),d.Ab(1),d.jc("ngIf",c.appLanguage&&"ta"==c.appLanguage),d.Ab(2),d.Fc(t.contactMobile)}}function j(t,e){if(1&t){const t=d.Tb();d.Sb(0,"ion-grid",47),d.Sb(1,"ion-row",48),d.Sb(2,"ion-col",49),d.Sb(3,"h2"),d.Ec(4),d.dc(5,"translate"),d.Rb(),d.Sb(6,"div"),d.Sb(7,"div",29),d.Sb(8,"ion-avatar",30),d.Nb(9,"ion-icon",31),d.Rb(),d.Sb(10,"ion-label",32),d.Sb(11,"h3"),d.Ec(12),d.Rb(),d.Rb(),d.Rb(),d.Sb(13,"div",33),d.Sb(14,"ion-label"),d.Sb(15,"h2"),d.Ec(16),d.Rb(),d.Sb(17,"h2"),d.Ec(18),d.Rb(),d.Sb(19,"h2"),d.Sb(20,"b"),d.Ec(21),d.Rb(),d.Rb(),d.Sb(22,"p"),d.Ec(23),d.Rb(),d.Rb(),d.Rb(),d.Nb(24,"div",34),d.Rb(),d.Rb(),d.Sb(25,"ion-col",49),d.Sb(26,"h2"),d.Ec(27),d.dc(28,"translate"),d.Rb(),d.Sb(29,"div",50),d.Sb(30,"ion-label"),d.Sb(31,"h2"),d.Ec(32),d.dc(33,"translate"),d.Rb(),d.Sb(34,"h2"),d.Ec(35),d.dc(36,"translate"),d.Rb(),d.Sb(37,"p"),d.Ec(38),d.dc(39,"translate"),d.Rb(),d.Sb(40,"p"),d.Ec(41),d.dc(42,"date"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(43,"ion-col",51),d.Sb(44,"button",40),d.ac("click",function(c){d.wc(t);const i=e.$implicit,n=d.vc(46),o=d.cc(2);return n.toggle(c),o.menuClick(i),c.stopPropagation()}),d.Rb(),d.Nb(45,"p-menu",41,42),d.Rb(),d.Nb(47,"div",52),d.Rb(),d.Sb(48,"ion-row",53),d.Sb(49,"ion-col",49),d.Sb(50,"div"),d.Sb(51,"h2"),d.Ec(52),d.dc(53,"translate"),d.Rb(),d.Sb(54,"div",36),d.Sb(55,"ion-label",54),d.Sb(56,"h2"),d.Ec(57),d.dc(58,"translate"),d.dc(59,"translate"),d.Rb(),d.Sb(60,"h2"),d.Ec(61),d.dc(62,"translate"),d.dc(63,"translate"),d.Rb(),d.Sb(64,"h2"),d.Sb(65,"b"),d.Ec(66),d.dc(67,"translate"),d.dc(68,"translate"),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Nb(69,"div",34),d.Rb(),d.Rb(),d.Sb(70,"ion-col",49),d.Sb(71,"h2"),d.Ec(72),d.dc(73,"translate"),d.Rb(),d.Cc(74,T,18,6,"div",21),d.Cc(75,F,5,0,"div",21),d.Rb(),d.Nb(76,"div",52),d.Rb(),d.Sb(77,"ion-row",53),d.Sb(78,"ion-row",55),d.Sb(79,"h2",56),d.Ec(80),d.dc(81,"translate"),d.Rb(),d.Rb(),d.Sb(82,"ion-row",57),d.Cc(83,M,7,3,"ion-col",58),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit,c=d.cc(2);d.Ab(4),d.Fc(d.ec(5,31,"contactListWithVehicle.primaryVehicleInfo")),d.Ab(8),d.Fc(t.vehicleInfo.vehicleColor),d.Ab(4),d.Fc(t.vehicleInfo.vehicleType),d.Ab(2),d.Hc("",t.vehicleInfo.vehicleBrand," ",t.vehicleInfo.vehicleModel," "),d.Ab(3),d.Fc(t.vehicleInfo.vehicleNumber),d.Ab(2),d.Gc("Added By : ",t.vehicleInfo.addedBy,""),d.Ab(4),d.Fc(d.ec(28,33,"contactListWithVehicle.accountInfo")),d.Ab(5),d.Hc("",d.ec(33,35,"rentPlanEntry.rentPlanName")," : ",t.rentPlanInfo.rentPlan,""),d.Ab(3),d.Hc("",t.rentPlanInfo.rentAmount," ",d.ec(36,37,"rs"),""),d.Ab(3),d.Gc("",d.ec(39,39,"contactListWithVehicle.accountOpenDate")," :"),d.Ab(3),d.Fc(d.fc(42,41,t.accountInfo.openDate,"dd/MM/yyyy hh:mm a")),d.Ab(4),d.jc("popup",!0)("model",c.items),d.Ab(7),d.Fc(d.ec(53,44,"contactListWithVehicle.outstandingInfo")),d.Ab(5),d.Ic("",d.ec(58,46,"contactListWithVehicle.totalAmount")," : ",t.accountInfo.totalBillAmount," ",d.ec(59,48,"rs"),""),d.Ab(4),d.Ic("",d.ec(62,50,"contactListWithVehicle.paidAmount")," : ",t.accountInfo.receivedAmount," ",d.ec(63,52,"rs"),""),d.Ab(5),d.Ic("",d.ec(67,54,"contactListWithVehicle.pendingAmount")," : ",t.accountInfo.totalBillAmount-t.accountInfo.receivedAmount," ",d.ec(68,56,"rs"),""),d.Ab(6),d.Fc(d.ec(73,58,"contactListWithVehicle.alternateVehicleInfo")),d.Ab(2),d.jc("ngIf",t.alternateVehicleInfo.vehicleType),d.Ab(1),d.jc("ngIf",!t.alternateVehicleInfo.vehicleType),d.Ab(5),d.Fc(d.ec(81,60,"contactListWithVehicle.additionalContactInfo")),d.Ab(3),d.jc("ngForOf",t.additionalContacts)}}function B(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",45),d.Sb(1,"ion-toolbar",24),d.Sb(2,"ion-button",25),d.ac("click",function(){return d.wc(t),d.cc().vehicleAddButtonclick()}),d.Nb(3,"img",26),d.Rb(),d.Rb(),d.Cc(4,j,84,62,"ion-grid",46),d.Rb()}if(2&t){const t=d.cc();d.Ab(4),d.jc("ngForOf",t.vehicleList)}}function _(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div",45),d.Sb(1,"ion-toolbar",24),d.Sb(2,"ion-button",25),d.ac("click",function(){return d.wc(t),d.cc().vehicleAddButtonclick()}),d.Nb(3,"img",26),d.Rb(),d.Rb(),d.Sb(4,"div",60),d.Nb(5,"br"),d.Nb(6,"div"),d.Sb(7,"div",32),d.Sb(8,"ion-label"),d.Ec(9,"No vehicle assigned against this contact."),d.Rb(),d.Rb(),d.Rb(),d.Rb()}}const D=[{path:"",component:(()=>{class t{constructor(t,e,c,i,n,o,a){this.router=t,this.dialogService=e,this.popoverController=c,this.location=i,this.translate=n,this.dbprovider=o,this.messageService=a,this.contactList=[],this.vehicleList=[],this.allContactList=[],this.queryText="",this.appLanguage="ta",this.contactTableName="contact",this.vehicleTableName="vehicle",this.accountTableName="account",this.alternateVehicleTableName="alternateVehicle",this.vehicleContactAssignmentTableName="vehicleContactAssignment",this.appLanguage=this.translate.getDefaultLang(),this.fetchContactList(),this.items=[{label:"Actions",items:[{label:this.translate.instant("actions.editVehicle"),icon:"pi pi-angle-right",command:()=>{this.vehicleEditAction()}},{label:this.translate.instant("actions.contactList"),icon:"pi pi-angle-right",command:()=>{this.showAlternateContactList()}},{label:this.translate.instant("actions.alternateVehicleList"),icon:"pi pi-angle-right",command:()=>{this.alternateVehicleList()}},{label:this.translate.instant("actions.accountDetail"),icon:"pi pi-angle-right",command:()=>{this.accountDetail()}}]}]}editContact(t){console.log(t),delete JSON.parse(JSON.stringify(t)).selected,this.dialogService.open(r.a,{header:this.translate.instant("contactEntry.title"),width:"50%",data:{object:t,mode:"edit",contactType:"Primary",vehicleId:""}}).onClose.subscribe(t=>{t&&"SUCCESS"==t&&this.fetchContactList()})}contactAddButtonclick(){return Object(a.a)(this,void 0,void 0,function*(){console.log("add contact"),this.dialogService.open(r.a,{header:this.translate.instant("contactEntry.title"),width:"50%",data:{object:"",mode:"new",contactType:"Primary",vehicleId:""}}).onClose.subscribe(t=>{t&&"SUCCESS"==t&&this.fetchContactList()})})}vehicleAddButtonclick(){return Object(a.a)(this,void 0,void 0,function*(){console.log("add vehicle"),this.dialogService.open(b.a,{header:this.translate.instant("vehicleEntry.title"),width:"50%",data:{object:"",mode:"new",contactId:this.selectedContact.id}}).onClose.subscribe(t=>{t&&"SUCCESS"==t&&this.fetchVehicleContactAssignemntAgainstContact(this.selectedContact.id)})})}vehicleEditAction(){return Object(a.a)(this,void 0,void 0,function*(){console.log("edit vehicle"),this.dialogService.open(b.a,{header:this.translate.instant("vehicleEntry.title"),width:"50%",data:{object:this.selectedVehicle,mode:"edit",contactId:this.selectedContact.id}}).onClose.subscribe(t=>{t&&"SUCCESS"==t&&this.fetchVehicleContactAssignemntAgainstContact(this.selectedContact.id)})})}fetchContactList(){this.contactList=[],this.dbprovider.fetchDocsWithoutRelationshipByType(this.contactTableName).then(t=>{t&&"SUCCESS"==t.status?(console.log(t),t.records.length>0&&(t.records.forEach(t=>{"owner"==t.contactType&&this.contactList.push(t)}),this.allContactList=[...this.contactList],this.contactList.length>0&&(this.selectedContact=this.contactList[0],this.fetchVehicleContactAssignemntAgainstContact(this.selectedContact.id)))):this.messageService.add({key:"contactList",severity:"error",summary:t.message,detail:""})})}fetchVehicleContactAssignemntAgainstContact(t){this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.contact_lookup":t,"data.type":this.vehicleContactAssignmentTableName},sort:["data.contact_lookup"]}).then(t=>{if(console.log(t),"SUCCESS"==t.status&&t.records.length>0){const e=t.records.map(t=>t.vehicle_lookup).map(t=>this.vehicleTableName+"_2_"+t);this.fetchVehicleListAgainstContact(e)}else this.vehicleList=[],this.selectedVehicle=null})}fetchVehicleListAgainstContact(t){console.log(t),this.vehicleList=[],this.dbprovider.fetchDocsWithDocIds(t).then(t=>{console.log(t),"SUCCESS"==t.status&&t.response.length>0?t.response.forEach(t=>{this.fetchAccountAndAdditionalContactInfo(t.id).then(e=>{e.vehicleInfo=t,console.log("result==>",e),this.vehicleList.push(e)})}):this.vehicleList=[]}).catch(t=>{this.vehicleList=[]})}fetchAccountAndAdditionalContactInfo(t){let e={},c=[];return c.push(this.fetchAccountInfoAgainstVehicle(t).then(t=>{t?(e.rentPlanInfo=t.rentPlan_lookup,delete t.rentPlan_lookup,e.accountInfo=t,console.log(t)):(e.accountInfo={},e.rentPlanInfo={})})),c.push(this.fetchAdditionalContactInfoAgainstVehicle(t).then(t=>{e.additionalContacts=t})),c.push(this.fetchAlternateVehicleInfoAgainstVehicle(t).then(t=>{e.alternateVehicleInfo=t.length>0?t[0]:{}})),Promise.all(c).then(t=>(console.log(t),e))}fetchAccountInfoAgainstVehicle(t){return this.dbprovider.fetchDocsWithRelationshipUsingFindOption({selector:{"data.vehicle":t,"data.type":this.accountTableName},sort:["data.vehicle"]},!0,{masterandlookupreference:["rentPlan"]}).then(t=>{if(console.log(t),!t||"SUCCESS"!=t.status)return null;if(t.records.length>0){let e=null;return t.records.forEach(t=>{t.closeDate||(e=t)}),e}}).catch(t=>null)}fetchAdditionalContactInfoAgainstVehicle(t){return this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.vehicle_lookup":t,"data.type":this.vehicleContactAssignmentTableName},sort:["data.vehicle_lookup"]}).then(t=>{if(console.log(t),"SUCCESS"==t.status&&t.records.length>0){const e=t.records.map(t=>t.contact_lookup).map(t=>this.contactTableName+"_2_"+t);return this.fetchContactListAgainstVehicle(e)}return[]}).catch(t=>[])}fetchContactListAgainstVehicle(t){console.log(t);var e=[];return this.dbprovider.fetchDocsWithDocIds(t).then(t=>(console.log(t),"SUCCESS"==t.status&&t.response.length>0?(t.response.forEach(t=>{console.log(t),"others"==t.contactType&&e.push(t)}),e):[])).catch(t=>[])}fetchAlternateVehicleInfoAgainstVehicle(t){return this.dbprovider.fetchDocsWithoutRelationshipByParentTypeAndId(this.alternateVehicleTableName,this.vehicleTableName,t).then(t=>(console.log(t),t&&"SUCCESS"==t.status?t.records:null))}menuClick(t){this.selectedVehicle=t.vehicleInfo,console.log("menu click",this.selectedVehicle)}showAlternateContactList(){return Object(a.a)(this,void 0,void 0,function*(){console.log("alternate contact detail"),this.dialogService.open(l.a,{header:this.translate.instant("contactList.title"),width:"50%",data:{vehicle:this.selectedVehicle}}).onClose.subscribe(t=>{this.fetchVehicleContactAssignemntAgainstContact(this.selectedContact.id)})})}alternateVehicleList(){return Object(a.a)(this,void 0,void 0,function*(){console.log("alternate vehicle detail"),this.dialogService.open(s.a,{header:this.translate.instant("alternateVehicle.title"),width:"50%",data:{vehicle:this.selectedVehicle}}).onClose.subscribe(t=>{this.fetchVehicleContactAssignemntAgainstContact(this.selectedContact.id)})})}accountDetail(){return Object(a.a)(this,void 0,void 0,function*(){console.log("account detail"),this.dialogService.open(h.a,{header:this.translate.instant("accountDetail.title"),width:"50%",data:{vehicle:this.selectedVehicle}}).onClose.subscribe(t=>{this.fetchVehicleContactAssignemntAgainstContact(this.selectedContact.id)})})}itemSelect(t){console.log(t),t.selected=1,this.selectedContact=t,this.fetchVehicleContactAssignemntAgainstContact(t.id)}searchByKeyword(){console.log("search",this.queryText),this.contactList=[],this.queryText.length>0?this.allContactList.forEach(t=>{(t.contactName.toLowerCase().includes(this.queryText.toLowerCase())||t.contactMobile.toString().toLowerCase().includes(this.queryText.toLowerCase()))&&this.contactList.push(t)}):this.contactList=[...this.allContactList],this.contactList.length>0&&(this.selectedContact=this.contactList[0],this.fetchVehicleContactAssignemntAgainstContact(this.selectedContact.id))}backButtonOnclick(){this.location.back()}vehicleDetail(t){this.router.navigate(["vehicleInfoDetail"],{queryParams:{vehicle:JSON.stringify(t),selectedContactId:this.selectedContact.id}})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(p.g),d.Mb(g.a),d.Mb(n.G),d.Mb(i.h),d.Mb(u.d),d.Mb(f.a),d.Mb(S.h))},t.\u0275cmp=d.Gb({type:t,selectors:[["contactListWithVehicleInfo"]],decls:25,vars:8,consts:[["no-border",""],["slot","start"],["slot","start",3,"click"],["name","arrow-back",2,"font-size","30px","color","black"],["size","large",1,"ion-text-center"],[1,"container"],[1,"left"],[2,"position","fixed","width","30%","background-color","white","padding-right","5px","padding-left","3px"],["pInputText","","type","text","placeholder","Search contact",2,"width","70%",3,"ngModel","ngModelChange","keyup.enter"],[2,"padding-left","7px"],["pButton","","pRipple","","type","button","icon","pi pi-search",1,"p-button-rounded","p-button-success",3,"click"],[2,"float","right"],["pButton","","pRipple","","type","button","icon","pi pi-user-plus",1,"p-button-rounded","p-button-info",3,"click"],[2,"padding-top","60px","width","100%"],[3,"click",4,"ngFor","ngForOf"],[1,"vl2","alignright"],["class","right",4,"ngIf"],["class","right","style","background-color: white;",4,"ngIf"],["key","contactList","position","center"],[3,"click"],["name","person-circle-outline",2,"font-size","50px"],[4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-pencil","label","",1,"p-button-rounded","p-button-text",3,"click"],[1,"right"],[2,"position","fixed","width","71%"],["mode","ios","slot","end",1,"my-button",3,"click"],["src","./../../assets/car_add1.png",2,"width","33px","height","33px"],[2,"padding-top","50px","width","100%"],["size","4.5"],[1,"alignleft",2,"text-align","center","width","30%"],[2,"margin","auto"],["name","car-sport-outline",2,"font-size","50px"],[2,"text-align","center"],[1,"alignleft",2,"width","67%"],[1,"vl","alignright"],["size","3.8"],[1,"alignleft",2,"width","97%"],["size","3"],["style","padding: 0px;",4,"ngFor","ngForOf"],["size","1.2",2,"padding-left","0px"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v","label","",1,"p-button-rounded","p-button-text",3,"click"],["appendTo","body",3,"popup","model"],["menu",""],[2,"padding","0px"],[2,"padding-top","2px"],[1,"right",2,"background-color","white"],["style","height: 100%;padding-top: 55px",4,"ngFor","ngForOf"],[2,"height","100%","padding-top","55px"],[2,"background-color","white","height","33.3%","width","100%","max-height","200px","min-height","180px"],["size","5.6",2,"height","99%"],[1,"alignleft",2,"width","100%","padding-left","10px"],["size","0.8",2,"background-color","white"],[1,"hl"],[2,"height","33.3%","max-height","200px","min-height","180px"],[2,"padding-left","10px"],[2,"width","100%","height","30%"],[2,"padding-left","4px"],[2,"width","100%","height","70%"],["style","min-width: 25%;max-width: 25%;",4,"ngFor","ngForOf"],[2,"min-width","25%","max-width","25%"],[2,"padding-top","50%","font-size","20px"]],template:function(t,e){1&t&&(d.Sb(0,"ion-header",0),d.Sb(1,"ion-toolbar"),d.Sb(2,"ion-buttons",1),d.Sb(3,"ion-button",2),d.ac("click",function(){return e.backButtonOnclick()}),d.Sb(4,"h2"),d.Nb(5,"ion-icon",3),d.Rb(),d.Rb(),d.Rb(),d.Sb(6,"ion-title",4),d.Ec(7),d.dc(8,"translate"),d.Rb(),d.Rb(),d.Rb(),d.Sb(9,"ion-content"),d.Sb(10,"div",5),d.Sb(11,"div",6),d.Sb(12,"ion-toolbar",7),d.Sb(13,"input",8),d.ac("ngModelChange",function(t){return e.queryText=t})("keyup.enter",function(){return e.searchByKeyword()}),d.Rb(),d.Sb(14,"span",9),d.Sb(15,"button",10),d.ac("click",function(){return e.searchByKeyword()}),d.Rb(),d.Rb(),d.Sb(16,"span",11),d.Sb(17,"button",12),d.ac("click",function(){return e.contactAddButtonclick()}),d.Rb(),d.Rb(),d.Rb(),d.Sb(18,"ion-list",13),d.Cc(19,L,11,4,"ion-item",14),d.Rb(),d.Rb(),d.Nb(20,"div",15),d.Cc(21,N,6,1,"div",16),d.Cc(22,B,5,1,"div",17),d.Cc(23,_,10,0,"div",17),d.Rb(),d.Nb(24,"p-toast",18),d.Rb()),2&t&&(d.Ab(7),d.Gc(" ",d.ec(8,6,"contactListWithVehicle.title")," "),d.Ab(6),d.jc("ngModel",e.queryText),d.Ab(6),d.jc("ngForOf",e.contactList),d.Ab(2),d.jc("ngIf",e.vehicleList.length>1),d.Ab(1),d.jc("ngIf",1==e.vehicleList.length),d.Ab(1),d.jc("ngIf",0==e.vehicleList.length))},directives:[n.n,n.A,n.e,n.d,n.o,n.z,n.k,o.a,v.a,o.i,o.l,m.b,R.a,n.s,i.k,i.l,A.a,n.q,n.c,n.r,n.j,C.a,n.w,n.m],pipes:[u.c,i.e],styles:[".sticky[_ngcontent-%COMP%]{position:-webkit-sticky;top:0;height:60px}.alignleft[_ngcontent-%COMP%]{float:left}.alignright[_ngcontent-%COMP%]{float:right}.vl[_ngcontent-%COMP%]{border-left:1px solid #050505;height:100px}.vl2[_ngcontent-%COMP%]{border-left:1px solid #a09d9d;height:100%}.hl[_ngcontent-%COMP%]{border-top:1px solid #a09d9d;width:100%;height:1px;background-color:#000}.my-button[_ngcontent-%COMP%]{--background:#white;--background-activated:#white}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;align-items:center;width:50%;margin:auto}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}.left[_ngcontent-%COMP%]{width:30%}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:block;background-color:#fff;overflow-y:scroll}.right[_ngcontent-%COMP%]{width:70%}"]}),t})()}];let W=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[p.k.forChild(D),i.c,o.f,n.B,v.b,m.c,R.b,C.b,u.b,A.b],p.k]}),t})()}}]);