(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0Eai":function(e,t,c){"use strict";c.d(t,"a",function(){return S});var i=c("mrSG"),n=c("fXoL"),a=c("J7/z"),o=c("TEn/"),l=c("7zfz"),s=c("tp0D"),r=c("ofXK"),b=c("Gxio"),h=c("sYmb");function d(e,t){if(1&e&&(n.Rb(0,"ion-item",5),n.Rb(1,"ion-label"),n.Rb(2,"h2"),n.Dc(3),n.cc(4,"translate"),n.Rb(5,"b"),n.Dc(6),n.cc(7,"date"),n.Qb(),n.Qb(),n.Rb(8,"h2"),n.Dc(9),n.cc(10,"translate"),n.Rb(11,"b"),n.Dc(12),n.cc(13,"date"),n.Qb(),n.Qb(),n.Rb(14,"h2"),n.Dc(15),n.cc(16,"translate"),n.Rb(17,"b"),n.Dc(18),n.cc(19,"translate"),n.Qb(),n.Qb(),n.Rb(20,"h2"),n.Dc(21),n.cc(22,"translate"),n.Rb(23,"b"),n.Dc(24),n.cc(25,"translate"),n.Qb(),n.Qb(),n.Rb(26,"h2"),n.Dc(27),n.cc(28,"translate"),n.Rb(29,"b"),n.Dc(30),n.cc(31,"translate"),n.Qb(),n.Qb(),n.Rb(32,"h2"),n.Dc(33),n.cc(34,"translate"),n.Rb(35,"b"),n.Dc(36),n.Qb(),n.Qb(),n.Rb(37,"p"),n.Dc(38),n.cc(39,"translate"),n.Qb(),n.Qb(),n.Qb()),2&e){const e=t.$implicit;n.Ab(3),n.Fc("",n.dc(4,17,"accountDetail.accOpenDate")," :"),n.Ab(3),n.Fc(" ",n.ec(7,19,e.openDate,"dd/MM/yyyy hh:mm a"),""),n.Ab(3),n.Fc("",n.dc(10,22,"accountDetail.accCloseDate")," :"),n.Ab(3),n.Fc(" ",n.ec(13,24,e.closeDate,"dd/MM/yyyy hh:mm a"),""),n.Ab(3),n.Fc("",n.dc(16,27,"accountDetail.totalAmount")," :"),n.Ab(3),n.Gc(" ",e.totalBillAmount," ",n.dc(19,29,"rs"),""),n.Ab(3),n.Fc("",n.dc(22,31,"accountDetail.amountReceived")," :"),n.Ab(3),n.Gc(" ",e.receivedAmount," ",n.dc(25,33,"rs"),""),n.Ab(3),n.Fc("",n.dc(28,35,"accountDetail.pendingAmount")," :"),n.Ab(3),n.Gc(" ",e.pendingAmount," ",n.dc(31,37,"rs"),""),n.Ab(3),n.Fc("",n.dc(34,39,"accountDetail.rentPlan")," :"),n.Ab(3),n.Fc(" ",e.rentPlan_lookup.rentPlan,""),n.Ab(2),n.Gc("",n.dc(39,41,"accountDetail.accAddBy")," : ",e.accountAddedBy,"")}}let u=(()=>{class e{constructor(e,t,c,i,n){this.dialogService=e,this.config=t,this.popoverController=c,this.messageService=i,this.dbprovider=n,this.tableName="account",this.vehicleTableName="vehicle",this.accountList=[],this.selectedVehicle=JSON.parse(JSON.stringify(t.data.vehicle)),this.fetchAccounts()}fetchAccounts(){this.dbprovider.fetchChildDocsWithRelationshipByParentTypeAndId(this.tableName,this.vehicleTableName,this.selectedVehicle.id,!0,{masterandlookupreference:["rentPlan"]}).then(e=>{console.log(e),e&&"SUCCESS"==e.status?this.accountList=e.records:this.messageService.add({key:"accountHistory",severity:"error",summary:e.message,detail:""})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(a.a),n.Lb(a.b),n.Lb(o.H),n.Lb(l.h),n.Lb(s.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["accountHistory"]],decls:6,vars:2,consts:[[2,"height","400px"],["size","large",1,"ion-text-center"],[2,"width","100%"],["lines","full",4,"ngFor","ngForOf"],["key","accountHistory","position","center"],["lines","full"]],template:function(e,t){1&e&&(n.Rb(0,"ion-content",0),n.Rb(1,"ion-title",1),n.Dc(2),n.Qb(),n.Rb(3,"ion-list",2),n.Bc(4,d,40,43,"ion-item",3),n.Qb(),n.Mb(5,"p-toast",4),n.Qb()),2&e&&(n.Ab(2),n.Fc(" ",t.selectedVehicle.vehicleBrand+" "+t.selectedVehicle.vehicleModel+" "+t.selectedVehicle.vehicleNumber," "),n.Ab(2),n.ic("ngForOf",t.accountList))},directives:[o.l,o.A,o.t,r.j,b.a,o.r,o.s],pipes:[h.c,r.d],styles:[""]}),e})();var m=c("mouh"),v=c("tyNb"),g=c("Nf9I"),p=c("jIHw");function f(e,t){if(1&e&&(n.Rb(0,"ion-title",8),n.Dc(1),n.Qb()),2&e){const e=n.bc();n.Ab(1),n.Fc(" ",e.selectedVehicle.vehicleBrand+" "+e.selectedVehicle.vehicleModel+" "+e.selectedVehicle.vehicleNumber," ")}}function y(e,t){if(1&e&&(n.Rb(0,"div"),n.Rb(1,"ion-item",9),n.Rb(2,"ion-label"),n.Dc(3),n.cc(4,"translate"),n.Qb(),n.Rb(5,"h5"),n.Dc(6),n.Qb(),n.Qb(),n.Rb(7,"ion-item",9),n.Rb(8,"ion-label"),n.Dc(9),n.cc(10,"translate"),n.Qb(),n.Rb(11,"h5"),n.Dc(12),n.cc(13,"translate"),n.Qb(),n.Qb(),n.Rb(14,"ion-item",9),n.Rb(15,"ion-label"),n.Dc(16),n.cc(17,"translate"),n.Qb(),n.Rb(18,"h5"),n.Dc(19),n.cc(20,"translate"),n.Qb(),n.Qb(),n.Rb(21,"ion-item",9),n.Rb(22,"ion-label"),n.Dc(23),n.cc(24,"translate"),n.Qb(),n.Rb(25,"h5"),n.Dc(26),n.cc(27,"translate"),n.Qb(),n.Qb(),n.Rb(28,"ion-item",9),n.Rb(29,"ion-label"),n.Dc(30),n.cc(31,"translate"),n.Qb(),n.Rb(32,"h5"),n.Dc(33),n.cc(34,"date"),n.Qb(),n.Qb(),n.Rb(35,"ion-item",9),n.Rb(36,"ion-label"),n.Dc(37),n.cc(38,"translate"),n.Qb(),n.Rb(39,"h5"),n.Dc(40),n.cc(41,"date"),n.Qb(),n.Qb(),n.Rb(42,"ion-item",9),n.Rb(43,"ion-label"),n.Dc(44),n.cc(45,"translate"),n.Qb(),n.Rb(46,"h5"),n.Dc(47,"Security 1"),n.Qb(),n.Qb(),n.Qb()),2&e){const e=n.bc();n.Ab(3),n.Ec(n.dc(4,16,"accountDetail.rentPlan")),n.Ab(3),n.Ec(e.selectedAccount.rentPlan_lookup.rentPlan),n.Ab(3),n.Ec(n.dc(10,18,"accountDetail.totalAmount")),n.Ab(3),n.Gc("",e.selectedAccount.totalBillAmount," ",n.dc(13,20,"rs"),""),n.Ab(4),n.Ec(n.dc(17,22,"accountDetail.amountReceived")),n.Ab(3),n.Gc("",e.selectedAccount.receivedAmount," ",n.dc(20,24,"rs"),""),n.Ab(4),n.Ec(n.dc(24,26,"accountDetail.pendingAmount")),n.Ab(3),n.Gc("",e.selectedAccount.totalBillAmount-e.selectedAccount.receivedAmount," ",n.dc(27,28,"rs"),""),n.Ab(4),n.Ec(n.dc(31,30,"accountDetail.accOpenDate")),n.Ab(3),n.Ec(n.ec(34,32,e.selectedAccount.openDate,"dd/MM/yyyy hh:mm a")),n.Ab(4),n.Ec(n.dc(38,35,"accountDetail.accCloseDate")),n.Ab(3),n.Ec(n.ec(41,37,e.selectedAccount.closeDate,"dd/MM/yyyy hh:mm a")),n.Ab(4),n.Ec(n.dc(45,40,"accountDetail.accAddBy"))}}function R(e,t){1&e&&(n.Rb(0,"div"),n.Mb(1,"br"),n.Mb(2,"div"),n.Rb(3,"div",5),n.Rb(4,"ion-label"),n.Dc(5,"Active account not available. Create new account."),n.Qb(),n.Qb(),n.Qb())}function A(e,t){if(1&e){const e=n.Sb();n.Rb(0,"span",10),n.Rb(1,"button",11),n.Zb("click",function(){return n.vc(e),n.bc().createAccount()}),n.Qb(),n.Qb()}}function N(e,t){if(1&e){const e=n.Sb();n.Rb(0,"span",12),n.Rb(1,"button",13),n.Zb("click",function(){return n.vc(e),n.bc().closeAccount()}),n.Qb(),n.Rb(2,"button",14),n.Zb("click",function(){return n.vc(e),n.bc().accountHistory()}),n.cc(3,"translate"),n.Qb(),n.Qb()}2&e&&(n.Ab(2),n.jc("label",n.dc(3,1,"history")))}function Q(e,t){if(1&e){const e=n.Sb();n.Rb(0,"span",12),n.Rb(1,"button",15),n.Zb("click",function(){return n.vc(e),n.bc().createAccount()}),n.Qb(),n.Rb(2,"button",14),n.Zb("click",function(){return n.vc(e),n.bc().accountHistory()}),n.cc(3,"translate"),n.Qb(),n.Qb()}2&e&&(n.Ab(2),n.jc("label",n.dc(3,1,"history")))}let S=(()=>{class e{constructor(e,t,c,i,n,a,o,l){this.confirmationService=e,this.router=t,this.popoverController=c,this.translate=i,this.dialogService=n,this.messageService=a,this.dbprovider=o,this.config=l,this.tableName="account",this.vehicleTableName="vehicle",this.savedSuccessMessage="Account closed sucessfully",this.accountList=[],this.selectedVehicle=JSON.parse(JSON.stringify(l.data.vehicle)),this.fetchAccounts()}accountHistory(){return Object(i.a)(this,void 0,void 0,function*(){console.log("history"),this.dialogService.open(u,{header:this.translate.instant("accountHistory.title"),width:"50%",data:{vehicle:this.selectedVehicle}})})}createAccount(){console.log("account creation"),this.dialogService.open(m.a,{header:this.translate.instant("accountCreation.title"),width:"50%",data:{vehicle:this.selectedVehicle}}).onClose.subscribe(e=>{e&&"SUCCESS"==e&&this.fetchAccounts()})}closeAccount(){console.log("close call"),this.confirmationService.confirm({message:"Are you sure that you want to close this account?",accept:()=>{this.selectedAccount.closeDate=(new Date).getTime(),this.dbprovider.save(this.tableName,this.selectedAccount).then(e=>{"SUCCESS"==e.status?(this.messageService.add({key:"accountDetail",severity:"success",summary:this.savedSuccessMessage,detail:""}),this.fetchAccounts()):this.messageService.add({key:"accountDetail",severity:"error",summary:e.message,detail:"",closable:!0})}).catch(e=>{console.log(e)})}})}fetchAccounts(){this.selectedAccount=null,this.dbprovider.fetchChildDocsWithRelationshipByParentTypeAndId(this.tableName,this.vehicleTableName,this.selectedVehicle.id,!0,{masterandlookupreference:["rentPlan"]}).then(e=>{console.log(e),e&&"SUCCESS"==e.status?(e.records.length>0&&e.records.forEach(e=>{e.closeDate||(this.selectedAccount=e)}),this.accountList=e.records):this.messageService.add({key:"accountDetail",severity:"error",summary:e.message,detail:""})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(l.b),n.Lb(v.g),n.Lb(o.H),n.Lb(h.d),n.Lb(a.a),n.Lb(l.h),n.Lb(s.a),n.Lb(a.b))},e.\u0275cmp=n.Fb({type:e,selectors:[["accountDetail"]],decls:10,vars:6,consts:[[2,"height","400px"],["size","large","class","ion-text-center",4,"ngIf"],[4,"ngIf"],["key","accountDetail","position","center"],["header","Confirmation","icon","pi pi-exclamation-triangle"],[2,"text-align","center"],["class","p-buttonset","style","text-align: center;",4,"ngIf"],["class","p-buttonset",4,"ngIf"],["size","large",1,"ion-text-center"],["lines","full"],[1,"p-buttonset",2,"text-align","center"],["pButton","","type","button","label","Create New account","icon","pi pi-plus",3,"click"],[1,"p-buttonset"],["pButton","","type","button","label","Close account","icon","pi pi-times-circle",2,"float","left",3,"click"],["pButton","","type","button","icon","pi pi-clock",2,"float","right",3,"label","click"],["pButton","","type","button","label","Create New account","icon","pi pi-plus",2,"float","left",3,"click"]],template:function(e,t){1&e&&(n.Rb(0,"ion-content",0),n.Bc(1,f,2,1,"ion-title",1),n.Bc(2,y,48,42,"div",2),n.Bc(3,R,6,0,"div",2),n.Mb(4,"p-toast",3),n.Mb(5,"p-confirmDialog",4),n.Qb(),n.Rb(6,"ion-footer",5),n.Bc(7,A,2,0,"span",6),n.Bc(8,N,4,3,"span",7),n.Bc(9,Q,4,3,"span",7),n.Qb()),2&e&&(n.Ab(1),n.ic("ngIf",t.selectedVehicle),n.Ab(1),n.ic("ngIf",t.selectedAccount),n.Ab(1),n.ic("ngIf",!t.selectedAccount),n.Ab(4),n.ic("ngIf",!t.selectedAccount&&0==t.accountList.length),n.Ab(1),n.ic("ngIf",t.selectedAccount&&t.accountList.length>0),n.Ab(1),n.ic("ngIf",!t.selectedAccount&&t.accountList.length>0))},directives:[o.l,r.k,b.a,g.a,o.m,o.A,o.r,o.s,p.b],pipes:[h.c,r.d],styles:["ion-footer.footer-md[_ngcontent-%COMP%]:before{background-image:none}"]}),e})()},VqLa:function(e,t,c){"use strict";c.d(t,"a",function(){return h});var i=c("fXoL"),n=c("tyNb"),a=c("sYmb"),o=c("TEn/"),l=c("ofXK");function s(e,t){if(1&e&&(i.Rb(0,"h2"),i.Dc(1),i.Qb()),2&e){const e=i.bc().$implicit;i.Ab(1),i.Ec(e.contactName)}}function r(e,t){if(1&e&&(i.Rb(0,"h2"),i.Dc(1),i.Qb()),2&e){const e=i.bc().$implicit;i.Ab(1),i.Ec(e.contactNameInTamil)}}function b(e,t){if(1&e){const e=i.Sb();i.Rb(0,"ion-item",3),i.Zb("click",function(c){i.vc(e);const n=t.$implicit;return i.bc().itemSelect(n),c.stopPropagation()}),i.Rb(1,"ion-avatar",4),i.Mb(2,"ion-icon",5),i.Qb(),i.Rb(3,"ion-label"),i.Bc(4,s,2,1,"h2",6),i.Bc(5,r,2,1,"h2",6),i.Rb(6,"h3"),i.Dc(7),i.Qb(),i.Rb(8,"p"),i.Dc(9),i.Qb(),i.Rb(10,"p"),i.Dc(11),i.Qb(),i.Qb(),i.Qb()}if(2&e){const e=t.$implicit,c=i.bc();i.Ab(4),i.ic("ngIf",c.appLanguage&&"en"==c.appLanguage),i.Ab(1),i.ic("ngIf",c.appLanguage&&"ta"==c.appLanguage),i.Ab(2),i.Ec(e.contactMobile),i.Ab(2),i.Fc("DL : ",e.licenseNumber,""),i.Ab(2),i.Fc("Added By : ",e.securityName,"")}}let h=(()=>{class e{constructor(e,t){this.router=e,this.translate=t,this.contactList=[],this.appLanguage="ta",this.appLanguage=this.translate.getDefaultLang(),this.contactList=[{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",licenseNumber:"TN6958484848574",securityName:"Security1",selected:1},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",licenseNumber:"TN6958484848574",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",licenseNumber:"TN6958484848574",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",licenseNumber:"TN6958484848574",securityName:"Security1",selected:0},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",licenseNumber:"TN6958484848574",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",licenseNumber:"TN6958484848574",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",licenseNumber:"TN6958484848574",securityName:"Security1",selected:0}]}itemSelect(e){}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(n.g),i.Lb(a.d))},e.\u0275cmp=i.Fb({type:e,selectors:[["contactListAgainstCar"]],decls:11,vars:4,consts:[["size","large",1,"ion-text-center"],[2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],["name","person-circle-outline",2,"font-size","50px"],[4,"ngIf"]],template:function(e,t){1&e&&(i.Rb(0,"ion-header"),i.Rb(1,"ion-toolbar"),i.Rb(2,"ion-title",0),i.Dc(3),i.cc(4,"translate"),i.Qb(),i.Qb(),i.Qb(),i.Rb(5,"ion-content"),i.Rb(6,"ion-title",0),i.Dc(7," Tata Tiago - TN 69 AB1234 "),i.Qb(),i.Rb(8,"ion-row"),i.Rb(9,"ion-list",1),i.Bc(10,b,12,5,"ion-item",2),i.Qb(),i.Qb(),i.Qb()),2&e&&(i.Ab(3),i.Fc(" ",i.dc(4,2,"contactList.title")," "),i.Ab(7),i.ic("ngForOf",t.contactList))},directives:[o.o,o.B,o.A,o.l,o.x,o.t,l.j,o.r,o.c,o.p,o.s,l.k],pipes:[a.c],styles:[""]}),e})()},XqSU:function(e,t,c){"use strict";c.d(t,"a",function(){return R});var i=c("mrSG"),n=c("3Pt+"),a=c("fXoL"),o=c("tyNb"),l=c("27b0"),s=c("tp0D"),r=c("7zfz"),b=c("J7/z"),h=c("TEn/"),d=c("Gxio"),u=c("sYmb");let m=(()=>{class e{constructor(e,t,c,i,n,a,o){this.router=e,this.dbconfig=t,this.formBuilder=c,this.dbprovider=i,this.messageService=n,this.ref=a,this.config=o,this.alternateVehicleObj={},this.vehicleObj={},this.contactId="",this.vehicleId="",this.tableName="alternateVehicle",this.savedSuccessMessage="Data saved sucessfully",this.vehicleObj=JSON.parse(JSON.stringify(o.data.vehicle)),"edit"==o.data.mode?this.alternateVehicleObj=JSON.parse(JSON.stringify(o.data.object)):this.initializeObjects(this.dbconfig.configuration.tableStructure),this.createFormGroup(),this.contactId=this.config.data.contactId}initializeObjects(e){this.alternateVehicleObj=JSON.parse(JSON.stringify(e[this.tableName])),this.alternateVehicleObj.vehicleType="bike"}createFormGroup(){this.formGroup=this.formBuilder.group({vehicle:this.formBuilder.group({vehicleType:["",n.o.compose([n.o.required])],vehicleBrand:[""],vehicleModel:[""],vehicleColor:[""],vehicleNumber:["",n.o.compose([n.o.required])]})})}saveAction(){console.log(this.alternateVehicleObj),this.formGroup.patchValue({vehicle:{vehicleType:this.alternateVehicleObj.vehicleType,vehicleBrand:this.alternateVehicleObj.vehicleBrand,vehicleModel:this.alternateVehicleObj.vehicleModel,vehicleColor:this.alternateVehicleObj.vehicleColor,vehicleNumber:this.alternateVehicleObj.vehicleNumber.toUpperCase()}}),this.alternateVehicleObj.vehicle=this.vehicleObj.id,this.formGroup.valid?this.alreadyExistValidation().then(e=>{e?this.messageService.add({key:"alternateVehicleEntry",severity:"error",summary:"Vehicle number already exist",detail:"",closable:!0}):this.dbprovider.save(this.tableName,this.alternateVehicleObj).then(e=>{"SUCCESS"==e.status?(this.messageService.add({key:"alternateVehicleEntry",severity:"success",summary:this.savedSuccessMessage,detail:""}),this.vehicleId=e.id,setTimeout(()=>this.ref.close("SUCCESS"),1e3)):this.messageService.add({key:"alternateVehicleEntry",severity:"error",summary:e.message,detail:"",closable:!0})}).catch(e=>{console.log(e),this.messageService.add({key:"alternateVehicleEntry",severity:"error",summary:e,detail:""})})}):this.messageService.add({key:"alternateVehicleEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}alreadyExistValidation(){var e=!1;return"edit"==this.config.data.mode&&this.alternateVehicleObj.vehicleNumber.toUpperCase()==this.config.data.object.vehicleNumber.toUpperCase()?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.vehicleNumber":this.alternateVehicleObj.vehicleNumber.toUpperCase(),"data.type":this.tableName},sort:["data.vehicleNumber"]}).then(t=>("SUCCESS"==t.status&&t.records.length>0&&(e=!0),e))}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(o.g),a.Lb(l.a),a.Lb(n.b),a.Lb(s.a),a.Lb(r.h),a.Lb(b.d),a.Lb(b.b))},e.\u0275cmp=a.Fb({type:e,selectors:[["alternateVehicleEntry"]],decls:50,vars:36,consts:[[2,"height","400px"],[2,"height","100%",3,"formGroup"],["lines","full","formGroupName","vehicle"],["value","bike","mode","md","formControlName","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["value","bike"],["value","car"],["value","auto"],["value","others"],["position","floating"],["type","text","formControlName","vehicleBrand",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleModel",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleColor",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleNumber","required","",3,"ngModel","ngModelChange"],["type","submit","color","danger","expand","block",3,"click"],["key","alternateVehicleEntry","position","center"]],template:function(e,t){1&e&&(a.Rb(0,"ion-content",0),a.Rb(1,"form",1),a.Rb(2,"ion-item",2),a.Rb(3,"ion-radio-group",3),a.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleType=e}),a.Rb(4,"ion-label"),a.Dc(5),a.cc(6,"translate"),a.Qb(),a.Rb(7,"ion-item"),a.Mb(8,"ion-radio",4),a.Rb(9,"ion-label"),a.Dc(10),a.cc(11,"translate"),a.Qb(),a.Mb(12,"ion-radio",5),a.Rb(13,"ion-label"),a.Dc(14),a.cc(15,"translate"),a.Qb(),a.Mb(16,"ion-radio",6),a.Rb(17,"ion-label"),a.Dc(18),a.cc(19,"translate"),a.Qb(),a.Mb(20,"ion-radio",7),a.Rb(21,"ion-label"),a.Dc(22),a.cc(23,"translate"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(24,"ion-item",2),a.Rb(25,"ion-label",8),a.Dc(26),a.cc(27,"translate"),a.Qb(),a.Rb(28,"ion-input",9),a.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleBrand=e}),a.Qb(),a.Qb(),a.Rb(29,"ion-item",2),a.Rb(30,"ion-label",8),a.Dc(31),a.cc(32,"translate"),a.Qb(),a.Rb(33,"ion-input",10),a.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleModel=e}),a.Qb(),a.Qb(),a.Rb(34,"ion-item",2),a.Rb(35,"ion-label",8),a.Dc(36),a.cc(37,"translate"),a.Qb(),a.Rb(38,"ion-input",11),a.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleColor=e}),a.Qb(),a.Qb(),a.Rb(39,"ion-item",2),a.Rb(40,"ion-label",8),a.Dc(41),a.cc(42,"translate"),a.Qb(),a.Rb(43,"ion-input",12),a.Zb("ngModelChange",function(e){return t.alternateVehicleObj.vehicleNumber=e}),a.Qb(),a.Qb(),a.Rb(44,"ion-row"),a.Rb(45,"ion-col"),a.Rb(46,"ion-button",13),a.Zb("click",function(){return t.saveAction()}),a.Dc(47),a.cc(48,"translate"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Mb(49,"p-toast",14),a.Qb()),2&e&&(a.Ab(1),a.ic("formGroup",t.formGroup),a.Ab(2),a.ic("ngModel",t.alternateVehicleObj.vehicleType),a.Ab(2),a.Ec(a.dc(6,16,"vehicleEntry.vehicleType")),a.Ab(5),a.Ec(a.dc(11,18,"vehicleEntry.bike")),a.Ab(4),a.Ec(a.dc(15,20,"vehicleEntry.car")),a.Ab(4),a.Ec(a.dc(19,22,"vehicleEntry.auto")),a.Ab(4),a.Ec(a.dc(23,24,"vehicleEntry.others")),a.Ab(4),a.Fc("",a.dc(27,26,"vehicleEntry.vehicleBrand")," "),a.Ab(2),a.ic("ngModel",t.alternateVehicleObj.vehicleBrand),a.Ab(3),a.Ec(a.dc(32,28,"vehicleEntry.vehicleModel")),a.Ab(2),a.ic("ngModel",t.alternateVehicleObj.vehicleModel),a.Ab(3),a.Ec(a.dc(37,30,"vehicleEntry.vehicleColor")),a.Ab(2),a.ic("ngModel",t.alternateVehicleObj.vehicleColor),a.Ab(3),a.Ec(a.dc(42,32,"vehicleEntry.vehicleNumber")),a.Ab(2),a.ic("ngModel",t.alternateVehicleObj.vehicleNumber),a.Ab(4),a.Ec(a.dc(48,34,"save")))},directives:[h.l,n.p,n.j,n.d,h.r,n.e,h.v,h.J,n.i,n.c,h.s,h.u,h.I,h.q,h.K,n.n,h.x,h.k,h.d,d.a],pipes:[u.c],styles:[""]}),e})();var v=c("ofXK"),g=c("jIHw");function p(e,t){if(1&e){const e=a.Sb();a.Rb(0,"ion-item",7),a.Zb("click",function(c){a.vc(e);const i=t.$implicit;return a.bc().itemSelect(i),c.stopPropagation()}),a.Rb(1,"ion-avatar",8),a.Mb(2,"ion-icon",9),a.Qb(),a.Rb(3,"ion-label"),a.Rb(4,"h3"),a.Dc(5),a.Qb(),a.Rb(6,"h2"),a.Dc(7),a.Qb(),a.Rb(8,"h2"),a.Rb(9,"b"),a.Dc(10),a.Qb(),a.Qb(),a.Rb(11,"h2"),a.Dc(12),a.Qb(),a.Rb(13,"p"),a.Dc(14),a.Qb(),a.Qb(),a.Qb()}if(2&e){const e=t.$implicit;a.Ab(5),a.Ec(e.vehicleType),a.Ab(2),a.Gc("",e.vehicleBrand," ",e.vehicleModel," "),a.Ab(3),a.Ec(e.vehicleNumber),a.Ab(2),a.Ec(e.vehicleColor),a.Ab(2),a.Fc("Added By : ",e.addedBy,"")}}function f(e,t){if(1&e){const e=a.Sb();a.Rb(0,"div"),a.Mb(1,"br"),a.Mb(2,"div"),a.Rb(3,"div",10),a.Rb(4,"ion-label"),a.Dc(5,"Alternate vehicle not available."),a.Qb(),a.Mb(6,"br"),a.Mb(7,"br"),a.Rb(8,"button",11),a.Zb("click",function(){return a.vc(e),a.bc().createAlternateVehicle()}),a.Qb(),a.Qb(),a.Qb()}}function y(e,t){if(1&e){const e=a.Sb();a.Rb(0,"ion-footer",10),a.Rb(1,"span",12),a.Rb(2,"button",11),a.Zb("click",function(){return a.vc(e),a.bc().createAlternateVehicle()}),a.Qb(),a.Qb(),a.Qb()}}let R=(()=>{class e{constructor(e,t,c,i,n,a,o){this.router=e,this.popoverController=t,this.translate=c,this.messageService=i,this.dbprovider=n,this.config=a,this.dialogService=o,this.vehicleList=[],this.tableName="alternateVehicle",this.vehicleTableName="vehicle",this.selectedVehicle=JSON.parse(JSON.stringify(a.data.vehicle)),this.fetchAlternateVehicles()}createAlternateVehicle(){return Object(i.a)(this,void 0,void 0,function*(){console.log("alternate vehicle detail"),this.dialogService.open(m,{header:this.translate.instant("alternateVehicle.title"),width:"50%",data:{vehicle:this.selectedVehicle,object:"",mode:"new"}}).onClose.subscribe(e=>{this.fetchAlternateVehicles()})})}fetchAlternateVehicles(){this.dbprovider.fetchDocsWithoutRelationshipByParentTypeAndId(this.tableName,this.vehicleTableName,this.selectedVehicle.id).then(e=>{console.log(e),e&&"SUCCESS"==e.status?this.vehicleList=e.records:this.messageService.add({key:"alternateVehicleList",severity:"error",summary:e.message,detail:""})})}itemSelect(e){this.dialogService.open(m,{header:this.translate.instant("alternateVehicle.title"),width:"50%",data:{vehicle:this.selectedVehicle,object:e,mode:"edit"}}).onClose.subscribe(e=>{this.fetchAlternateVehicles()})}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(o.g),a.Lb(h.H),a.Lb(u.d),a.Lb(r.h),a.Lb(s.a),a.Lb(b.b),a.Lb(b.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["alternateVehicleList"]],decls:9,vars:4,consts:[[2,"height","400px"],["size","large",1,"ion-text-center"],[2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["key","alternateVehicleList","position","center"],["style","text-align: center;",4,"ngIf"],[3,"click"],["slot","start"],["name","car-sport-outline",2,"font-size","50px"],[2,"text-align","center"],["pButton","","type","button","label","Create alternate vehicle","icon","pi pi-plus",3,"click"],[1,"p-buttonset",2,"text-align","center"]],template:function(e,t){1&e&&(a.Rb(0,"ion-content",0),a.Rb(1,"ion-title",1),a.Dc(2),a.Qb(),a.Rb(3,"ion-row"),a.Rb(4,"ion-list",2),a.Bc(5,p,15,6,"ion-item",3),a.Qb(),a.Qb(),a.Bc(6,f,9,0,"div",4),a.Mb(7,"p-toast",5),a.Qb(),a.Bc(8,y,3,0,"ion-footer",6)),2&e&&(a.Ab(2),a.Fc(" ",t.selectedVehicle.vehicleBrand+" "+t.selectedVehicle.vehicleModel+" "+t.selectedVehicle.vehicleNumber," "),a.Ab(3),a.ic("ngForOf",t.vehicleList),a.Ab(1),a.ic("ngIf",0==t.vehicleList.length),a.Ab(2),a.ic("ngIf",t.vehicleList.length>0))},directives:[h.l,h.A,h.x,h.t,v.j,v.k,d.a,h.r,h.c,h.p,h.s,g.b,h.m],styles:["ion-footer.footer-md[_ngcontent-%COMP%]:before{background-image:none}"]}),e})()},eKwt:function(e,t,c){"use strict";c.d(t,"a",function(){return u});var i=c("3Pt+"),n=c("fXoL"),a=c("tyNb"),o=c("27b0"),l=c("tp0D"),s=c("7zfz"),r=c("J7/z"),b=c("TEn/"),h=c("Gxio"),d=c("sYmb");let u=(()=>{class e{constructor(e,t,c,i,n,a,o){this.router=e,this.dbconfig=t,this.formBuilder=c,this.dbprovider=i,this.messageService=n,this.ref=a,this.config=o,this.vehicleObj={},this.vehicleandContactAssgObj={},this.contactId="",this.vehicleId="",this.tableName="vehicle",this.assignmenttableName="vehicleContactAssignment",this.savedSuccessMessage="Data saved sucessfully","edit"==o.data.mode?this.vehicleObj=JSON.parse(JSON.stringify(o.data.object)):(this.initializeObjects(this.dbconfig.configuration.tableStructure),this.initializeAssignmentObjects(this.dbconfig.configuration.tableStructure)),this.createFormGroup(),this.contactId=this.config.data.contactId}initializeObjects(e){this.vehicleObj=JSON.parse(JSON.stringify(e[this.tableName])),this.vehicleObj.vehicleType="car"}initializeAssignmentObjects(e){this.vehicleandContactAssgObj=JSON.parse(JSON.stringify(e[this.assignmenttableName]))}createFormGroup(){this.formGroup=this.formBuilder.group({vehicle:this.formBuilder.group({vehicleType:["",i.o.compose([i.o.required])],vehicleBrand:[""],vehicleModel:[""],vehicleColor:[""],vehicleNumber:["",i.o.compose([i.o.required])]})})}saveAction(){console.log(this.vehicleObj),this.formGroup.patchValue({vehicle:{vehicleType:this.vehicleObj.vehicleType,vehicleBrand:this.vehicleObj.vehicleBrand,vehicleModel:this.vehicleObj.vehicleModel,vehicleColor:this.vehicleObj.vehicleColor,vehicleNumber:this.vehicleObj.vehicleNumber.toUpperCase()}}),this.formGroup.valid?this.alreadyExistValidation().then(e=>{e?this.messageService.add({key:"vehicleEntry",severity:"error",summary:"Vehicle number already exist",detail:"",closable:!0}):this.dbprovider.save(this.tableName,this.vehicleObj).then(e=>{"SUCCESS"==e.status?(this.messageService.add({key:"vehicleEntry",severity:"success",summary:this.savedSuccessMessage,detail:""}),this.vehicleId=e.id,"edit"!=this.config.data.mode?this.saveContactAndVehicleAssignment():setTimeout(()=>this.ref.close("SUCCESS"),1e3)):this.messageService.add({key:"vehicleEntry",severity:"error",summary:e.message,detail:"",closable:!0})}).catch(e=>{console.log(e),this.messageService.add({key:"vehicleEntry",severity:"error",summary:e,detail:""})})}):this.messageService.add({key:"vehicleEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}alreadyExistValidation(){var e=!1;return"edit"==this.config.data.mode&&this.vehicleObj.vehicleNumber.toUpperCase()==this.config.data.object.vehicleNumber.toUpperCase()?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.vehicleNumber":this.vehicleObj.vehicleNumber.toUpperCase(),"data.type":this.tableName},sort:["data.vehicleNumber"]}).then(t=>("SUCCESS"==t.status&&t.records.length>0&&(e=!0),e))}saveContactAndVehicleAssignment(){this.vehicleandContactAssgObj.contact_lookup=this.contactId,this.vehicleandContactAssgObj.vehicle_lookup=this.vehicleId,console.log(this.vehicleandContactAssgObj),this.dbprovider.save(this.assignmenttableName,this.vehicleandContactAssgObj).then(e=>{console.log(e),"SUCCESS"!=e.status?console.log("Vehicle assignment save failed",e):console.log("Vehicle assignment save Success"),setTimeout(()=>this.ref.close("SUCCESS"),1e3)})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(a.g),n.Lb(o.a),n.Lb(i.b),n.Lb(l.a),n.Lb(s.h),n.Lb(r.d),n.Lb(r.b))},e.\u0275cmp=n.Fb({type:e,selectors:[["vehicleEntry"]],decls:46,vars:33,consts:[[2,"height","450px"],[2,"height","100%",3,"formGroup"],["lines","full","formGroupName","vehicle"],["value","car","mode","md","formControlName","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["value","car"],["value","auto"],["value","others"],["position","floating"],["type","text","formControlName","vehicleBrand",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleModel",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleColor",3,"ngModel","ngModelChange"],["type","text","formControlName","vehicleNumber","required","",3,"ngModel","ngModelChange"],["type","submit","color","danger","expand","block",3,"click"],["key","vehicleEntry","position","center"]],template:function(e,t){1&e&&(n.Rb(0,"ion-content",0),n.Rb(1,"form",1),n.Rb(2,"ion-item",2),n.Rb(3,"ion-radio-group",3),n.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleType=e}),n.Rb(4,"ion-label"),n.Dc(5),n.cc(6,"translate"),n.Qb(),n.Rb(7,"ion-item"),n.Mb(8,"ion-radio",4),n.Rb(9,"ion-label"),n.Dc(10),n.cc(11,"translate"),n.Qb(),n.Mb(12,"ion-radio",5),n.Rb(13,"ion-label"),n.Dc(14),n.cc(15,"translate"),n.Qb(),n.Mb(16,"ion-radio",6),n.Rb(17,"ion-label"),n.Dc(18),n.cc(19,"translate"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(20,"ion-item",2),n.Rb(21,"ion-label",7),n.Dc(22),n.cc(23,"translate"),n.Qb(),n.Rb(24,"ion-input",8),n.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleBrand=e}),n.Qb(),n.Qb(),n.Rb(25,"ion-item",2),n.Rb(26,"ion-label",7),n.Dc(27),n.cc(28,"translate"),n.Qb(),n.Rb(29,"ion-input",9),n.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleModel=e}),n.Qb(),n.Qb(),n.Rb(30,"ion-item",2),n.Rb(31,"ion-label",7),n.Dc(32),n.cc(33,"translate"),n.Qb(),n.Rb(34,"ion-input",10),n.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleColor=e}),n.Qb(),n.Qb(),n.Rb(35,"ion-item",2),n.Rb(36,"ion-label",7),n.Dc(37),n.cc(38,"translate"),n.Qb(),n.Rb(39,"ion-input",11),n.Zb("ngModelChange",function(e){return t.vehicleObj.vehicleNumber=e}),n.Qb(),n.Qb(),n.Rb(40,"ion-row"),n.Rb(41,"ion-col"),n.Rb(42,"ion-button",12),n.Zb("click",function(){return t.saveAction()}),n.Dc(43),n.cc(44,"translate"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Mb(45,"p-toast",13),n.Qb()),2&e&&(n.Ab(1),n.ic("formGroup",t.formGroup),n.Ab(2),n.ic("ngModel",t.vehicleObj.vehicleType),n.Ab(2),n.Ec(n.dc(6,15,"vehicleEntry.vehicleType")),n.Ab(5),n.Ec(n.dc(11,17,"vehicleEntry.car")),n.Ab(4),n.Ec(n.dc(15,19,"vehicleEntry.auto")),n.Ab(4),n.Ec(n.dc(19,21,"vehicleEntry.others")),n.Ab(4),n.Fc("",n.dc(23,23,"vehicleEntry.vehicleBrand")," "),n.Ab(2),n.ic("ngModel",t.vehicleObj.vehicleBrand),n.Ab(3),n.Ec(n.dc(28,25,"vehicleEntry.vehicleModel")),n.Ab(2),n.ic("ngModel",t.vehicleObj.vehicleModel),n.Ab(3),n.Ec(n.dc(33,27,"vehicleEntry.vehicleColor")),n.Ab(2),n.ic("ngModel",t.vehicleObj.vehicleColor),n.Ab(3),n.Ec(n.dc(38,29,"vehicleEntry.vehicleNumber")),n.Ab(2),n.ic("ngModel",t.vehicleObj.vehicleNumber),n.Ab(4),n.Ec(n.dc(44,31,"save")))},directives:[b.l,i.p,i.j,i.d,b.r,i.e,b.v,b.J,i.i,i.c,b.s,b.u,b.I,b.q,b.K,i.n,b.x,b.k,b.d,h.a],pipes:[d.c],styles:[""]}),e})()},mouh:function(e,t,c){"use strict";c.d(t,"a",function(){return y});var i=c("mrSG"),n=c("fXoL"),a=c("tyNb"),o=c("J7/z"),l=c("TEn/"),s=c("sYmb"),r=c("tp0D"),b=c("7zfz"),h=c("ofXK"),d=c("Gxio");function u(e,t){if(1&e){const e=n.Sb();n.Rb(0,"ion-item",4),n.Zb("click",function(c){n.vc(e);const i=t.$implicit;return n.bc().itemSelect(i),c.stopPropagation()}),n.Rb(1,"ion-label"),n.Rb(2,"h2"),n.Dc(3,"Account open date :"),n.Rb(4,"b"),n.Dc(5),n.Qb(),n.Qb(),n.Rb(6,"h2"),n.Dc(7,"Account close date :"),n.Rb(8,"b"),n.Dc(9),n.Qb(),n.Qb(),n.Rb(10,"h2"),n.Dc(11,"Total amount :"),n.Rb(12,"b"),n.Dc(13),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit;n.Ab(5),n.Fc(" ",e.rentPlan,""),n.Ab(4),n.Fc(" ",e.rentAmount,""),n.Ab(4),n.Fc(" ",e.vehicleType,"")}}let m=(()=>{class e{constructor(e,t,c,i,n,a){this.router=e,this.ref=t,this.popoverController=c,this.translate=i,this.dbprovider=n,this.messageService=a,this.rentplans=[],this.tableName="rentPlan",this.fetchData()}backButtonOnclick(){this.popoverController.dismiss()}itemSelect(e){this.ref.close(e)}fetchData(){this.dbprovider.fetchDocsWithoutRelationshipByType(this.tableName).then(e=>{e&&"SUCCESS"==e.status?(console.log(e),this.rentplans=e.records):this.messageService.add({key:"rentPlanPopupList",severity:"error",summary:e.message,detail:""})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(a.g),n.Lb(o.d),n.Lb(l.H),n.Lb(s.d),n.Lb(r.a),n.Lb(b.h))},e.\u0275cmp=n.Fb({type:e,selectors:[["rentPlanPopupList"]],decls:5,vars:1,consts:[[2,"height","400px"],[2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],["key","rentPlanPopupList","position","center"],[3,"click"]],template:function(e,t){1&e&&(n.Rb(0,"ion-content",0),n.Rb(1,"ion-row"),n.Rb(2,"ion-list",1),n.Bc(3,u,14,3,"ion-item",2),n.Qb(),n.Qb(),n.Mb(4,"p-toast",3),n.Qb()),2&e&&(n.Ab(3),n.ic("ngForOf",t.rentplans))},directives:[l.l,l.x,l.t,h.j,d.a,l.r,l.s],styles:[""]}),e})();var v=c("27b0"),g=c("3Pt+");function p(e,t){if(1&e&&(n.Rb(0,"ion-label",9),n.Dc(1),n.Qb()),2&e){const e=n.bc();n.Ab(1),n.Ec(e.selectedRentPlan.rentPlan)}}function f(e,t){if(1&e&&(n.Rb(0,"ion-label",9),n.Dc(1),n.Qb()),2&e){const e=n.bc();n.Ab(1),n.Ec(e.selectedRentPlan.rentAmount)}}let y=(()=>{class e{constructor(e,t,c,i,n,a,o,l,s){this.router=e,this.dbconfig=t,this.messageService=c,this.dbprovider=i,this.popoverController=n,this.dialogService=a,this.translate=o,this.config=l,this.ref=s,this.tableName="account",this.savedSuccessMessage="Data saved sucessfully",this.selectedVehicle=JSON.parse(JSON.stringify(l.data.vehicle));var r=6e4*(new Date).getTimezoneOffset(),b=new Date(Date.now()-r).toISOString().slice(0,-5);this.openDate=b,this.initializeObjects(this.dbconfig.configuration.tableStructure)}initializeObjects(e){this.accountObj=JSON.parse(JSON.stringify(e[this.tableName]))}openRentPlanList(){return Object(i.a)(this,void 0,void 0,function*(){this.dialogService.open(m,{header:this.translate.instant("rentPlanList.title"),width:"50%"}).onClose.subscribe(e=>{e&&(this.selectedRentPlan=e)})})}saveAction(){this.selectedRentPlan?(this.accountObj.openDate=new Date(this.openDate).getTime(),this.accountObj.rentPlan_lookup=this.selectedRentPlan.id,this.accountObj.vehicle=this.selectedVehicle.id,console.log(this.accountObj),this.dbprovider.save(this.tableName,this.accountObj).then(e=>{"SUCCESS"==e.status?(this.messageService.add({key:"accCreation",severity:"success",summary:this.savedSuccessMessage,detail:""}),setTimeout(()=>this.ref.close("SUCCESS"),1e3)):this.messageService.add({key:"accCreation",severity:"error",summary:e.message,detail:"",closable:!0})}).catch(e=>{console.log(e),this.messageService.add({key:"accCreation",severity:"error",summary:e,detail:""})})):this.messageService.add({key:"accCreation",severity:"error",summary:"Choose rent plan",detail:"",closable:!0})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(a.g),n.Lb(v.a),n.Lb(b.h),n.Lb(r.a),n.Lb(l.H),n.Lb(o.a),n.Lb(s.d),n.Lb(o.b),n.Lb(o.d))},e.\u0275cmp=n.Fb({type:e,selectors:[["accountCreation"]],decls:26,vars:16,consts:[[2,"height","400px"],["size","large",1,"ion-text-center"],["lines","full"],["type","datetime-local",2,"background-color","lightgray",3,"ngModel","ngModelChange"],["style","float: right;text-align: right;",4,"ngIf"],[3,"click"],["slot","icon-only","name","search"],["type","submit","color","danger","expand","block",3,"click"],["key","accCreation","position","center"],[2,"float","right","text-align","right"]],template:function(e,t){1&e&&(n.Rb(0,"ion-content",0),n.Rb(1,"ion-title",1),n.Dc(2),n.Qb(),n.Rb(3,"ion-item",2),n.Rb(4,"ion-label"),n.Dc(5),n.cc(6,"translate"),n.Qb(),n.Rb(7,"input",3),n.Zb("ngModelChange",function(e){return t.openDate=e}),n.Qb(),n.Qb(),n.Rb(8,"ion-item",2),n.Rb(9,"ion-label"),n.Dc(10),n.cc(11,"translate"),n.Qb(),n.Bc(12,p,2,1,"ion-label",4),n.Rb(13,"ion-button",5),n.Zb("click",function(){return t.openRentPlanList()}),n.Mb(14,"ion-icon",6),n.Qb(),n.Qb(),n.Rb(15,"ion-item",2),n.Rb(16,"ion-label"),n.Dc(17),n.cc(18,"translate"),n.Qb(),n.Bc(19,f,2,1,"ion-label",4),n.Qb(),n.Rb(20,"ion-row"),n.Rb(21,"ion-col"),n.Rb(22,"ion-button",7),n.Zb("click",function(){return t.saveAction()}),n.Dc(23),n.cc(24,"translate"),n.Qb(),n.Qb(),n.Qb(),n.Mb(25,"p-toast",8),n.Qb()),2&e&&(n.Ab(2),n.Fc(" ",t.selectedVehicle.vehicleBrand+" "+t.selectedVehicle.vehicleModel+" "+t.selectedVehicle.vehicleNumber," "),n.Ab(3),n.Ec(n.dc(6,8,"accountCreation.openDate")),n.Ab(2),n.ic("ngModel",t.openDate),n.Ab(3),n.Ec(n.dc(11,10,"accountCreation.selectRentPlan")),n.Ab(2),n.ic("ngIf",t.selectedRentPlan),n.Ab(5),n.Ec(n.dc(18,12,"rentPlanEntry.rentAmount")),n.Ab(2),n.ic("ngIf",t.selectedRentPlan),n.Ab(4),n.Ec(n.dc(24,14,"save")))},directives:[l.l,l.A,l.r,l.s,g.a,g.i,g.l,h.k,l.d,l.p,l.x,l.k,d.a],pipes:[s.c],styles:[""]}),e})()},nNGn:function(e,t,c){"use strict";c.d(t,"a",function(){return d});var i=c("fXoL"),n=c("tyNb"),a=c("sYmb"),o=c("TEn/"),l=c("ofXK"),s=c("3Pt+");function r(e,t){if(1&e&&(i.Rb(0,"h2"),i.Dc(1),i.Qb()),2&e){const e=i.bc().$implicit;i.Ab(1),i.Ec(e.contactName)}}function b(e,t){if(1&e&&(i.Rb(0,"h2"),i.Dc(1),i.Qb()),2&e){const e=i.bc().$implicit;i.Ab(1),i.Ec(e.contactNameInTamil)}}function h(e,t){if(1&e){const e=i.Sb();i.Rb(0,"ion-item",6),i.Zb("click",function(c){i.vc(e);const n=t.$implicit;return i.bc().itemSelect(n),c.stopPropagation()}),i.Rb(1,"ion-avatar",7),i.Mb(2,"ion-icon",8),i.Qb(),i.Rb(3,"ion-label"),i.Bc(4,r,2,1,"h2",9),i.Bc(5,b,2,1,"h2",9),i.Rb(6,"h3"),i.Dc(7),i.Qb(),i.Rb(8,"p"),i.Dc(9),i.Qb(),i.Qb(),i.Rb(10,"ion-checkbox",10),i.Zb("ngModelChange",function(e){return t.$implicit.isChecked=e}),i.Qb(),i.Qb()}if(2&e){const e=t.$implicit,c=i.bc();i.Ab(4),i.ic("ngIf",c.appLanguage&&"en"==c.appLanguage),i.Ab(1),i.ic("ngIf",c.appLanguage&&"ta"==c.appLanguage),i.Ab(2),i.Ec(e.contactMobile),i.Ab(2),i.Fc("Added By : ",e.securityName,""),i.Ab(1),i.ic("ngModel",e.isChecked)}}let d=(()=>{class e{constructor(e,t){this.router=e,this.translate=t,this.contactList=[],this.appLanguage="ta",this.appLanguage=this.translate.getDefaultLang(),this.contactList=[{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",securityName:"Security1",selected:1},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",securityName:"Security1",selected:0},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",securityName:"Security1",selected:0},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",securityName:"Security2",selected:0},{contactName:"Prabuganesan",contactNameInTamil:"\u0baa\u0bbf\u0bb0\u0baa\u0bc1 \u0b95\u0ba3\u0bc7\u0b9a\u0ba9\u0bcd",contactMobile:"9842794262",securityName:"Security1",selected:0},{contactName:"Shunmu",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1",contactMobile:"8734645465",securityName:"Security3",selected:0},{contactName:"Shunmugam",contactNameInTamil:"\u0bb7\u0ba9\u0bcd\u0bae\u0bc1\u0b95\u0bae\u0bcd",contactMobile:"86465456342",securityName:"Security2",selected:0}]}itemSelect(e){}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(n.g),i.Lb(a.d))},e.\u0275cmp=i.Fb({type:e,selectors:[["contactAssignment"]],decls:16,vars:7,consts:[["size","large",1,"ion-text-center"],["slot","end"],["ion-button","","slot","end"],[2,"height","50%"],[2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],["name","person-circle-outline",2,"font-size","50px"],[4,"ngIf"],["slot","end",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.Rb(0,"ion-header"),i.Rb(1,"ion-toolbar"),i.Rb(2,"ion-title",0),i.Dc(3),i.cc(4,"translate"),i.Qb(),i.Rb(5,"ion-buttons",1),i.Rb(6,"button",2),i.Rb(7,"h4"),i.Dc(8),i.cc(9,"translate"),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Qb(),i.Rb(10,"ion-content",3),i.Rb(11,"ion-title",0),i.Dc(12," Tata Tiago - TN 69 AB1234 "),i.Qb(),i.Rb(13,"ion-row"),i.Rb(14,"ion-list",4),i.Bc(15,h,11,5,"ion-item",5),i.Qb(),i.Qb(),i.Qb()),2&e&&(i.Ab(3),i.Fc(" ",i.dc(4,3,"contactAssignment.title")," "),i.Ab(5),i.Ec(i.dc(9,5,"save")),i.Ab(7),i.ic("ngForOf",t.contactList))},directives:[o.o,o.B,o.A,o.e,o.l,o.x,o.t,l.j,o.r,o.c,o.p,o.s,l.k,o.j,o.a,s.i,s.l],pipes:[a.c],styles:[""]}),e})()},xHpX:function(e,t,c){"use strict";c.d(t,"a",function(){return u});var i=c("3Pt+"),n=c("fXoL"),a=c("tyNb"),o=c("27b0"),l=c("tp0D"),s=c("7zfz"),r=c("J7/z"),b=c("TEn/"),h=c("Gxio"),d=c("sYmb");let u=(()=>{class e{constructor(e,t,c,i,n,a,o){this.router=e,this.dbconfig=t,this.formBuilder=c,this.dbprovider=i,this.messageService=n,this.ref=a,this.config=o,this.contactObj={},this.tableName="contact",this.savedSuccessMessage="Data saved sucessfully","edit"==o.data.mode?this.contactObj=JSON.parse(JSON.stringify(o.data.object)):this.initializeObjects(this.dbconfig.configuration.tableStructure),this.createFormGroup()}initializeObjects(e){this.contactObj=JSON.parse(JSON.stringify(e[this.tableName])),this.contactObj.contactType="owner"}createFormGroup(){this.formGroup=this.formBuilder.group({contact:this.formBuilder.group({contactName:["",i.o.compose([i.o.maxLength(80),i.o.required])],contactNameInTamil:[""],contactType:["",i.o.compose([i.o.required])],contactMobile:["",[i.o.required,i.o.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],licenseNumber:[""]})})}saveAction(){console.log(this.contactObj),this.formGroup.patchValue({contact:{contactName:this.contactObj.contactName,contactNameInTamil:this.contactObj.contactNameInTamil,contactType:this.contactObj.contactType,contactMobile:this.contactObj.contactMobile,licenseNumber:this.contactObj.licenseNumber}}),this.formGroup.valid?this.alreadyExistValidation().then(e=>{e?this.messageService.add({key:"contactEntry",severity:"error",summary:"Mobile number already exist",detail:"",closable:!0}):this.dbprovider.save(this.tableName,this.contactObj).then(e=>{"SUCCESS"==e.status?(this.messageService.add({key:"contactEntry",severity:"success",summary:this.savedSuccessMessage,detail:""}),setTimeout(()=>this.ref.close("SUCCESS"),1e3)):this.messageService.add({key:"contactEntry",severity:"error",summary:e.message,detail:"",closable:!0})}).catch(e=>{console.log(e),this.messageService.add({key:"contactEntry",severity:"error",summary:e,detail:""})})}):this.messageService.add({key:"contactEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}alreadyExistValidation(){var e=!1;return"edit"==this.config.data.mode&&this.contactObj.contactMobile==this.config.data.object.contactMobile?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.contactMobile":this.contactObj.contactMobile,"data.type":this.tableName},sort:["data.contactMobile"]}).then(t=>("SUCCESS"==t.status&&t.records.length>0&&(e=!0),e))}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(a.g),n.Lb(o.a),n.Lb(i.b),n.Lb(l.a),n.Lb(s.h),n.Lb(r.d),n.Lb(r.b))},e.\u0275cmp=n.Fb({type:e,selectors:[["contactEntry"]],decls:43,vars:30,consts:[[2,"height","400px"],[2,"height","100%",3,"formGroup"],["lines","full","formGroupName","contact"],["position","floating"],["type","text","formControlName","contactName","required","",3,"ngModel","ngModelChange"],["type","text","formControlName","contactNameInTamil",3,"ngModel","ngModelChange"],["value","owner","mode","md","formControlName","contactType",2,"width","100%",3,"ngModel","ngModelChange"],["value","owner"],["value","others"],["type","number","formControlName","contactMobile","required","",3,"ngModel","ngModelChange"],["type","text","formControlName","licenseNumber",3,"ngModel","ngModelChange"],["type","submit","color","danger","expand","block",3,"click"],["key","contactEntry","position","center"]],template:function(e,t){1&e&&(n.Rb(0,"ion-content",0),n.Rb(1,"form",1),n.Rb(2,"ion-item",2),n.Rb(3,"ion-label",3),n.Dc(4),n.cc(5,"translate"),n.Qb(),n.Rb(6,"ion-input",4),n.Zb("ngModelChange",function(e){return t.contactObj.contactName=e}),n.Qb(),n.Qb(),n.Rb(7,"ion-item",2),n.Rb(8,"ion-label",3),n.Dc(9),n.cc(10,"translate"),n.Qb(),n.Rb(11,"ion-input",5),n.Zb("ngModelChange",function(e){return t.contactObj.contactNameInTamil=e}),n.Qb(),n.Qb(),n.Rb(12,"ion-item",2),n.Rb(13,"ion-radio-group",6),n.Zb("ngModelChange",function(e){return t.contactObj.contactType=e}),n.Rb(14,"ion-label"),n.Dc(15),n.cc(16,"translate"),n.Qb(),n.Rb(17,"ion-item"),n.Mb(18,"ion-radio",7),n.Rb(19,"ion-label"),n.Dc(20),n.cc(21,"translate"),n.Qb(),n.Rb(22,"ion-radio",8),n.Dc(23,"Test"),n.Qb(),n.Rb(24,"ion-label"),n.Dc(25),n.cc(26,"translate"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(27,"ion-item",2),n.Rb(28,"ion-label",3),n.Dc(29),n.cc(30,"translate"),n.Qb(),n.Rb(31,"ion-input",9),n.Zb("ngModelChange",function(e){return t.contactObj.contactMobile=e}),n.Qb(),n.Qb(),n.Rb(32,"ion-item",2),n.Rb(33,"ion-label",3),n.Dc(34),n.cc(35,"translate"),n.Qb(),n.Rb(36,"ion-input",10),n.Zb("ngModelChange",function(e){return t.contactObj.licenseNumber=e}),n.Qb(),n.Qb(),n.Rb(37,"ion-row"),n.Rb(38,"ion-col"),n.Rb(39,"ion-button",11),n.Zb("click",function(){return t.saveAction()}),n.Dc(40),n.cc(41,"translate"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Mb(42,"p-toast",12),n.Qb()),2&e&&(n.Ab(1),n.ic("formGroup",t.formGroup),n.Ab(3),n.Fc("",n.dc(5,14,"contactEntry.contactName")," "),n.Ab(2),n.ic("ngModel",t.contactObj.contactName),n.Ab(3),n.Ec(n.dc(10,16,"contactEntry.contactNameInTamil")),n.Ab(2),n.ic("ngModel",t.contactObj.contactNameInTamil),n.Ab(2),n.ic("ngModel",t.contactObj.contactType),n.Ab(2),n.Ec(n.dc(16,18,"contactEntry.contactType")),n.Ab(5),n.Fc(" ",n.dc(21,20,"contactEntry.ownerType"),""),n.Ab(5),n.Fc(" ",n.dc(26,22,"contactEntry.otherType"),""),n.Ab(4),n.Ec(n.dc(30,24,"contactEntry.contactMobile")),n.Ab(2),n.ic("ngModel",t.contactObj.contactMobile),n.Ab(3),n.Ec(n.dc(35,26,"contactEntry.licenseNumber")),n.Ab(2),n.ic("ngModel",t.contactObj.licenseNumber),n.Ab(4),n.Fc("",n.dc(41,28,"save")," "))},directives:[b.l,i.p,i.j,i.d,b.r,i.e,b.s,b.q,b.K,i.i,i.c,i.n,b.v,b.J,b.u,b.I,b.F,b.x,b.k,b.d,h.a],pipes:[d.c],styles:[""]}),e})()}}]);