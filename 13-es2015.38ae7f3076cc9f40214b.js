(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"9u13":function(e,t,n){"use strict";n.r(t),n.d(t,"rentPlanListModule",function(){return S});var i=n("ofXK"),r=n("TEn/"),a=n("3Pt+"),o=n("fXoL"),s=n("tyNb"),l=n("27b0"),c=n("tp0D"),b=n("7zfz"),d=n("J7/z"),h=n("Gxio"),u=n("sYmb");let p=(()=>{class e{constructor(e,t,n,i,r,a,o){this.router=e,this.dbconfig=t,this.formBuilder=n,this.dbprovider=i,this.messageService=r,this.ref=a,this.config=o,this.rentPlanObj={},this.tableName="rentPlan",this.savedSuccessMessage="Data saved sucessfully","edit"==o.data.mode?this.rentPlanObj=JSON.parse(JSON.stringify(o.data.object)):this.initializeObjects(this.dbconfig.configuration.tableStructure),this.createFormGroup()}initializeObjects(e){this.rentPlanObj=JSON.parse(JSON.stringify(e[this.tableName])),this.rentPlanObj.vehicleType="car"}createFormGroup(){this.formGroup=this.formBuilder.group({rentplan:this.formBuilder.group({rentPlan:["",a.o.compose([a.o.maxLength(80),a.o.required])],rentAmount:["",a.o.compose([a.o.required])],vehicleType:["",a.o.compose([a.o.required])]})})}saveAction(){console.log(this.rentPlanObj),this.formGroup.patchValue({rentplan:{rentPlan:this.rentPlanObj.rentPlan,rentAmount:this.rentPlanObj.rentAmount,vehicleType:this.rentPlanObj.vehicleType}}),this.formGroup.valid?this.alreadyExistValidation().then(e=>{e?this.messageService.add({key:"rentplanEntry",severity:"error",summary:"Plan already exist",detail:"",closable:!0}):this.dbprovider.save(this.tableName,this.rentPlanObj).then(e=>{"SUCCESS"==e.status?(this.messageService.add({key:"rentplanEntry",severity:"success",summary:this.savedSuccessMessage,detail:""}),setTimeout(()=>this.ref.close("SUCCESS"),1e3)):this.messageService.add({key:"rentplanEntry",severity:"error",summary:e.message,detail:"",closable:!0})}).catch(e=>{console.log(e),this.messageService.add({key:"rentplanEntry",severity:"error",summary:e,detail:""})})}):this.messageService.add({key:"rentplanEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}alreadyExistValidation(){var e=!1;return"edit"==this.config.data.mode&&this.rentPlanObj.rentPlan==this.config.data.object.rentPlan?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.rentPlan":this.rentPlanObj.rentPlan,"data.type":this.tableName},sort:["data.rentPlan"]}).then(t=>("SUCCESS"==t.status&&t.records.length>0&&(e=!0),e))}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(s.g),o.Lb(l.a),o.Lb(a.b),o.Lb(c.a),o.Lb(b.f),o.Lb(d.d),o.Lb(d.b))},e.\u0275cmp=o.Fb({type:e,selectors:[["rentPlanEntry"]],decls:37,vars:25,consts:[[2,"height","300px"],[2,"height","100%",3,"formGroup"],["lines","full","formGroupName","rentplan"],["position","floating"],["type","text","formControlName","rentPlan","required","",3,"ngModel","ngModelChange"],["type","number","formControlName","rentAmount",3,"ngModel","ngModelChange"],["value","car","mode","md","formControlName","vehicleType",2,"width","100%",3,"ngModel","ngModelChange"],["value","car"],["value","auto"],["value","others"],["type","submit","color","danger","expand","block",3,"click"],["key","rentplanEntry","position","center"]],template:function(e,t){1&e&&(o.Rb(0,"ion-content",0),o.Rb(1,"form",1),o.Rb(2,"ion-item",2),o.Rb(3,"ion-label",3),o.Dc(4),o.cc(5,"translate"),o.Qb(),o.Rb(6,"ion-input",4),o.Zb("ngModelChange",function(e){return t.rentPlanObj.rentPlan=e}),o.Qb(),o.Qb(),o.Rb(7,"ion-item",2),o.Rb(8,"ion-label",3),o.Dc(9),o.cc(10,"translate"),o.Qb(),o.Rb(11,"ion-input",5),o.Zb("ngModelChange",function(e){return t.rentPlanObj.rentAmount=e}),o.Qb(),o.Qb(),o.Rb(12,"ion-item",2),o.Rb(13,"ion-radio-group",6),o.Zb("ngModelChange",function(e){return t.rentPlanObj.vehicleType=e}),o.Rb(14,"ion-label"),o.Dc(15),o.cc(16,"translate"),o.Qb(),o.Rb(17,"ion-item"),o.Mb(18,"ion-radio",7),o.Rb(19,"ion-label"),o.Dc(20),o.cc(21,"translate"),o.Qb(),o.Rb(22,"ion-radio",8),o.Dc(23,"Test"),o.Qb(),o.Rb(24,"ion-label"),o.Dc(25),o.cc(26,"translate"),o.Qb(),o.Mb(27,"ion-radio",9),o.Rb(28,"ion-label"),o.Dc(29),o.cc(30,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(31,"ion-row"),o.Rb(32,"ion-col"),o.Rb(33,"ion-button",10),o.Zb("click",function(){return t.saveAction()}),o.Dc(34),o.cc(35,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(36,"p-toast",11),o.Qb()),2&e&&(o.Ab(1),o.ic("formGroup",t.formGroup),o.Ab(3),o.Fc("",o.dc(5,11,"rentPlanEntry.rentPlanName")," "),o.Ab(2),o.ic("ngModel",t.rentPlanObj.rentPlan),o.Ab(3),o.Ec(o.dc(10,13,"rentPlanEntry.rentAmount")),o.Ab(2),o.ic("ngModel",t.rentPlanObj.rentAmount),o.Ab(2),o.ic("ngModel",t.rentPlanObj.vehicleType),o.Ab(2),o.Ec(o.dc(16,15,"rentPlanEntry.rentplanType")),o.Ab(5),o.Ec(o.dc(21,17,"rentPlanEntry.car")),o.Ab(5),o.Ec(o.dc(26,19,"rentPlanEntry.auto")),o.Ab(4),o.Ec(o.dc(30,21,"rentPlanEntry.others")),o.Ab(5),o.Ec(o.dc(35,23,"save")))},directives:[r.l,a.p,a.j,a.d,r.q,a.e,r.r,r.p,r.K,a.i,a.c,a.n,r.F,r.v,r.J,r.u,r.I,r.x,r.k,r.d,h.a],pipes:[u.c],styles:[""]}),e})();var m=n("8CEF");function g(e,t){if(1&e){const e=o.Sb();o.Rb(0,"div",13),o.Zb("click",function(){o.vc(e);const n=t.$implicit;return o.bc().editaction(n)}),o.Rb(1,"div",14),o.Rb(2,"div",15),o.Mb(3,"i",16),o.Qb(),o.Rb(4,"div",15),o.Rb(5,"h2"),o.Dc(6),o.Qb(),o.Rb(7,"h3"),o.Dc(8),o.cc(9,"translate"),o.Qb(),o.Rb(10,"ion-label"),o.Dc(11),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&e){const e=t.$implicit;o.Ab(6),o.Fc(" ",e.rentPlan," "),o.Ab(2),o.Gc(" ",e.rentAmount," ",o.dc(9,4,"rs")," "),o.Ab(3),o.Fc(" ",e.vehicleType," ")}}let y=(()=>{class e{constructor(e,t,n,i,r,a){this.router=e,this.dialogService=t,this.messageService=n,this.location=i,this.translate=r,this.dbprovider=a,this.rentplans=[],this.tableName="rentPlan",this.fetchData()}fetchData(){this.dbprovider.fetchDocsWithoutRelationshipByType(this.tableName).then(e=>{e&&"SUCCESS"==e.status?(console.log(e),this.rentplans=e.records):this.messageService.add({key:"rentPlanList",severity:"error",summary:e.message,detail:""})})}backButtonOnclick(){this.location.back()}planAddClick(){console.log("user add"),this.dialogService.open(p,{header:this.translate.instant("rentPlanEntry.title"),width:"40%",data:{object:"",mode:"new"}}).onClose.subscribe(e=>{e&&"SUCCESS"==e&&this.fetchData()})}editaction(e){console.log("edit",e),this.dialogService.open(p,{header:this.translate.instant("rentPlanEntry.title"),width:"40%",data:{object:e,mode:"edit"}}).onClose.subscribe(e=>{e&&"SUCCESS"==e&&this.fetchData()})}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(s.g),o.Lb(d.a),o.Lb(b.f),o.Lb(i.g),o.Lb(u.d),o.Lb(c.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["rentPlanList"]],decls:19,vars:4,consts:[["no-border",""],["slot","start"],["slot","start",3,"click"],["name","arrow-back",2,"font-size","30px","color","black"],["slot","end"],["slot","end",3,"click"],["name","add",2,"font-size","30px","color","black"],["size","large",1,"ion-text-center"],[2,"padding","20px"],["layout","grid",3,"value"],["dv",""],["pTemplate","gridItem"],["key","rentPlanList","position","center"],[1,"p-col-12","p-md-4",2,"padding","5px",3,"click"],[1,"p-shadow-5"],[2,"padding","13px"],[1,"pi","pi-money-bill",2,"font-size","4rem"]],template:function(e,t){1&e&&(o.Rb(0,"ion-header",0),o.Rb(1,"ion-toolbar"),o.Rb(2,"ion-buttons",1),o.Rb(3,"ion-button",2),o.Zb("click",function(){return t.backButtonOnclick()}),o.Rb(4,"h2"),o.Mb(5,"ion-icon",3),o.Qb(),o.Qb(),o.Qb(),o.Rb(6,"ion-buttons",4),o.Rb(7,"ion-button",5),o.Zb("click",function(){return t.planAddClick()}),o.Rb(8,"h2"),o.Mb(9,"ion-icon",6),o.Qb(),o.Qb(),o.Qb(),o.Rb(10,"ion-title",7),o.Dc(11),o.cc(12,"translate"),o.Qb(),o.Qb(),o.Qb(),o.Rb(13,"ion-content"),o.Rb(14,"div",8),o.Rb(15,"p-dataView",9,10),o.Bc(17,g,12,6,"ng-template",11),o.Qb(),o.Qb(),o.Mb(18,"p-toast",12),o.Qb()),2&e&&(o.Ab(11),o.Fc(" ",o.dc(12,2,"rentPlanList.title")," "),o.Ab(4),o.ic("value",t.rentplans))},directives:[r.n,r.B,r.e,r.d,r.o,r.A,r.l,m.a,b.h,h.a,r.r],pipes:[u.c],styles:[""]}),e})();var f=n("7kUa"),v=n("jIHw"),P=n("Q4Mo"),R=n("1SLH");const Q=[{path:"",component:y}];let S=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},imports:[[s.k.forChild(Q),i.b,a.f,r.C,f.b,v.c,P.b,R.b,m.b,d.c,u.b,h.b],s.k]}),e})()}}]);