!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{koon:function(n,r,i){"use strict";i.r(r),i.d(r,"startupModule",function(){return M});var o=i("ofXK"),s=i("TEn/"),c=i("3Pt+"),a=i("fXoL"),u=i("tyNb"),l=i("fU03"),d=i("7zfz"),b=i("tp0D"),p=i("/RsI"),f=i("7kUa"),h=i("Gxio"),g=i("jIHw");function m(e,t){if(1&e){var n=a.Sb();a.Rb(0,"ion-col"),a.Rb(1,"div",7),a.Zb("click",function(){a.uc(n);var e=t.$implicit;return a.bc().openMenu(e)}),a.Mb(2,"ion-icon",8),a.Rb(3,"h3",9),a.Cc(4),a.Qb(),a.Qb(),a.Qb()}if(2&e){var r=t.$implicit;a.Ab(4),a.Dc(r.userName)}}function v(e,t){if(1&e){var n=a.Sb();a.Rb(0,"p-button",10),a.Zb("click",function(){return a.uc(n),a.bc().login()}),a.Qb()}}var y,k,C=function(){return{width:"300px"}},w=[{path:"",component:(y=function(){function n(t,r,i,o){e(this,n),this.router=t,this.util=r,this.messageService=i,this.dbprovider=o,this.display=!1,this.password="",this.tableName="applicationUser",this.users=[],this.createFirstAdmin()}var r,i,o;return r=n,(i=[{key:"openMenu",value:function(e){console.log(e),this.display=!0,this.selectedUser=e}},{key:"login",value:function(){var e=this;this.display=!1,this.util.userId=this.selectedUser.code,this.selectedUser.password==this.password?setTimeout(function(){return e.router.navigate(["/menu"])},300):this.messageService.add({key:"startup",severity:"error",summary:"Invalid password",detail:"",closable:!0})}},{key:"createFirstAdmin",value:function(){var e=this;this.fetchUserData().then(function(t){var n=!1;t.records&&t.records.length>0&&t.records.forEach(function(e){"Admin"==e.userType&&(n=!0)}),console.log(n),0==n?(e.util.userId=1,e.dbprovider.save(e.tableName,{userName:"Shunmu",mobile:9841163959,code:1,userType:"Admin",password:"shunmu"}).then(function(t){console.log("result",t),"SUCCESS"==t.status?e.fetchUserData().then(function(t){t.records&&t.records.length>0&&(e.users=t.records,console.log("user list",e.users))}):e.messageService.add({key:"startup",severity:"error",summary:"First time user creation failed",detail:"",closable:!0})}).catch(function(t){console.log(t),e.messageService.add({key:"startup",severity:"error",summary:"First time user creation failed",detail:""})})):e.fetchUserData().then(function(t){t.records&&t.records.length>0&&(e.users=t.records,console.log("user list else",e.users))})})}},{key:"fetchUserData",value:function(){var e=this;return this.dbprovider.fetchDocsWithoutRelationshipByType(this.tableName).then(function(e){return e&&"SUCCESS"==e.status?e:[]}).catch(function(t){return e.messageService.add({key:"startup",severity:"error",summary:"User fetching failed",detail:""}),[]})}}])&&t(r.prototype,i),o&&t(r,o),n}(),y.\u0275fac=function(e){return new(e||y)(a.Lb(u.g),a.Lb(l.a),a.Lb(d.f),a.Lb(b.a))},y.\u0275cmp=a.Fb({type:y,selectors:[["startup"]],decls:12,vars:10,consts:[[1,"auth-form","background",3,"fullscreen"],["size","large",1,"ion-text-center",2,"height","50px"],[4,"ngFor","ngForOf"],["header","Enter password",3,"visible","modal","responsive","appendTo","visibleChange"],["pInputText","","type","text","placeholder"," Password",3,"ngModel","ngModelChange"],["pTemplate","footer"],["key","startup","position","bottom-center"],[2,"background","#fdfdfd","width","60%","text-align","center","padding","5px","margin","0 auto","border-radius","10px",3,"click"],["name","person",2,"font-size","70px","padding","10px"],[2,"font-size","3vw"],["icon","pi pi-check","label","Login",1,"p-button-text",3,"click"]],template:function(e,t){1&e&&(a.Rb(0,"ion-content",0),a.Rb(1,"div"),a.Rb(2,"ion-title",1),a.Cc(3," Parking management "),a.Qb(),a.Qb(),a.Rb(4,"ion-grid"),a.Mb(5,"ion-row"),a.Rb(6,"ion-row"),a.Ac(7,m,5,1,"ion-col",2),a.Qb(),a.Qb(),a.Rb(8,"p-dialog",3),a.Zb("visibleChange",function(e){return t.display=e}),a.Rb(9,"ion-input",4),a.Zb("ngModelChange",function(e){return t.password=e}),a.Qb(),a.Ac(10,v,1,0,"ng-template",5),a.Qb(),a.Mb(11,"p-toast",6),a.Qb()),2&e&&(a.hc("fullscreen",!0),a.Ab(7),a.hc("ngForOf",t.users),a.Ab(1),a.yc(a.jc(9,C)),a.hc("visible",t.display)("modal",!0)("responsive",!0)("appendTo","body"),a.Ab(1),a.hc("ngModel",t.password))},directives:[s.l,s.A,s.m,s.x,o.j,p.a,s.p,s.K,f.a,c.i,c.l,d.h,h.a,s.k,s.o,g.a],styles:['.divider[_ngcontent-%COMP%]{display:flex}.divider[_ngcontent-%COMP%]:after, .divider[_ngcontent-%COMP%]:before{content:"";flex:1}.line[_ngcontent-%COMP%]{align-items:center;margin:1em -1em;color:#ccc}.line[_ngcontent-%COMP%]:after, .line[_ngcontent-%COMP%]:before{height:1px;margin:0 1em}.one-line[_ngcontent-%COMP%]:after, .one-line[_ngcontent-%COMP%]:before{background:#ccc}.auth-form[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%], .auth-form[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:50%;justify-content:center}.already[_ngcontent-%COMP%]{display:block;text-align:center;padding-bottom:10px}.circle[_ngcontent-%COMP%]{width:50%;height:50%;background:#0ff;border:5px solid #00f}.circleBase[_ngcontent-%COMP%]{border-radius:50%}.background[_ngcontent-%COMP%]{--background:url(/assets/bg2.jpeg) 0 0/100% 100% no-repeat}']}),y)}],M=((k=function t(){e(this,t)}).\u0275mod=a.Jb({type:k}),k.\u0275inj=a.Ib({factory:function(e){return new(e||k)},imports:[[u.k.forChild(w),o.b,c.f,s.C,p.b,g.c,f.b,h.b],u.k]}),k)}}])}();