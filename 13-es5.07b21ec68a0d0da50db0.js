!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{JPuJ:function(e,c,o){"use strict";o.r(c),o.d(c,"contactListWithVehicleInfoModule",function(){return G});var a=o("ofXK"),l=o("TEn/"),r=o("3Pt+"),s=o("mrSG"),b=o("VqLa"),h=o("XqSU"),d=o("0Eai"),u=o("eKwt"),f=o("xHpX"),p=o("fXoL"),g=o("tyNb"),v=o("J7/z"),S=o("sYmb"),m=o("tp0D"),R=o("7zfz"),A=o("7kUa"),C=o("jIHw"),y=o("Q4Mo"),k=o("Gxio"),w=o("1SLH");function I(t,e){if(1&t&&(p.Sb(0,"h2"),p.Ec(1),p.Rb()),2&t){var n=p.cc().$implicit;p.Ab(1),p.Fc(n.contactName)}}function L(t,e){if(1&t&&(p.Sb(0,"h2"),p.Ec(1),p.Rb()),2&t){var n=p.cc().$implicit;p.Ab(1),p.Fc(n.contactNameInTamil)}}function E(t,e){if(1&t){var n=p.Tb();p.Sb(0,"ion-item",19),p.ac("click",function(t){p.wc(n);var i=e.$implicit;return p.cc().itemSelect(i),t.stopPropagation()}),p.Sb(1,"ion-avatar",1),p.Nb(2,"ion-icon",20),p.Rb(),p.Sb(3,"ion-label"),p.Cc(4,I,2,1,"h2",21),p.Cc(5,L,2,1,"h2",21),p.Sb(6,"h3"),p.Ec(7),p.Rb(),p.Sb(8,"p"),p.Ec(9),p.Rb(),p.Rb(),p.Sb(10,"button",22),p.ac("click",function(t){p.wc(n);var i=e.$implicit;return p.cc().editContact(i),t.stopPropagation()}),p.Rb(),p.Rb()}if(2&t){var i=e.$implicit,c=p.cc();p.Ab(4),p.jc("ngIf",c.appLanguage&&"en"==c.appLanguage),p.Ab(1),p.jc("ngIf",c.appLanguage&&"ta"==c.appLanguage),p.Ab(2),p.Fc(i.contactMobile),p.Ab(2),p.Gc("Added By : ",i.securityName,"")}}function x(t,e){if(1&t&&(p.Sb(0,"ion-label"),p.Sb(1,"b"),p.Ec(2),p.Rb(),p.Rb()),2&t){var n=p.cc(2).$implicit;p.Ab(2),p.Fc(n.contactName)}}function V(t,e){if(1&t&&(p.Sb(0,"ion-label"),p.Sb(1,"b"),p.Ec(2),p.Rb(),p.Rb()),2&t){var n=p.cc(2).$implicit;p.Ab(2),p.Fc(n.contactNameInTamil)}}function N(t,e){if(1&t&&(p.Sb(0,"div"),p.Cc(1,x,3,1,"ion-label",21),p.Cc(2,V,3,1,"ion-label",21),p.Sb(3,"ion-label"),p.Ec(4),p.Rb(),p.Nb(5,"div",44),p.Rb()),2&t){var n=p.cc().$implicit,i=p.cc(3);p.Ab(1),p.jc("ngIf",i.appLanguage&&"en"==i.appLanguage),p.Ab(1),p.jc("ngIf",i.appLanguage&&"ta"==i.appLanguage),p.Ab(2),p.Fc(n.contactMobile)}}function T(t,e){if(1&t&&(p.Sb(0,"ion-row",43),p.Cc(1,N,6,3,"div",21),p.Rb()),2&t){var n=e.index;p.Ab(1),p.jc("ngIf",n<2)}}function F(t,e){if(1&t){var n=p.Tb();p.Sb(0,"ion-item",19),p.ac("click",function(){p.wc(n);var t=e.$implicit;return p.cc(2).vehicleDetail(t)}),p.Sb(1,"ion-col",28),p.Sb(2,"div"),p.Sb(3,"div",29),p.Sb(4,"ion-avatar",30),p.Nb(5,"ion-icon",31),p.Rb(),p.Sb(6,"ion-label",32),p.Sb(7,"h3"),p.Ec(8),p.Rb(),p.Rb(),p.Rb(),p.Sb(9,"div",33),p.Sb(10,"ion-label"),p.Sb(11,"h3"),p.Ec(12),p.Rb(),p.Sb(13,"h2"),p.Ec(14),p.Rb(),p.Sb(15,"h2"),p.Sb(16,"b"),p.Ec(17),p.Rb(),p.Rb(),p.Sb(18,"p"),p.Ec(19),p.Rb(),p.Rb(),p.Rb(),p.Nb(20,"div",34),p.Rb(),p.Rb(),p.Sb(21,"ion-col",35),p.Sb(22,"div",36),p.Sb(23,"ion-label"),p.Sb(24,"h3"),p.Ec(25),p.dc(26,"translate"),p.Rb(),p.Sb(27,"h2"),p.Ec(28),p.dc(29,"translate"),p.Rb(),p.Sb(30,"p"),p.Ec(31),p.dc(32,"translate"),p.Rb(),p.Sb(33,"p"),p.Ec(34),p.dc(35,"date"),p.Rb(),p.Rb(),p.Rb(),p.Nb(36,"div",34),p.Rb(),p.Sb(37,"ion-col",37),p.Cc(38,T,2,1,"ion-row",38),p.Rb(),p.Sb(39,"ion-col",39),p.Sb(40,"button",40),p.ac("click",function(t){p.wc(n);var i=e.$implicit,c=p.vc(42),o=p.cc(2);return c.toggle(t),o.menuClick(i),t.stopPropagation()}),p.Rb(),p.Nb(41,"p-menu",41,42),p.Rb(),p.Rb()}if(2&t){var i=e.$implicit,c=p.cc(2);p.Ab(8),p.Fc(i.vehicleInfo.vehicleColor),p.Ab(4),p.Fc(i.vehicleInfo.vehicleType),p.Ab(2),p.Hc("",i.vehicleInfo.vehicleBrand," ",i.vehicleInfo.vehicleModel," "),p.Ab(3),p.Fc(i.vehicleInfo.vehicleNumber),p.Ab(2),p.Gc("Added By : ",i.vehicleInfo.addedBy,""),p.Ab(6),p.Hc("",p.ec(26,15,"rentPlanEntry.rentPlanName")," : ",i.rentPlanInfo.rentPlan,""),p.Ab(3),p.Hc("",i.rentPlanInfo.rentAmount," ",p.ec(29,17,"rs"),""),p.Ab(3),p.Gc("",p.ec(32,19,"contactListWithVehicle.accountOpenDate")," :"),p.Ab(3),p.Fc(p.fc(35,21,i.accountInfo.openDate,"dd/MM/yyyy hh:mm a")),p.Ab(4),p.jc("ngForOf",i.additionalContacts),p.Ab(3),p.jc("popup",!0)("model",c.items)}}function O(t,e){if(1&t){var n=p.Tb();p.Sb(0,"div",23),p.Sb(1,"ion-toolbar",24),p.Sb(2,"ion-button",25),p.ac("click",function(){return p.wc(n),p.cc().vehicleAddButtonclick()}),p.Nb(3,"img",26),p.Rb(),p.Rb(),p.Sb(4,"ion-list",27),p.Cc(5,F,43,24,"ion-item",14),p.Rb(),p.Rb()}if(2&t){var i=p.cc();p.Ab(5),p.jc("ngForOf",i.vehicleList)}}function P(t,e){if(1&t&&(p.Sb(0,"div"),p.Sb(1,"div",29),p.Sb(2,"ion-avatar",30),p.Nb(3,"ion-icon",31),p.Rb(),p.Sb(4,"ion-label",32),p.Sb(5,"h3"),p.Ec(6),p.Rb(),p.Rb(),p.Rb(),p.Sb(7,"div",33),p.Sb(8,"ion-label"),p.Sb(9,"h2"),p.Ec(10),p.Rb(),p.Sb(11,"h2"),p.Ec(12),p.Rb(),p.Sb(13,"h2"),p.Sb(14,"b"),p.Ec(15),p.Rb(),p.Rb(),p.Sb(16,"p"),p.Ec(17),p.Rb(),p.Rb(),p.Rb(),p.Rb()),2&t){var n=p.cc().$implicit;p.Ab(6),p.Fc(n.alternateVehicleInfo.vehicleColor),p.Ab(4),p.Fc(n.alternateVehicleInfo.vehicleType),p.Ab(2),p.Hc("",n.alternateVehicleInfo.vehicleBrand," ",n.alternateVehicleInfo.vehicleModel," "),p.Ab(3),p.Fc(n.alternateVehicleInfo.vehicleNumber),p.Ab(2),p.Gc("Added By : ",n.alternateVehicleInfo.addedBy,"")}}function j(t,e){1&t&&(p.Sb(0,"div"),p.Sb(1,"ion-label",32),p.Nb(2,"br"),p.Sb(3,"h3"),p.Ec(4,"Alternate vehicle not available"),p.Rb(),p.Rb(),p.Rb())}function M(t,e){if(1&t&&(p.Sb(0,"h2"),p.Ec(1),p.Rb()),2&t){var n=p.cc().$implicit;p.Ab(1),p.Fc(n.contactName)}}function B(t,e){if(1&t&&(p.Sb(0,"h2"),p.Ec(1),p.Rb()),2&t){var n=p.cc().$implicit;p.Ab(1),p.Fc(n.contactNameInTamil)}}function _(t,e){if(1&t&&(p.Sb(0,"ion-col",59),p.Sb(1,"div"),p.Sb(2,"ion-label",54),p.Cc(3,M,2,1,"h2",21),p.Cc(4,B,2,1,"h2",21),p.Sb(5,"h2"),p.Ec(6),p.Rb(),p.Rb(),p.Rb(),p.Rb()),2&t){var n=e.$implicit,i=p.cc(3);p.Ab(3),p.jc("ngIf",i.appLanguage&&"en"==i.appLanguage),p.Ab(1),p.jc("ngIf",i.appLanguage&&"ta"==i.appLanguage),p.Ab(2),p.Fc(n.contactMobile)}}function D(t,e){if(1&t){var n=p.Tb();p.Sb(0,"ion-grid",47),p.Sb(1,"ion-row",48),p.Sb(2,"ion-col",49),p.Sb(3,"h2"),p.Ec(4),p.dc(5,"translate"),p.Rb(),p.Sb(6,"div"),p.Sb(7,"div",29),p.Sb(8,"ion-avatar",30),p.Nb(9,"ion-icon",31),p.Rb(),p.Sb(10,"ion-label",32),p.Sb(11,"h3"),p.Ec(12),p.Rb(),p.Rb(),p.Rb(),p.Sb(13,"div",33),p.Sb(14,"ion-label"),p.Sb(15,"h2"),p.Ec(16),p.Rb(),p.Sb(17,"h2"),p.Ec(18),p.Rb(),p.Sb(19,"h2"),p.Sb(20,"b"),p.Ec(21),p.Rb(),p.Rb(),p.Sb(22,"p"),p.Ec(23),p.Rb(),p.Rb(),p.Rb(),p.Nb(24,"div",34),p.Rb(),p.Rb(),p.Sb(25,"ion-col",49),p.Sb(26,"h2"),p.Ec(27),p.dc(28,"translate"),p.Rb(),p.Sb(29,"div",50),p.Sb(30,"ion-label"),p.Sb(31,"h2"),p.Ec(32),p.dc(33,"translate"),p.Rb(),p.Sb(34,"h2"),p.Ec(35),p.dc(36,"translate"),p.Rb(),p.Sb(37,"p"),p.Ec(38),p.dc(39,"translate"),p.Rb(),p.Sb(40,"p"),p.Ec(41),p.dc(42,"date"),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Sb(43,"ion-col",51),p.Sb(44,"button",40),p.ac("click",function(t){p.wc(n);var i=e.$implicit,c=p.vc(46),o=p.cc(2);return c.toggle(t),o.menuClick(i),t.stopPropagation()}),p.Rb(),p.Nb(45,"p-menu",41,42),p.Rb(),p.Nb(47,"div",52),p.Rb(),p.Sb(48,"ion-row",53),p.Sb(49,"ion-col",49),p.Sb(50,"div"),p.Sb(51,"h2"),p.Ec(52),p.dc(53,"translate"),p.Rb(),p.Sb(54,"div",36),p.Sb(55,"ion-label",54),p.Sb(56,"h2"),p.Ec(57),p.dc(58,"translate"),p.dc(59,"translate"),p.Rb(),p.Sb(60,"h2"),p.Ec(61),p.dc(62,"translate"),p.dc(63,"translate"),p.Rb(),p.Sb(64,"h2"),p.Sb(65,"b"),p.Ec(66),p.dc(67,"translate"),p.dc(68,"translate"),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Nb(69,"div",34),p.Rb(),p.Rb(),p.Sb(70,"ion-col",49),p.Sb(71,"h2"),p.Ec(72),p.dc(73,"translate"),p.Rb(),p.Cc(74,P,18,6,"div",21),p.Cc(75,j,5,0,"div",21),p.Rb(),p.Nb(76,"div",52),p.Rb(),p.Sb(77,"ion-row",53),p.Sb(78,"ion-row",55),p.Sb(79,"h2",56),p.Ec(80),p.dc(81,"translate"),p.Rb(),p.Rb(),p.Sb(82,"ion-row",57),p.Cc(83,_,7,3,"ion-col",58),p.Rb(),p.Rb(),p.Rb()}if(2&t){var i=e.$implicit,c=p.cc(2);p.Ab(4),p.Fc(p.ec(5,31,"contactListWithVehicle.primaryVehicleInfo")),p.Ab(8),p.Fc(i.vehicleInfo.vehicleColor),p.Ab(4),p.Fc(i.vehicleInfo.vehicleType),p.Ab(2),p.Hc("",i.vehicleInfo.vehicleBrand," ",i.vehicleInfo.vehicleModel," "),p.Ab(3),p.Fc(i.vehicleInfo.vehicleNumber),p.Ab(2),p.Gc("Added By : ",i.vehicleInfo.addedBy,""),p.Ab(4),p.Fc(p.ec(28,33,"contactListWithVehicle.accountInfo")),p.Ab(5),p.Hc("",p.ec(33,35,"rentPlanEntry.rentPlanName")," : ",i.rentPlanInfo.rentPlan,""),p.Ab(3),p.Hc("",i.rentPlanInfo.rentAmount," ",p.ec(36,37,"rs"),""),p.Ab(3),p.Gc("",p.ec(39,39,"contactListWithVehicle.accountOpenDate")," :"),p.Ab(3),p.Fc(p.fc(42,41,i.accountInfo.openDate,"dd/MM/yyyy hh:mm a")),p.Ab(4),p.jc("popup",!0)("model",c.items),p.Ab(7),p.Fc(p.ec(53,44,"contactListWithVehicle.outstandingInfo")),p.Ab(5),p.Ic("",p.ec(58,46,"contactListWithVehicle.totalAmount")," : ",i.accountInfo.totalBillAmount," ",p.ec(59,48,"rs"),""),p.Ab(4),p.Ic("",p.ec(62,50,"contactListWithVehicle.paidAmount")," : ",i.accountInfo.receivedAmount," ",p.ec(63,52,"rs"),""),p.Ab(5),p.Ic("",p.ec(67,54,"contactListWithVehicle.pendingAmount")," : ",i.accountInfo.totalBillAmount-i.accountInfo.receivedAmount," ",p.ec(68,56,"rs"),""),p.Ab(6),p.Fc(p.ec(73,58,"contactListWithVehicle.alternateVehicleInfo")),p.Ab(2),p.jc("ngIf",i.alternateVehicleInfo.vehicleType),p.Ab(1),p.jc("ngIf",!i.alternateVehicleInfo.vehicleType),p.Ab(5),p.Fc(p.ec(81,60,"contactListWithVehicle.additionalContactInfo")),p.Ab(3),p.jc("ngForOf",i.additionalContacts)}}function W(t,e){if(1&t){var n=p.Tb();p.Sb(0,"div",45),p.Sb(1,"ion-toolbar",24),p.Sb(2,"ion-button",25),p.ac("click",function(){return p.wc(n),p.cc().vehicleAddButtonclick()}),p.Nb(3,"img",26),p.Rb(),p.Rb(),p.Cc(4,D,84,62,"ion-grid",46),p.Rb()}if(2&t){var i=p.cc();p.Ab(4),p.jc("ngForOf",i.vehicleList)}}function $(t,e){if(1&t){var n=p.Tb();p.Sb(0,"div",45),p.Sb(1,"ion-toolbar",24),p.Sb(2,"ion-button",25),p.ac("click",function(){return p.wc(n),p.cc().vehicleAddButtonclick()}),p.Nb(3,"img",26),p.Rb(),p.Rb(),p.Sb(4,"div",60),p.Nb(5,"br"),p.Nb(6,"div"),p.Sb(7,"div",32),p.Sb(8,"ion-label"),p.Ec(9,"No vehicle assigned against this contact."),p.Rb(),p.Rb(),p.Rb(),p.Rb()}}var U,z,q=[{path:"",component:(U=function(){function e(t,i,c,o,a,l,r){var s=this;n(this,e),this.router=t,this.dialogService=i,this.popoverController=c,this.location=o,this.translate=a,this.dbprovider=l,this.messageService=r,this.contactList=[],this.vehicleList=[],this.allContactList=[],this.queryText="",this.appLanguage="ta",this.contactTableName="contact",this.vehicleTableName="vehicle",this.accountTableName="account",this.alternateVehicleTableName="alternateVehicle",this.vehicleContactAssignmentTableName="vehicleContactAssignment",this.appLanguage=this.translate.getDefaultLang(),this.fetchContactList(),this.items=[{label:"Actions",items:[{label:this.translate.instant("actions.editVehicle"),icon:"pi pi-angle-right",command:function(){s.vehicleEditAction()}},{label:this.translate.instant("actions.contactList"),icon:"pi pi-angle-right",command:function(){s.showAlternateContactList()}},{label:this.translate.instant("actions.alternateVehicleList"),icon:"pi pi-angle-right",command:function(){s.alternateVehicleList()}},{label:this.translate.instant("actions.accountDetail"),icon:"pi pi-angle-right",command:function(){s.accountDetail()}}]}]}var c,o,a;return c=e,(o=[{key:"editContact",value:function(t){var e=this;console.log(t),delete JSON.parse(JSON.stringify(t)).selected,this.dialogService.open(f.a,{header:this.translate.instant("contactEntry.title"),width:"50%",data:{object:t,mode:"edit",contactType:"Primary",vehicleId:""}}).onClose.subscribe(function(t){t&&"SUCCESS"==t&&e.fetchContactList()})}},{key:"contactAddButtonclick",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("add contact"),this.dialogService.open(f.a,{header:this.translate.instant("contactEntry.title"),width:"50%",data:{object:"",mode:"new",contactType:"Primary",vehicleId:""}}).onClose.subscribe(function(t){t&&"SUCCESS"==t&&e.fetchContactList()});case 1:case"end":return t.stop()}},t,this)}))}},{key:"vehicleAddButtonclick",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("add vehicle"),this.dialogService.open(u.a,{header:this.translate.instant("vehicleEntry.title"),width:"50%",data:{object:"",mode:"new",contactId:this.selectedContact.id}}).onClose.subscribe(function(t){t&&"SUCCESS"==t&&e.fetchVehicleContactAssignemntAgainstContact(e.selectedContact.id)});case 1:case"end":return t.stop()}},t,this)}))}},{key:"vehicleEditAction",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("edit vehicle"),this.dialogService.open(u.a,{header:this.translate.instant("vehicleEntry.title"),width:"50%",data:{object:this.selectedVehicle,mode:"edit",contactId:this.selectedContact.id}}).onClose.subscribe(function(t){t&&"SUCCESS"==t&&e.fetchVehicleContactAssignemntAgainstContact(e.selectedContact.id)});case 1:case"end":return t.stop()}},t,this)}))}},{key:"fetchContactList",value:function(){var e=this;this.contactList=[],this.dbprovider.fetchDocsWithoutRelationshipByType(this.contactTableName).then(function(n){n&&"SUCCESS"==n.status?(console.log(n),n.records.length>0&&(n.records.forEach(function(t){"owner"==t.contactType&&e.contactList.push(t)}),e.allContactList=t(e.contactList),e.contactList.length>0&&(e.selectedContact=e.contactList[0],e.fetchVehicleContactAssignemntAgainstContact(e.selectedContact.id)))):e.messageService.add({key:"contactList",severity:"error",summary:n.message,detail:""})})}},{key:"fetchVehicleContactAssignemntAgainstContact",value:function(t){var e=this;this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.contact_lookup":t,"data.type":this.vehicleContactAssignmentTableName},sort:["data.contact_lookup"]}).then(function(t){if(console.log(t),"SUCCESS"==t.status&&t.records.length>0){var n=t.records.map(function(t){return t.vehicle_lookup}).map(function(t){return e.vehicleTableName+"_2_"+t});e.fetchVehicleListAgainstContact(n)}else e.vehicleList=[],e.selectedVehicle=null})}},{key:"fetchVehicleListAgainstContact",value:function(t){var e=this;console.log(t),this.vehicleList=[],this.dbprovider.fetchDocsWithDocIds(t).then(function(t){console.log(t),"SUCCESS"==t.status&&t.response.length>0?t.response.forEach(function(t){e.fetchAccountAndAdditionalContactInfo(t.id).then(function(n){n.vehicleInfo=t,console.log("result==>",n),e.vehicleList.push(n)})}):e.vehicleList=[]}).catch(function(t){e.vehicleList=[]})}},{key:"fetchAccountAndAdditionalContactInfo",value:function(t){var e={},n=[];return n.push(this.fetchAccountInfoAgainstVehicle(t).then(function(t){t?(e.rentPlanInfo=t.rentPlan_lookup,delete t.rentPlan_lookup,e.accountInfo=t,console.log(t)):(e.accountInfo={},e.rentPlanInfo={})})),n.push(this.fetchAdditionalContactInfoAgainstVehicle(t).then(function(t){e.additionalContacts=t})),n.push(this.fetchAlternateVehicleInfoAgainstVehicle(t).then(function(t){e.alternateVehicleInfo=t.length>0?t[0]:{}})),Promise.all(n).then(function(t){return console.log(t),e})}},{key:"fetchAccountInfoAgainstVehicle",value:function(t){return this.dbprovider.fetchDocsWithRelationshipUsingFindOption({selector:{"data.vehicle":t,"data.type":this.accountTableName},sort:["data.vehicle"]},!0,{masterandlookupreference:["rentPlan"]}).then(function(t){if(console.log(t),!t||"SUCCESS"!=t.status)return null;if(t.records.length>0){var e=null;return t.records.forEach(function(t){t.closeDate||(e=t)}),e}}).catch(function(t){return null})}},{key:"fetchAdditionalContactInfoAgainstVehicle",value:function(t){var e=this;return this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.vehicle_lookup":t,"data.type":this.vehicleContactAssignmentTableName},sort:["data.vehicle_lookup"]}).then(function(t){if(console.log(t),"SUCCESS"==t.status&&t.records.length>0){var n=t.records.map(function(t){return t.contact_lookup}).map(function(t){return e.contactTableName+"_2_"+t});return e.fetchContactListAgainstVehicle(n)}return[]}).catch(function(t){return[]})}},{key:"fetchContactListAgainstVehicle",value:function(t){console.log(t);var e=[];return this.dbprovider.fetchDocsWithDocIds(t).then(function(t){return console.log(t),"SUCCESS"==t.status&&t.response.length>0?(t.response.forEach(function(t){console.log(t),"others"==t.contactType&&e.push(t)}),e):[]}).catch(function(t){return[]})}},{key:"fetchAlternateVehicleInfoAgainstVehicle",value:function(t){return this.dbprovider.fetchDocsWithoutRelationshipByParentTypeAndId(this.alternateVehicleTableName,this.vehicleTableName,t).then(function(t){return console.log(t),t&&"SUCCESS"==t.status?t.records:null})}},{key:"menuClick",value:function(t){this.selectedVehicle=t.vehicleInfo,console.log("menu click",this.selectedVehicle)}},{key:"showAlternateContactList",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("alternate contact detail"),this.dialogService.open(b.a,{header:this.translate.instant("contactList.title"),width:"50%",data:{vehicle:this.selectedVehicle}}).onClose.subscribe(function(t){e.fetchVehicleContactAssignemntAgainstContact(e.selectedContact.id)});case 1:case"end":return t.stop()}},t,this)}))}},{key:"alternateVehicleList",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("alternate vehicle detail"),this.dialogService.open(h.a,{header:this.translate.instant("alternateVehicle.title"),width:"50%",data:{vehicle:this.selectedVehicle}}).onClose.subscribe(function(t){e.fetchVehicleContactAssignemntAgainstContact(e.selectedContact.id)});case 1:case"end":return t.stop()}},t,this)}))}},{key:"accountDetail",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("account detail"),this.dialogService.open(d.a,{header:this.translate.instant("accountDetail.title"),width:"50%",data:{vehicle:this.selectedVehicle}}).onClose.subscribe(function(t){e.fetchVehicleContactAssignemntAgainstContact(e.selectedContact.id)});case 1:case"end":return t.stop()}},t,this)}))}},{key:"itemSelect",value:function(t){console.log(t),t.selected=1,this.selectedContact=t,this.fetchVehicleContactAssignemntAgainstContact(t.id)}},{key:"searchByKeyword",value:function(){var e=this;console.log("search",this.queryText),this.contactList=[],this.queryText.length>0?this.allContactList.forEach(function(t){(t.contactName.toLowerCase().includes(e.queryText.toLowerCase())||t.contactMobile.toString().toLowerCase().includes(e.queryText.toLowerCase()))&&e.contactList.push(t)}):this.contactList=t(this.allContactList),this.contactList.length>0&&(this.selectedContact=this.contactList[0],this.fetchVehicleContactAssignemntAgainstContact(this.selectedContact.id))}},{key:"backButtonOnclick",value:function(){this.location.back()}},{key:"vehicleDetail",value:function(t){this.router.navigate(["vehicleInfoDetail"],{queryParams:{vehicle:JSON.stringify(t),selectedContactId:this.selectedContact.id}})}}])&&i(c.prototype,o),a&&i(c,a),e}(),U.\u0275fac=function(t){return new(t||U)(p.Mb(g.g),p.Mb(v.a),p.Mb(l.G),p.Mb(a.h),p.Mb(S.d),p.Mb(m.a),p.Mb(R.h))},U.\u0275cmp=p.Gb({type:U,selectors:[["contactListWithVehicleInfo"]],decls:25,vars:8,consts:[["no-border",""],["slot","start"],["slot","start",3,"click"],["name","arrow-back",2,"font-size","30px","color","black"],["size","large",1,"ion-text-center"],[1,"container"],[1,"left"],[2,"position","fixed","width","30%","background-color","white","padding-right","5px","padding-left","3px"],["pInputText","","type","text","placeholder","Search contact",2,"width","70%",3,"ngModel","ngModelChange","keyup.enter"],[2,"padding-left","7px"],["pButton","","pRipple","","type","button","icon","pi pi-search",1,"p-button-rounded","p-button-success",3,"click"],[2,"float","right"],["pButton","","pRipple","","type","button","icon","pi pi-user-plus",1,"p-button-rounded","p-button-info",3,"click"],[2,"padding-top","60px","width","100%"],[3,"click",4,"ngFor","ngForOf"],[1,"vl2","alignright"],["class","right",4,"ngIf"],["class","right","style","background-color: white;",4,"ngIf"],["key","contactList","position","center"],[3,"click"],["name","person-circle-outline",2,"font-size","50px"],[4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-pencil","label","",1,"p-button-rounded","p-button-text",3,"click"],[1,"right"],[2,"position","fixed","width","71%"],["mode","ios","slot","end",1,"my-button",3,"click"],["src","./../../assets/car_add1.png",2,"width","33px","height","33px"],[2,"padding-top","50px","width","100%"],["size","4.5"],[1,"alignleft",2,"text-align","center","width","30%"],[2,"margin","auto"],["name","car-sport-outline",2,"font-size","50px"],[2,"text-align","center"],[1,"alignleft",2,"width","67%"],[1,"vl","alignright"],["size","3.8"],[1,"alignleft",2,"width","97%"],["size","3"],["style","padding: 0px;",4,"ngFor","ngForOf"],["size","1.2",2,"padding-left","0px"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v","label","",1,"p-button-rounded","p-button-text",3,"click"],["appendTo","body",3,"popup","model"],["menu",""],[2,"padding","0px"],[2,"padding-top","2px"],[1,"right",2,"background-color","white"],["style","height: 100%;padding-top: 55px",4,"ngFor","ngForOf"],[2,"height","100%","padding-top","55px"],[2,"background-color","white","height","33.3%","width","100%","max-height","200px","min-height","180px"],["size","5.6",2,"height","99%"],[1,"alignleft",2,"width","100%","padding-left","10px"],["size","0.8",2,"background-color","white"],[1,"hl"],[2,"height","33.3%","max-height","200px","min-height","180px"],[2,"padding-left","10px"],[2,"width","100%","height","30%"],[2,"padding-left","4px"],[2,"width","100%","height","70%"],["style","min-width: 25%;max-width: 25%;",4,"ngFor","ngForOf"],[2,"min-width","25%","max-width","25%"],[2,"padding-top","50%","font-size","20px"]],template:function(t,e){1&t&&(p.Sb(0,"ion-header",0),p.Sb(1,"ion-toolbar"),p.Sb(2,"ion-buttons",1),p.Sb(3,"ion-button",2),p.ac("click",function(){return e.backButtonOnclick()}),p.Sb(4,"h2"),p.Nb(5,"ion-icon",3),p.Rb(),p.Rb(),p.Rb(),p.Sb(6,"ion-title",4),p.Ec(7),p.dc(8,"translate"),p.Rb(),p.Rb(),p.Rb(),p.Sb(9,"ion-content"),p.Sb(10,"div",5),p.Sb(11,"div",6),p.Sb(12,"ion-toolbar",7),p.Sb(13,"input",8),p.ac("ngModelChange",function(t){return e.queryText=t})("keyup.enter",function(){return e.searchByKeyword()}),p.Rb(),p.Sb(14,"span",9),p.Sb(15,"button",10),p.ac("click",function(){return e.searchByKeyword()}),p.Rb(),p.Rb(),p.Sb(16,"span",11),p.Sb(17,"button",12),p.ac("click",function(){return e.contactAddButtonclick()}),p.Rb(),p.Rb(),p.Rb(),p.Sb(18,"ion-list",13),p.Cc(19,E,11,4,"ion-item",14),p.Rb(),p.Rb(),p.Nb(20,"div",15),p.Cc(21,O,6,1,"div",16),p.Cc(22,W,5,1,"div",17),p.Cc(23,$,10,0,"div",17),p.Rb(),p.Nb(24,"p-toast",18),p.Rb()),2&t&&(p.Ab(7),p.Gc(" ",p.ec(8,6,"contactListWithVehicle.title")," "),p.Ab(6),p.jc("ngModel",e.queryText),p.Ab(6),p.jc("ngForOf",e.contactList),p.Ab(2),p.jc("ngIf",e.vehicleList.length>1),p.Ab(1),p.jc("ngIf",1==e.vehicleList.length),p.Ab(1),p.jc("ngIf",0==e.vehicleList.length))},directives:[l.n,l.A,l.e,l.d,l.o,l.z,l.k,r.a,A.a,r.i,r.l,C.b,y.a,l.s,a.k,a.l,k.a,l.q,l.c,l.r,l.j,w.a,l.w,l.m],pipes:[S.c,a.e],styles:[".sticky[_ngcontent-%COMP%]{position:-webkit-sticky;top:0;height:60px}.alignleft[_ngcontent-%COMP%]{float:left}.alignright[_ngcontent-%COMP%]{float:right}.vl[_ngcontent-%COMP%]{border-left:1px solid #050505;height:100px}.vl2[_ngcontent-%COMP%]{border-left:1px solid #a09d9d;height:100%}.hl[_ngcontent-%COMP%]{border-top:1px solid #a09d9d;width:100%;height:1px;background-color:#000}.my-button[_ngcontent-%COMP%]{--background:#white;--background-activated:#white}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;align-items:center;width:50%;margin:auto}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;width:100%}.left[_ngcontent-%COMP%]{width:30%}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:block;background-color:#fff;overflow-y:scroll}.right[_ngcontent-%COMP%]{width:70%}"]}),U)}],G=((z=function t(){n(this,t)}).\u0275mod=p.Kb({type:z}),z.\u0275inj=p.Jb({factory:function(t){return new(t||z)},imports:[[g.k.forChild(q),a.c,r.f,l.B,A.b,C.c,y.b,w.b,S.b,k.b],g.k]}),z)}}])}();