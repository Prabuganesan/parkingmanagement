(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{vfUr:function(e,t,n){"use strict";n.r(t),n.d(t,"applicationUserListModule",function(){return R});var i=n("ofXK"),o=n("TEn/"),a=n("3Pt+"),r=n("fXoL"),s=n("tyNb"),c=n("27b0"),p=n("tp0D"),b=n("7zfz"),l=n("J7/z"),d=n("Gxio"),m=n("sYmb");let u=(()=>{class e{constructor(e,t,n,i,o,a,r){this.router=e,this.dbconfig=t,this.formBuilder=n,this.dbprovider=i,this.messageService=o,this.ref=a,this.config=r,this.applicationUserObj={},this.tableName="applicationUser",this.savedSuccessMessage="Data saved successfully","edit"==r.data.mode?(this.applicationUserObj=JSON.parse(JSON.stringify(r.data.object)),this.applicationUserObj.confirmPassword=r.data.object.password):this.initializeObjects(this.dbconfig.configuration.tableStructure),this.createFormGroup()}initializeObjects(e){this.applicationUserObj=JSON.parse(JSON.stringify(e[this.tableName]))}createFormGroup(){this.formGroup=this.formBuilder.group({applicationUser:this.formBuilder.group({userName:["",a.o.compose([a.o.maxLength(80),a.o.required])],mobile:["",[a.o.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],code:["",a.o.compose([a.o.required])],password:["",a.o.compose([a.o.required])],confirmPassword:["",a.o.compose([a.o.required])]})})}saveAction(){if(this.formGroup.patchValue({applicationUser:{userName:this.applicationUserObj.userName,mobile:this.applicationUserObj.mobile,code:this.applicationUserObj.code,password:this.applicationUserObj.password,confirmPassword:this.applicationUserObj.confirmPassword,userType:"Others"}}),this.formGroup.valid){if(this.applicationUserObj.confirmPassword!=this.applicationUserObj.password)return void this.messageService.add({key:"userEntry",severity:"error",summary:"Password mismatch",detail:"",closable:!0});this.alreadyExistValidation().then(e=>{e?this.messageService.add({key:"userEntry",severity:"error",summary:"Code already exist",detail:"",closable:!0}):(delete this.applicationUserObj.confirmPassword,this.dbprovider.save(this.tableName,this.applicationUserObj).then(e=>{"SUCCESS"==e.status?(this.messageService.add({key:"userEntry",severity:"success",summary:this.savedSuccessMessage,detail:""}),setTimeout(()=>this.ref.close("SUCCESS"),1e3)):this.messageService.add({key:"userEntry",severity:"error",summary:e.message,detail:"",closable:!0})}).catch(e=>{console.log(e),this.messageService.add({key:"userEntry",severity:"error",summary:e,detail:""})}))})}else this.messageService.add({key:"userEntry",severity:"error",summary:"Fill all fields",detail:"",closable:!0})}alreadyExistValidation(){var e=!1;return"edit"==this.config.data.mode&&this.applicationUserObj.code==this.config.data.object.code?Promise.resolve(e):this.dbprovider.fetchDocsWithoutRelationshipUsingFindOption({selector:{"data.code":this.applicationUserObj.code,"data.type":this.tableName},sort:["data.code"]}).then(t=>("SUCCESS"==t.status&&t.records.length>0&&(e=!0),e))}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(s.g),r.Mb(c.a),r.Mb(a.b),r.Mb(p.a),r.Mb(b.h),r.Mb(l.d),r.Mb(l.b))},e.\u0275cmp=r.Gb({type:e,selectors:[["applicationUserEntry"]],decls:33,vars:24,consts:[[1,"pm-rpe-popup"],[3,"formGroup"],["lines","none","formGroupName","applicationUser"],["position","floating"],["type","text","formControlName","userName","required","",3,"ngModel","ngModelChange"],["type","number","formControlName","mobile",3,"ngModel","ngModelChange"],["type","number","formControlName","code","required","",3,"ngModel","ngModelChange"],["type","password","formControlName","password","required","",3,"ngModel","ngModelChange"],["type","text","formControlName","confirmPassword","required","",3,"ngModel","ngModelChange"],["type","submit","color","danger","expand","block",3,"click"],["key","userEntry","position","center"]],template:function(e,t){1&e&&(r.Sb(0,"ion-content",0),r.Sb(1,"form",1),r.Sb(2,"ion-item",2),r.Sb(3,"ion-label",3),r.Ec(4),r.dc(5,"translate"),r.Rb(),r.Sb(6,"ion-input",4),r.ac("ngModelChange",function(e){return t.applicationUserObj.userName=e}),r.Rb(),r.Rb(),r.Sb(7,"ion-item",2),r.Sb(8,"ion-label",3),r.Ec(9),r.dc(10,"translate"),r.Rb(),r.Sb(11,"ion-input",5),r.ac("ngModelChange",function(e){return t.applicationUserObj.mobile=e}),r.Rb(),r.Rb(),r.Sb(12,"ion-item",2),r.Sb(13,"ion-label",3),r.Ec(14),r.dc(15,"translate"),r.Rb(),r.Sb(16,"ion-input",6),r.ac("ngModelChange",function(e){return t.applicationUserObj.code=e}),r.Rb(),r.Rb(),r.Sb(17,"ion-item",2),r.Sb(18,"ion-label",3),r.Ec(19),r.dc(20,"translate"),r.Rb(),r.Sb(21,"ion-input",7),r.ac("ngModelChange",function(e){return t.applicationUserObj.password=e}),r.Rb(),r.Rb(),r.Sb(22,"ion-item",2),r.Sb(23,"ion-label",3),r.Ec(24),r.dc(25,"translate"),r.Rb(),r.Sb(26,"ion-input",8),r.ac("ngModelChange",function(e){return t.applicationUserObj.confirmPassword=e}),r.Rb(),r.Rb(),r.Sb(27,"ion-row"),r.Sb(28,"ion-col"),r.Sb(29,"ion-button",9),r.ac("click",function(){return t.saveAction()}),r.Ec(30),r.dc(31,"translate"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Nb(32,"p-toast",10),r.Rb()),2&e&&(r.Ab(1),r.jc("formGroup",t.formGroup),r.Ab(3),r.Fc(r.ec(5,12,"applicationUserEntry.username")),r.Ab(2),r.jc("ngModel",t.applicationUserObj.userName),r.Ab(3),r.Fc(r.ec(10,14,"applicationUserEntry.mobile")),r.Ab(2),r.jc("ngModel",t.applicationUserObj.mobile),r.Ab(3),r.Fc(r.ec(15,16,"applicationUserEntry.code")),r.Ab(2),r.jc("ngModel",t.applicationUserObj.code),r.Ab(3),r.Fc(r.ec(20,18,"applicationUserEntry.password")),r.Ab(2),r.jc("ngModel",t.applicationUserObj.password),r.Ab(3),r.Fc(r.ec(25,20,"applicationUserEntry.confirmpassword")),r.Ab(2),r.jc("ngModel",t.applicationUserObj.confirmPassword),r.Ab(4),r.Fc(r.ec(31,22,"save")))},directives:[o.k,a.p,a.j,a.d,o.q,a.e,o.r,o.p,o.K,a.i,a.c,a.n,o.F,o.w,o.j,o.d,d.a],pipes:[m.c],styles:[".pm-rpe-popup[_ngcontent-%COMP%]{height:350px;--background:#fff}.pm-rpe-popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{color:#313131;--background:#fff;background:#fff;border-bottom:1px solid #c7c7c7}"]}),e})();var g=n("8CEF");function h(e,t){1&e&&(r.Sb(0,"div",20),r.Nb(1,"i",21),r.Rb())}function f(e,t){1&e&&(r.Sb(0,"div",20),r.Nb(1,"i",22),r.Rb())}function S(e,t){if(1&e){const e=r.Tb();r.Sb(0,"div",15),r.ac("click",function(){r.wc(e);const n=t.$implicit;return r.cc().editaction(n)}),r.Cc(1,h,2,0,"div",16),r.Cc(2,f,2,0,"div",16),r.Sb(3,"div",17),r.Sb(4,"div"),r.Sb(5,"span",18),r.Ec(6,"Name : "),r.Rb(),r.Sb(7,"span",19),r.Sb(8,"strong"),r.Ec(9),r.Rb(),r.Rb(),r.Rb(),r.Sb(10,"div"),r.Sb(11,"span",18),r.Ec(12,"Mobile : "),r.Rb(),r.Sb(13,"span",19),r.Sb(14,"strong"),r.Ec(15),r.Rb(),r.Rb(),r.Rb(),r.Sb(16,"div"),r.Sb(17,"span",18),r.Ec(18,"Code : "),r.Rb(),r.Sb(19,"span",19),r.Sb(20,"strong"),r.Ec(21),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&e){const e=t.$implicit;r.Ab(1),r.jc("ngIf","Admin"==e.userType),r.Ab(1),r.jc("ngIf","Admin"!=e.userType),r.Ab(7),r.Fc(e.userName),r.Ab(6),r.Fc(e.mobile),r.Ab(6),r.Fc(e.code)}}let C=(()=>{class e{constructor(e,t,n,i,o,a){this.router=e,this.dialogService=t,this.messageService=n,this.location=i,this.translate=o,this.dbprovider=a,this.users=[],this.tableName="applicationUser",this.fetchData()}fetchData(){this.dbprovider.fetchDocsWithoutRelationshipByType(this.tableName).then(e=>{e&&"SUCCESS"==e.status?this.users=e.records:this.messageService.add({key:"userList",severity:"error",summary:e.message,detail:""})})}backButtonOnclick(){this.location.back()}userAddClick(){console.log("user add"),this.dialogService.open(u,{header:this.translate.instant("applicationUserEntry.title"),width:"40%",data:{object:"",mode:"new"}}).onClose.subscribe(e=>{e&&"SUCCESS"==e&&this.fetchData()})}editaction(e){console.log("edit",e),this.dialogService.open(u,{header:this.translate.instant("rentPlanEntry.title"),width:"40%",data:{object:e,mode:"edit"}}).onClose.subscribe(e=>{e&&"SUCCESS"==e&&this.fetchData()})}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(s.g),r.Mb(l.a),r.Mb(b.h),r.Mb(i.h),r.Mb(m.d),r.Mb(p.a))},e.\u0275cmp=r.Gb({type:e,selectors:[["applicationUserList"]],decls:17,vars:4,consts:[["no-border","",1,"pm-header"],[1,"pm-toolbar"],["slot","start",1,"pm-clickaction"],[3,"click"],["name","arrow-back"],["slot","end",1,"pm-clickaction"],["slot","end",3,"click"],["name","add"],["size","large",1,"ion-text-center","pm-header-title"],[1,"pm-content"],[1,"pm-container"],["layout","grid",3,"value"],["dv",""],["pTemplate","gridItem"],["key","userList","position","center"],[1,"p-col-12","p-md-4","pm-card-seg",3,"click"],["class","pm-aul-card",4,"ngIf"],[1,"pm-aul-card-seg"],[1,"pm-v-label"],[1,"pm-camelcase"],[1,"pm-aul-card"],["title","Admin",1,"pi","pi-user",2,"font-size","4rem"],["title","User",1,"pi","pi-id-card",2,"font-size","4rem"]],template:function(e,t){1&e&&(r.Sb(0,"ion-header",0),r.Sb(1,"ion-toolbar",1),r.Sb(2,"ion-buttons",2),r.Sb(3,"ion-button",3),r.ac("click",function(){return t.backButtonOnclick()}),r.Nb(4,"ion-icon",4),r.Rb(),r.Rb(),r.Sb(5,"ion-buttons",5),r.Sb(6,"ion-button",6),r.ac("click",function(){return t.userAddClick()}),r.Nb(7,"ion-icon",7),r.Rb(),r.Rb(),r.Sb(8,"ion-title",8),r.Ec(9),r.dc(10,"translate"),r.Rb(),r.Rb(),r.Rb(),r.Sb(11,"ion-content",9),r.Sb(12,"div",10),r.Sb(13,"p-dataView",11,12),r.Cc(15,S,22,5,"ng-template",13),r.Rb(),r.Rb(),r.Nb(16,"p-toast",14),r.Rb()),2&e&&(r.Ab(9),r.Gc(" ",r.ec(10,2,"applicationUserList.title")," "),r.Ab(4),r.jc("value",t.users))},directives:[o.n,o.A,o.e,o.d,o.o,o.z,o.k,g.a,b.j,d.a,i.l],pipes:[m.c],styles:[".pm-content[_ngcontent-%COMP%]{--background:#fff}.pm-content[_ngcontent-%COMP%]   .pm-container[_ngcontent-%COMP%]{height:100%;background:#fff}.pm-content[_ngcontent-%COMP%]   .pm-container[_ngcontent-%COMP%]   .pm-card-seg[_ngcontent-%COMP%]{box-shadow:0 2px 8px 0 rgba(99,99,99,.2);margin:20px;padding:20px!important;border-radius:15px;display:inline-flex;color:#212e3f}.pm-content[_ngcontent-%COMP%]   .pm-container[_ngcontent-%COMP%]   .pm-card-seg[_ngcontent-%COMP%]   .pm-aul-card-seg[_ngcontent-%COMP%]{font-size:18px;text-transform:capitalize;width:calc(100% - 50px)}.pm-content[_ngcontent-%COMP%]   .pm-container[_ngcontent-%COMP%]   .pm-card-seg[_ngcontent-%COMP%]   .pm-aul-card-seg[_ngcontent-%COMP%]   .pm-v-label[_ngcontent-%COMP%]{color:#212e3f;padding-right:5px;line-height:1.5}.pm-content[_ngcontent-%COMP%]   .pm-container[_ngcontent-%COMP%]   .pm-card-seg[_ngcontent-%COMP%]   .pm-aul-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem!important;margin-right:15px;padding-top:3px}.pm-content[_ngcontent-%COMP%]   .pm-container[_ngcontent-%COMP%]   .pm-card-seg[_ngcontent-%COMP%]:hover{cursor:pointer}.pm-content[_ngcontent-%COMP%]   .pm-container[_ngcontent-%COMP%]   .pm-card-seg[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#2196f3}"]}),e})();var M=n("7kUa"),O=n("jIHw"),y=n("Q4Mo"),v=n("1SLH");const U=[{path:"",component:C}];let R=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[s.k.forChild(U),i.c,a.f,o.B,M.b,O.c,y.b,v.b,g.b,l.c,m.b,d.b],s.k]}),e})()}}]);